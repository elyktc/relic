(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function j(){}const wt=e=>e;function Fe(e,t){for(const n in t)e[n]=t[n];return e}function qn(e){return e()}function $n(){return Object.create(null)}function J(e){e.forEach(qn)}function Ut(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ai(e){return Object.keys(e).length===0}function fi(e,...t){if(e==null)return j;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Y(e,t,n){e.$$.on_destroy.push(fi(t,n))}function we(e){return e??""}function mt(e,t,n){return e.set(n),t}const Wn=typeof window<"u";let Gt=Wn?()=>window.performance.now():()=>Date.now(),Qe=Wn?e=>requestAnimationFrame(e):j;const At=new Set;function Bn(e){At.forEach(t=>{t.c(e)||(At.delete(t),t.f())}),At.size!==0&&Qe(Bn)}function Xt(e){let t;return At.size===0&&Qe(Bn),{promise:new Promise(n=>{At.add(t={c:e,f:n})}),abort(){At.delete(t)}}}function p(e,t){e.appendChild(t)}function Kn(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function di(e){const t=h("style");return pi(Kn(e),t),t.sheet}function pi(e,t){return p(e.head||e,t),t.sheet}function T(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e){return document.createElement(e)}function _i(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function q(e){return document.createTextNode(e)}function E(){return q(" ")}function Yn(){return q("")}function I(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function mi(e){return Array.from(e.childNodes)}function ct(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function En(e,t){e.value=t??""}function ut(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function rt(e,t,n){e.classList[n?"add":"remove"](t)}function Gn(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}class hi{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=_i(n.nodeName):this.e=h(n.nodeName),this.t=n,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)T(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(S)}}function Cn(e,t){return new e(t)}const $e=new Map;let Ee=0;function vi(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function gi(e,t){const n={stylesheet:di(t),rules:{}};return $e.set(e,n),n}function Wt(e,t,n,i,r,s,c,l=0){const o=16.666/i;let u=`{
`;for(let y=0;y<=1;y+=o){const w=t+(n-t)*s(y);u+=y*100+`%{${c(w,1-w)}}
`}const d=u+`100% {${c(n,1-n)}}
}`,a=`__svelte_${vi(d)}_${l}`,f=Kn(e),{stylesheet:_,rules:m}=$e.get(f)||gi(f,e);m[a]||(m[a]=!0,_.insertRule(`@keyframes ${a} ${d}`,_.cssRules.length));const v=e.style.animation||"";return e.style.animation=`${v?`${v}, `:""}${a} ${i}ms linear ${r}ms 1 both`,Ee+=1,a}function Bt(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),r=n.length-i.length;r&&(e.style.animation=i.join(", "),Ee-=r,Ee||bi())}function bi(){Qe(()=>{Ee||($e.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&S(t)}),$e.clear())})}function yi(e,t,n,i){if(!t)return j;const r=e.getBoundingClientRect();if(t.left===r.left&&t.right===r.right&&t.top===r.top&&t.bottom===r.bottom)return j;const{delay:s=0,duration:c=300,easing:l=wt,start:o=Gt()+s,end:u=o+c,tick:d=j,css:a}=n(e,{from:t,to:r},i);let f=!0,_=!1,m;function v(){a&&(m=Wt(e,0,1,c,s,l,a)),s||(_=!0)}function y(){a&&Bt(e,m),f=!1}return Xt(w=>{if(!_&&w>=o&&(_=!0),_&&w>=u&&(d(1,0),y()),!f)return!1;if(_){const $=w-o,g=0+1*l($/c);d(g,1-g)}return!0}),v(),d(0,1),y}function ki(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,r=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,Xn(e,r)}}function Xn(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),r=i.transform==="none"?"":i.transform;e.style.transform=`${r} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Kt;function qt(e){Kt=e}function Ze(){if(!Kt)throw new Error("Function called outside component initialization");return Kt}function vt(e){Ze().$$.on_mount.push(e)}function wi(e){Ze().$$.on_destroy.push(e)}function Vn(){const e=Ze();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=Gn(t,n,{cancelable:i});return r.slice().forEach(c=>{c.call(e,s)}),!s.defaultPrevented}return!0}}const Ht=[],He=[],ge=[],Mn=[],$i=Promise.resolve();let qe=!1;function Ei(){qe||(qe=!0,$i.then(Qn))}function G(e){ge.push(e)}const De=new Set;let me=0;function Qn(){const e=Kt;do{for(;me<Ht.length;){const t=Ht[me];me++,qt(t),Ci(t.$$)}for(qt(null),Ht.length=0,me=0;He.length;)He.pop()();for(let t=0;t<ge.length;t+=1){const n=ge[t];De.has(n)||(De.add(n),n())}ge.length=0}while(Ht.length);for(;Mn.length;)Mn.pop()();qe=!1,De.clear(),qt(e)}function Ci(e){if(e.fragment!==null){e.update(),J(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(G)}}let Ft;function ze(){return Ft||(Ft=Promise.resolve(),Ft.then(()=>{Ft=null})),Ft}function bt(e,t,n){e.dispatchEvent(Gn(`${t?"intro":"outro"}${n}`))}const be=new Set;let ft;function yt(){ft={r:0,c:[],p:ft}}function kt(){ft.r||J(ft.c),ft=ft.p}function N(e,t){e&&e.i&&(be.delete(e),e.i(t))}function x(e,t,n,i){if(e&&e.o){if(be.has(e))return;be.add(e),ft.c.push(()=>{be.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const Je={duration:0};function tn(e,t,n){const i={direction:"in"};let r=t(e,n,i),s=!1,c,l,o=0;function u(){c&&Bt(e,c)}function d(){const{delay:f=0,duration:_=300,easing:m=wt,tick:v=j,css:y}=r||Je;y&&(c=Wt(e,0,1,_,f,m,y,o++)),v(0,1);const w=Gt()+f,$=w+_;l&&l.abort(),s=!0,G(()=>bt(e,!0,"start")),l=Xt(g=>{if(s){if(g>=$)return v(1,0),bt(e,!0,"end"),u(),s=!1;if(g>=w){const k=m((g-w)/_);v(k,1-k)}}return s})}let a=!1;return{start(){a||(a=!0,Bt(e),Ut(r)?(r=r(i),ze().then(d)):d())},invalidate(){a=!1},end(){s&&(u(),s=!1)}}}function en(e,t,n){const i={direction:"out"};let r=t(e,n,i),s=!0,c;const l=ft;l.r+=1;function o(){const{delay:u=0,duration:d=300,easing:a=wt,tick:f=j,css:_}=r||Je;_&&(c=Wt(e,1,0,d,u,a,_));const m=Gt()+u,v=m+d;G(()=>bt(e,!1,"start")),Xt(y=>{if(s){if(y>=v)return f(0,1),bt(e,!1,"end"),--l.r||J(l.c),!1;if(y>=m){const w=a((y-m)/d);f(1-w,w)}}return s})}return Ut(r)?ze().then(()=>{r=r(i),o()}):o(),{end(u){u&&r.tick&&r.tick(1,0),s&&(c&&Bt(e,c),s=!1)}}}function st(e,t,n,i){const r={direction:"both"};let s=t(e,n,r),c=i?0:1,l=null,o=null,u=null;function d(){u&&Bt(e,u)}function a(_,m){const v=_.b-c;return m*=Math.abs(v),{a:c,b:_.b,d:v,duration:m,start:_.start,end:_.start+m,group:_.group}}function f(_){const{delay:m=0,duration:v=300,easing:y=wt,tick:w=j,css:$}=s||Je,g={start:Gt()+m,b:_};_||(g.group=ft,ft.r+=1),l||o?o=g:($&&(d(),u=Wt(e,c,_,v,m,y,$)),_&&w(0,1),l=a(g,v),G(()=>bt(e,_,"start")),Xt(k=>{if(o&&k>o.start&&(l=a(o,v),o=null,bt(e,l.b,"start"),$&&(d(),u=Wt(e,c,l.b,l.duration,0,y,s.css))),l){if(k>=l.end)w(c=l.b,1-c),bt(e,l.b,"end"),o||(l.b?d():--l.group.r||J(l.group.c)),l=null;else if(k>=l.start){const C=k-l.start;c=l.a+l.d*y(C/l.duration),w(c,1-c)}}return!!(l||o)}))}return{run(_){Ut(s)?ze().then(()=>{s=s(r),f(_)}):f(_)},end(){d(),l=o=null}}}function Mi(e,t){x(e,1,1,()=>{t.delete(e.key)})}function Si(e,t){e.f(),Mi(e,t)}function Ri(e,t,n,i,r,s,c,l,o,u,d,a){let f=e.length,_=s.length,m=f;const v={};for(;m--;)v[e[m].key]=m;const y=[],w=new Map,$=new Map;for(m=_;m--;){const M=a(r,s,m),L=n(M);let A=c.get(L);A?i&&A.p(M,t):(A=u(L,M),A.c()),w.set(L,y[m]=A),L in v&&$.set(L,Math.abs(m-v[L]))}const g=new Set,k=new Set;function C(M){N(M,1),M.m(l,d),c.set(M.key,M),d=M.first,_--}for(;f&&_;){const M=y[_-1],L=e[f-1],A=M.key,K=L.key;M===L?(d=M.first,f--,_--):w.has(K)?!c.has(A)||g.has(A)?C(M):k.has(K)?f--:$.get(A)>$.get(K)?(k.add(A),C(M)):(g.add(K),f--):(o(L,c),f--)}for(;f--;){const M=e[f];w.has(M.key)||o(M,c)}for(;_;)C(y[_-1]);return y}function ji(e,t){const n={},i={},r={$$scope:1};let s=e.length;for(;s--;){const c=e[s],l=t[s];if(l){for(const o in c)o in l||(i[o]=1);for(const o in l)r[o]||(n[o]=l[o],r[o]=1);e[s]=l}else for(const o in c)r[o]=1}for(const c in i)c in n||(n[c]=void 0);return n}function Ti(e){return typeof e=="object"&&e!==null?e:{}}function W(e){e&&e.c()}function U(e,t,n,i){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),i||G(()=>{const c=e.$$.on_mount.map(qn).filter(Ut);e.$$.on_destroy?e.$$.on_destroy.push(...c):J(c),e.$$.on_mount=[]}),s.forEach(G)}function D(e,t){const n=e.$$;n.fragment!==null&&(J(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ni(e,t){e.$$.dirty[0]===-1&&(Ht.push(e),Ei(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function tt(e,t,n,i,r,s,c,l=[-1]){const o=Kt;qt(e);const u=e.$$={fragment:null,ctx:[],props:s,update:j,not_equal:r,bound:$n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:$n(),dirty:l,skip_bound:!1,root:t.target||o.$$.root};c&&c(u.root);let d=!1;if(u.ctx=n?n(e,t.props||{},(a,f,..._)=>{const m=_.length?_[0]:f;return u.ctx&&r(u.ctx[a],u.ctx[a]=m)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](m),d&&Ni(e,a)),f}):[],u.update(),d=!0,J(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const a=mi(t.target);u.fragment&&u.fragment.l(a),a.forEach(S)}else u.fragment&&u.fragment.c();t.intro&&N(e.$$.fragment),U(e,t.target,t.anchor,t.customElement),Qn()}qt(o)}class et{$destroy(){D(this,1),this.$destroy=j}$on(t,n){if(!Ut(n))return j;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!ai(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Zn=20,Ii=50,xi=4,Ai=4,Oi=10,Li=2,Pi=2,Ui=50,Sn=200,We=500,zn=2,Di=1e3,Fi=2,Hi=7,qi=9,Wi=2,Bi=2,Rn=200,jn=10,Jn=200,Ki=.1,Yi=5,Gi=100;function B(e,t){return e??(e=0),t??(t=0),Math.floor(Math.random()*(e-t+1))+t}function _t(e,t){setTimeout(t,e)}function Ot(e,t){t??(t=Ki);let n=Math.ceil(Math.abs(e*t));return B(e+n,e-n)}function he(e){return new Intl.NumberFormat().format(e)}const xt=[];function Vt(e,t=j){let n;const i=new Set;function r(l){if(X(e,l)&&(e=l,n)){const o=!xt.length;for(const u of i)u[1](),xt.push(u,e);if(o){for(let u=0;u<xt.length;u+=2)xt[u][0](xt[u+1]);xt.length=0}}}function s(l){r(l(e))}function c(l,o=j){const u=[l,o];return i.add(u),i.size===1&&(n=t(r)||j),l(e),()=>{i.delete(u),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:c}}function Xi(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function Ce(e){const t=e-1;return t*t*t+1}function Vi(e,{delay:t=0,duration:n=400,easing:i=Xi,amount:r=5,opacity:s=0}={}){const c=getComputedStyle(e),l=+c.opacity,o=c.filter==="none"?"":c.filter,u=l*(1-s);return{delay:t,duration:n,easing:i,css:(d,a)=>`opacity: ${l-u*a}; filter: ${o} blur(${a*r}px);`}}function ti(e,{delay:t=0,duration:n=400,easing:i=wt}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*r}`}}function Se(e,{delay:t=0,duration:n=400,easing:i=Ce,x:r=0,y:s=0,opacity:c=0}={}){const l=getComputedStyle(e),o=+l.opacity,u=l.transform==="none"?"":l.transform,d=o*(1-c);return{delay:t,duration:n,easing:i,css:(a,f)=>`
			transform: ${u} translate(${(1-a)*r}px, ${(1-a)*s}px);
			opacity: ${o-d*f}`}}const nt={TITLE:0,MAP:1,MENU:2,ENC:3,CITY:4,SLEEP:5},$t=Vt(nt.TITLE);function dt(){$t.set(nt.MAP)}function ei(){$t.set(nt.MENU)}function Qi(){$t.set(nt.ENC)}function Re(){$t.set(nt.TITLE)}function Zi(){$t.set(nt.CITY)}function zi(){$t.set(nt.SLEEP)}function lt(e){return ti(e,{duration:Jn})}let ve;const Ji=new Uint8Array(16);function tr(){if(!ve&&(ve=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ve))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ve(Ji)}const H=[];for(let e=0;e<256;++e)H.push((e+256).toString(16).slice(1));function er(e,t=0){return(H[e[t+0]]+H[e[t+1]]+H[e[t+2]]+H[e[t+3]]+"-"+H[e[t+4]]+H[e[t+5]]+"-"+H[e[t+6]]+H[e[t+7]]+"-"+H[e[t+8]]+H[e[t+9]]+"-"+H[e[t+10]]+H[e[t+11]]+H[e[t+12]]+H[e[t+13]]+H[e[t+14]]+H[e[t+15]]).toLowerCase()}const nr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Tn={randomUUID:nr};function ir(e,t,n){if(Tn.randomUUID&&!t&&!e)return Tn.randomUUID();e=e||{};const i=e.random||(e.rng||tr)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let r=0;r<16;++r)t[n+r]=i[r];return t}return er(i)}function ni(){let e=Zn,t=B(e);e-=t;let n=B(e);return e-=n,{hp:t,str:n,dex:e}}function ii(){let e="";var t=ni();let n=t.hp+Ii,i=t.str+xi,r=t.dex+Ai,s=n,c=0,l=0,o=0,u=1,d=Ot((s+t.str+t.dex)*2);return{name:e,hp:n,maxhp:s,str:i,dex:r,steps:c,gp:l,lvl:u,xp:o,next:d}}function rr(e){let t=ni();e.maxhp+=t.hp,e.hp=e.maxhp,e.str+=t.str,e.dex+=t.dex,e.next+=Ot((e.maxhp+e.str+e.dex)*2),e.lvl++,P.set(e)}function sr(){P.set(ii())}const P=Vt(ii());function lr(e){let t,n,i,r,s,c,l,o,u,d,a,f,_,m,v;return{c(){t=h("div"),n=h("div"),i=h("h1"),i.textContent="Relic",r=E(),s=h("p"),s.textContent="by elyktc",c=E(),l=h("div"),o=h("input"),u=E(),d=h("div"),a=h("button"),a.textContent="Start",b(i,"class","svelte-lcr9aa"),ut(i,"margin-right","50px"),ut(s,"margin-left","100px"),b(o,"maxlength","8"),b(o,"class","svelte-lcr9aa"),ut(o,"display","none"),b(l,"class","row"),b(n,"class","view col svelte-lcr9aa"),b(d,"class","ctrls")},m(y,w){T(y,t,w),p(t,n),p(n,i),p(n,r),p(n,s),p(n,c),p(n,l),p(l,o),En(o,e[0].name),p(t,u),p(t,d),p(d,a),_=!0,m||(v=[I(window,"keydown",e[1]),I(o,"input",e[2]),I(a,"click",dt)],m=!0)},p(y,[w]){w&1&&o.value!==y[0].name&&En(o,y[0].name)},i(y){_||(G(()=>{f||(f=st(t,lt,{},!0)),f.run(1)}),_=!0)},o(y){f||(f=st(t,lt,{},!1)),f.run(0),_=!1},d(y){y&&S(t),y&&f&&f.end(),m=!1,J(v)}}}function or(e,t,n){let i;Y(e,P,c=>n(0,i=c));function r(c){switch(c.key){case" ":dt();break}}vt(()=>{sr()});function s(){i.name=this.value,P.set(i)}return[i,r,s]}class cr extends et{constructor(t){super(),tt(this,t,or,lr,X,{})}}function ur(e){let t,n,i,r,s,c,l,o,u,d,a,f,_,m,v,y,w,$,g,k,C,M,L;return{c(){t=h("div"),n=h("div"),i=h("button"),i.textContent="NW",r=E(),s=h("button"),s.textContent="N",c=E(),l=h("button"),l.textContent="NE",o=E(),u=h("div"),d=h("button"),d.textContent="W",a=E(),f=h("button"),f.textContent="Menu",_=E(),m=h("button"),m.textContent="E",v=E(),y=h("div"),w=h("button"),w.textContent="SW",$=E(),g=h("button"),g.textContent="S",k=E(),C=h("button"),C.textContent="SE",b(t,"class","ctrls")},m(A,K){T(A,t,K),p(t,n),p(n,i),p(n,r),p(n,s),p(n,c),p(n,l),p(t,o),p(t,u),p(u,d),p(u,a),p(u,f),p(u,_),p(u,m),p(t,v),p(t,y),p(y,w),p(y,$),p(y,g),p(y,k),p(y,C),M||(L=[I(window,"keydown",e[8]),I(i,"click",e[0]),I(s,"click",e[1]),I(l,"click",e[2]),I(d,"click",e[3]),I(f,"click",ei),I(m,"click",e[4]),I(w,"click",e[5]),I(g,"click",e[6]),I(C,"click",e[7])],M=!0)},p:j,i:j,o:j,d(A){A&&S(t),M=!1,J(L)}}}function ar(e){const t=Vn(),n=()=>t("move",{x:-1,y:-1}),i=()=>t("move",{x:-1,y:0}),r=()=>t("move",{x:-1,y:1}),s=()=>t("move",{x:0,y:-1}),c=()=>t("move",{x:0,y:1}),l=()=>t("move",{x:1,y:-1}),o=()=>t("move",{x:1,y:0}),u=()=>t("move",{x:1,y:1});function d(a){switch(a.key){case"x":ei();break;case"q":n();break;case"w":i();break;case"e":r();break;case"a":s();break;case"d":c();break;case"z":l();break;case"s":o();break;case"c":u();break}}return[n,i,r,s,c,l,o,u,d]}class fr extends et{constructor(t){super(),tt(this,t,ar,ur,X,{})}}let O,Z,z,je,Te,Lt=!0,nn=qi,Nn=Wi,Be=0,rn=0;const dr="u",sn="f",ye="p",ln="t",ri="w",Me="c";function si(e,t,n){e=Math.max(e,1),O=Lt?[]:O??[];let i=t??Math.floor(e/2),r=n??Math.floor(e/2);Z=i,z=r,Lt&&(je=Z,Te=z,Be=0,rn=0),Ke(i,r,Ye.CITY);for(let s=1;s<e;s++){let c=s%2==0?s:-s;i+=c,r+=c,Ke(i,r)}O=li(!0,e,t,n)}function pr(e,t,n,i){if(!e)return e;i??(i=nn);let r=Math.floor(i/2);t??(t=r),n??(n=r);let s=[];for(let c=0;c<i;c++)for(let l=0;l<i;l++){let o=t-r+c,u=n-r+l,d=(e[o]&&e[o][u])??sn;s[c]??(s[c]=[]),s[c][l]=d}return s[r][r]=dr,s}function _r(){let e=oi();if(Z<e&&(O.splice(0,0,[]),je++,Z=e),z<e){let t=ci();for(let n=0;n<t;n++)O[n].splice(0,0,void 0);Te++,z=e}}function mr(e){return[...e.map(t=>[...t])]}function li(e,t,n,i){var a;if(!O)return O;t=t??nn,n=n??Z,i=i??z;let r=mr(O),s=ci(),c=vr(),l=Math.min(t??s,s),o=Math.min(t??c,c),u=Math.max((n??0)-Math.floor(l/2),0),d=Math.max((i??0)-Math.floor(o/2),0);for(let f=0;f<l;f++)for(let _=0;_<o;_++){let m=u+f,v=d+_;r[m]??(r[m]=[]);let y=e?Ne(m,v):sn;(a=r[m])[v]??(a[v]=y)}return r}function Ke(e,t,n){var i;return e??(e=Z),t??(t=z),O??(O=[]),O[e]??(O[e]=[]),(i=O[e])[t]??(i[t]=n??Ne(e,t)),n}function Ne(e,t){if(e??(e=Z),t??(t=z),O&&O[e]&&O[e][t])return O[e][t];let n;if(B(Rn)==1&&B(Rn)<Be++)n=Me,Be=0;else{let i=hr(e,t),r=B(i.length+1);if(r>=i.length){let s=[ye,ln];r=B(s.length+Bi),n=r>=s.length?ye:s[r]}else n=i[r]}return Lt&&(n==Me||n==ri)&&(n=ye),Lt||rn++,n}function hr(e,t){let n=[];for(let i=e-1;i<=e+1;i++)for(let r=t-1;r<=t+1;r++)O[i]&&O[i][r]&&O[i][r]!=Me&&n.push(O[i][r]);return n}function oi(){return Ne()==ln?Math.floor(Nn/2):Nn}function ci(e){return e??(e=O??[]),e.length}function vr(e){e??(e=O??[]);let t=e.map(n=>n.length).sort((n,i)=>n-i);return t[t.length-1]}function gr(e){if(Z+=e.x,z+=e.y,_r(),Ke()==ri)return Z-=e.x,z-=e.y,!1;{let n=oi();n>0&&si(n*2+1,Z,z)}return!0}function br(){let e=li(!1);return pr(e,Z,z,nn)}function yr(){let e=Math.abs(Z-je),t=Math.abs(z-Te);return Math.ceil(Math.hypot(e,t))}function kr(){return rn}function wr(){return{x:Z,y:z,abs:{x:Z-je,y:z-Te},terrain:Ne(),distance:yr()}}function $r(){Lt=!0,si(Hi),Lt=!1}const Ye={FOG:sn,PLAIN:ye,FOREST:ln,CITY:Me},ht={miniMap:br,location:wr,move:gr,getExplored:kr};let ke=new Map;function Er(){let e=ir().substring(0,8),t=B(Yi,Gi);return{name:e,innCost:t}}function Cr(e,t){let n=`${e}.${t}`;return ke.has(n)||ke.set(n,Er()),ke.get(n)}function Mr(){ke.clear()}function Sr(e){let t,n,i,r,s,c;return r=new fr({}),r.$on("move",e[2]),{c(){t=h("div"),n=h("div"),i=E(),W(r.$$.fragment),b(n,"class","view field svelte-1lhh3c0")},m(l,o){T(l,t,o),p(t,n),n.innerHTML=e[0],p(t,i),U(r,t,null),c=!0},p(l,[o]){(!c||o&1)&&(n.innerHTML=l[0])},i(l){c||(N(r.$$.fragment,l),G(()=>{s||(s=st(t,lt,{},!0)),s.run(1)}),c=!0)},o(l){x(r.$$.fragment,l),s||(s=st(t,lt,{},!1)),s.run(0),c=!1},d(l){l&&S(t),D(r),l&&s&&s.end()}}}function Rr(e){return`<span class="icon map-${e}"></span>`}function jr(e,t,n){let i;Y(e,P,u=>n(3,i=u));function r(u){n(0,l=u.map(d=>d.map(Rr).join("")).join("<br/>"))}function s(){return ht.location().terrain==Ye.FOREST?Math.ceil(jn/2):jn}function c(u){ht.move(u)&&(mt(P,i.steps++,i),r(ht.miniMap()),ht.location().terrain==Ye.CITY?Zi():B(s())==1&&Qi())}vt(()=>{i.steps||($r(),Mr()),r(ht.miniMap())});let l="";return[l,c,u=>c(u.detail)]}let Tr=class extends et{constructor(t){super(),tt(this,t,jr,Sr,X,{})}};function Nr(e){let t,n,i,r=e[0].name+"",s,c,l,o,u,d,a=e[0].lvl+"",f,_,m,v,y,w,$=e[0].xp+"",g,k,C,M,L,A,K=e[0].next+"",Et,V,ot,Ct,R,Mt,Qt=e[0].hp+"",Ie,on,Zt=e[0].maxhp+"",xe,cn,St,zt,un,Jt,te=e[0].str+"",Ae,an,Rt,ee,fn,ne,ie=e[0].dex+"",Oe,dn,gt,re,pn,se,le=e[0].gp+"",Le,_n,jt,oe,mn,ce,ue=he(e[0].steps)+"",Pe,hn,Tt,ae,vn,fe,gn,Nt,de,bn,pe,yn,It,Dt,kn,_e,pt,Q,Ue,wn;return{c(){t=h("div"),n=h("div"),i=h("h1"),s=q(r),c=E(),l=h("div"),o=h("div"),o.textContent="Level",u=E(),d=h("div"),f=q(a),_=E(),m=h("div"),v=h("div"),v.textContent="Experience",y=E(),w=h("div"),g=q($),k=E(),C=h("div"),M=h("div"),M.textContent="Next level at",L=E(),A=h("div"),Et=q(K),V=E(),ot=h("div"),Ct=h("div"),Ct.textContent="Health",R=E(),Mt=h("div"),Ie=q(Qt),on=q(" / "),xe=q(Zt),cn=E(),St=h("div"),zt=h("div"),zt.textContent="Strength",un=E(),Jt=h("div"),Ae=q(te),an=E(),Rt=h("div"),ee=h("div"),ee.textContent="Dexterity",fn=E(),ne=h("div"),Oe=q(ie),dn=E(),gt=h("div"),re=h("div"),re.textContent="Gold",pn=E(),se=h("div"),Le=q(le),_n=E(),jt=h("div"),oe=h("div"),oe.textContent="Steps",mn=E(),ce=h("div"),Pe=q(ue),hn=E(),Tt=h("div"),ae=h("div"),ae.textContent="Explored",vn=E(),fe=h("div"),fe.textContent=`${he(ht.getExplored())}`,gn=E(),Nt=h("div"),de=h("div"),de.textContent="Distance traveled",bn=E(),pe=h("div"),pe.textContent=`${he(ht.location().distance)}`,yn=E(),It=h("div"),Dt=h("button"),Dt.textContent="Reset",kn=E(),_e=h("button"),_e.textContent="Back",ut(i,"display","none"),b(o,"class","col label svelte-hfjk0k"),b(d,"class","col value svelte-hfjk0k"),b(l,"class","row svelte-hfjk0k"),b(v,"class","col label svelte-hfjk0k"),b(w,"class","col value svelte-hfjk0k"),b(m,"class","row svelte-hfjk0k"),b(M,"class","col label svelte-hfjk0k"),b(A,"class","col value svelte-hfjk0k"),b(C,"class","row svelte-hfjk0k"),b(Ct,"class","col label svelte-hfjk0k"),b(Mt,"class","col value svelte-hfjk0k"),b(ot,"class","row svelte-hfjk0k"),ut(ot,"margin-top","20px"),b(zt,"class","col label svelte-hfjk0k"),b(Jt,"class","col value svelte-hfjk0k"),b(St,"class","row svelte-hfjk0k"),b(ee,"class","col label svelte-hfjk0k"),b(ne,"class","col value svelte-hfjk0k"),b(Rt,"class","row svelte-hfjk0k"),b(re,"class","col label svelte-hfjk0k"),b(se,"class","col value svelte-hfjk0k"),b(gt,"class","row svelte-hfjk0k"),ut(gt,"margin","10px 0"),b(oe,"class","col label svelte-hfjk0k"),b(ce,"class","col value svelte-hfjk0k"),b(jt,"class","row svelte-hfjk0k"),b(ae,"class","col label svelte-hfjk0k"),b(fe,"class","col value svelte-hfjk0k"),b(Tt,"class","row svelte-hfjk0k"),b(de,"class","col label svelte-hfjk0k"),b(pe,"class","col value svelte-hfjk0k"),b(Nt,"class","row svelte-hfjk0k"),b(n,"class","view col svelte-hfjk0k"),b(Dt,"class","danger svelte-hfjk0k"),b(It,"class","ctrls")},m(F,it){T(F,t,it),p(t,n),p(n,i),p(i,s),p(n,c),p(n,l),p(l,o),p(l,u),p(l,d),p(d,f),p(n,_),p(n,m),p(m,v),p(m,y),p(m,w),p(w,g),p(n,k),p(n,C),p(C,M),p(C,L),p(C,A),p(A,Et),p(n,V),p(n,ot),p(ot,Ct),p(ot,R),p(ot,Mt),p(Mt,Ie),p(Mt,on),p(Mt,xe),p(n,cn),p(n,St),p(St,zt),p(St,un),p(St,Jt),p(Jt,Ae),p(n,an),p(n,Rt),p(Rt,ee),p(Rt,fn),p(Rt,ne),p(ne,Oe),p(n,dn),p(n,gt),p(gt,re),p(gt,pn),p(gt,se),p(se,Le),p(n,_n),p(n,jt),p(jt,oe),p(jt,mn),p(jt,ce),p(ce,Pe),p(n,hn),p(n,Tt),p(Tt,ae),p(Tt,vn),p(Tt,fe),p(n,gn),p(n,Nt),p(Nt,de),p(Nt,bn),p(Nt,pe),p(t,yn),p(t,It),p(It,Dt),p(It,kn),p(It,_e),Q=!0,Ue||(wn=[I(window,"keydown",e[1]),I(Dt,"click",Re),I(_e,"click",dt)],Ue=!0)},p(F,[it]){(!Q||it&1)&&r!==(r=F[0].name+"")&&ct(s,r),(!Q||it&1)&&a!==(a=F[0].lvl+"")&&ct(f,a),(!Q||it&1)&&$!==($=F[0].xp+"")&&ct(g,$),(!Q||it&1)&&K!==(K=F[0].next+"")&&ct(Et,K),(!Q||it&1)&&Qt!==(Qt=F[0].hp+"")&&ct(Ie,Qt),(!Q||it&1)&&Zt!==(Zt=F[0].maxhp+"")&&ct(xe,Zt),(!Q||it&1)&&te!==(te=F[0].str+"")&&ct(Ae,te),(!Q||it&1)&&ie!==(ie=F[0].dex+"")&&ct(Oe,ie),(!Q||it&1)&&le!==(le=F[0].gp+"")&&ct(Le,le),(!Q||it&1)&&ue!==(ue=he(F[0].steps)+"")&&ct(Pe,ue)},i(F){Q||(G(()=>{pt||(pt=st(t,lt,{},!0)),pt.run(1)}),Q=!0)},o(F){pt||(pt=st(t,lt,{},!1)),pt.run(0),Q=!1},d(F){F&&S(t),F&&pt&&pt.end(),Ue=!1,J(wn)}}}function Ir(e,t,n){let i;Y(e,P,s=>n(0,i=s));function r(s){switch(s.key){case"q":dt();break;case"Escape":Re();break}}return[i,r]}class xr extends et{constructor(t){super(),tt(this,t,Ir,Nr,X,{})}}function Ar(e,{from:t,to:n},i={}){const r=getComputedStyle(e),s=r.transform==="none"?"":r.transform,[c,l]=r.transformOrigin.split(" ").map(parseFloat),o=t.left+t.width*c/n.width-(n.left+c),u=t.top+t.height*l/n.height-(n.top+l),{delay:d=0,duration:a=_=>Math.sqrt(_)*120,easing:f=Ce}=i;return{delay:d,duration:Ut(a)?a(Math.sqrt(o*o+u*u)):a,easing:f,css:(_,m)=>{const v=m*o,y=m*u,w=_+m*t.width/n.width,$=_+m*t.height/n.height;return`transform: ${s} translate(${v}px, ${y}px) scale(${w}, ${$});`}}}const Or={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},Lr=()=>{const{subscribe:e,update:t}=Vt([]);let n=0;const i={},r=u=>u instanceof Object;return{subscribe:e,push:(u,d={})=>{const a={target:"default",...r(u)?u:{...d,msg:u}},f=i[a.target]||{},_={...Or,...f,...a,theme:{...f.theme,...a.theme},classes:[...f.classes||[],...a.classes||[]],id:++n};return t(m=>_.reversed?[...m,_]:[_,...m]),n},pop:u=>{t(d=>{if(!d.length||u===0)return[];if(r(u))return d.filter(f=>u(f));const a=u||Math.max(...d.map(f=>f.id));return d.filter(f=>f.id!==a)})},set:(u,d={})=>{const a=r(u)?{...u}:{...d,id:u};t(f=>{const _=f.findIndex(m=>m.id===a.id);return _>-1&&(f[_]={...f[_],...a}),f})},_init:(u="default",d={})=>(i[u]=d,i)}},Pt=Lr();function In(e){return Object.prototype.toString.call(e)==="[object Date]"}function Ge(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((r,s)=>Ge(e[s],r));return r=>i.map(s=>s(r))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(In(e)&&In(t)){e=e.getTime(),t=t.getTime();const s=t-e;return c=>new Date(e+c*s)}const i=Object.keys(t),r={};return i.forEach(s=>{r[s]=Ge(e[s],t[s])}),s=>{const c={};return i.forEach(l=>{c[l]=r[l](s)}),c}}if(n==="number"){const i=t-e;return r=>e+r*i}throw new Error(`Cannot interpolate ${n} values`)}function Xe(e,t={}){const n=Vt(e);let i,r=e;function s(c,l){if(e==null)return n.set(e=c),Promise.resolve();r=c;let o=i,u=!1,{delay:d=0,duration:a=400,easing:f=wt,interpolate:_=Ge}=Fe(Fe({},t),l);if(a===0)return o&&(o.abort(),o=null),n.set(e=r),Promise.resolve();const m=Gt()+d;let v;return i=Xt(y=>{if(y<m)return!0;u||(v=_(e,c),typeof a=="function"&&(a=a(e,c)),u=!0),o&&(o.abort(),o=null);const w=y-m;return w>a?(n.set(e=c),!1):(n.set(e=v(f(w/a))),!0)}),i.promise}return{set:s,update:(c,l)=>s(c(r,e),l),subscribe:n.subscribe}}function Pr(e){let t,n=e[0].msg+"",i;return{c(){t=new hi(!1),i=Yn(),t.a=i},m(r,s){t.m(n,r,s),T(r,i,s)},p(r,s){s&1&&n!==(n=r[0].msg+"")&&t.p(n)},i:j,o:j,d(r){r&&S(i),r&&t.d()}}}function Ur(e){let t,n,i;const r=[e[2]];var s=e[0].component.src;function c(l){let o={};for(let u=0;u<r.length;u+=1)o=Fe(o,r[u]);return{props:o}}return s&&(t=Cn(s,c())),{c(){t&&W(t.$$.fragment),n=Yn()},m(l,o){t&&U(t,l,o),T(l,n,o),i=!0},p(l,o){const u=o&4?ji(r,[Ti(l[2])]):{};if(s!==(s=l[0].component.src)){if(t){yt();const d=t;x(d.$$.fragment,1,0,()=>{D(d,1)}),kt()}s?(t=Cn(s,c()),W(t.$$.fragment),N(t.$$.fragment,1),U(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(l){i||(t&&N(t.$$.fragment,l),i=!0)},o(l){t&&x(t.$$.fragment,l),i=!1},d(l){l&&S(n),t&&D(t,l)}}}function xn(e){let t,n,i;return{c(){t=h("div"),b(t,"class","_toastBtn pe svelte-l65oht"),b(t,"role","button"),b(t,"tabindex","0")},m(r,s){T(r,t,s),n||(i=[I(t,"click",e[4]),I(t,"keydown",e[8])],n=!0)},p:j,d(r){r&&S(t),n=!1,J(i)}}}function Dr(e){let t,n,i,r,s,c,l,o,u,d;const a=[Ur,Pr],f=[];function _(v,y){return v[0].component?0:1}i=_(e),r=f[i]=a[i](e);let m=e[0].dismissable&&xn(e);return{c(){t=h("div"),n=h("div"),r.c(),s=E(),m&&m.c(),c=E(),l=h("progress"),b(n,"role","status"),b(n,"class","_toastMsg svelte-l65oht"),rt(n,"pe",e[0].component),b(l,"class","_toastBar svelte-l65oht"),l.value=e[1],b(t,"class","_toastItem svelte-l65oht"),rt(t,"pe",e[0].pausable)},m(v,y){T(v,t,y),p(t,n),f[i].m(n,null),p(t,s),m&&m.m(t,null),p(t,c),p(t,l),o=!0,u||(d=[I(t,"mouseenter",e[9]),I(t,"mouseleave",e[6])],u=!0)},p(v,[y]){let w=i;i=_(v),i===w?f[i].p(v,y):(yt(),x(f[w],1,1,()=>{f[w]=null}),kt(),r=f[i],r?r.p(v,y):(r=f[i]=a[i](v),r.c()),N(r,1),r.m(n,null)),(!o||y&1)&&rt(n,"pe",v[0].component),v[0].dismissable?m?m.p(v,y):(m=xn(v),m.c(),m.m(t,c)):m&&(m.d(1),m=null),(!o||y&2)&&(l.value=v[1]),(!o||y&1)&&rt(t,"pe",v[0].pausable)},i(v){o||(N(r),o=!0)},o(v){x(r),o=!1},d(v){v&&S(t),f[i].d(),m&&m.d(),u=!1,J(d)}}}function Fr(e,t,n){let i,{item:r}=t;const s=Xe(r.initial,{duration:r.duration,easing:wt});Y(e,s,g=>n(1,i=g));const c=()=>Pt.pop(r.id),l=()=>{(i===1||i===0)&&c()};let o=r.initial,u=o,d=!1;const a=()=>{!d&&i!==o&&(s.set(i,{duration:0}),d=!0)},f=()=>{if(d){const g=r.duration,k=g-g*((i-u)/(o-u));s.set(o,{duration:k}).then(l),d=!1}};let _={};const m=(g,k="undefined")=>typeof g===k;let v;vt((g=document)=>{if(m(g.hidden))return;const k=()=>g.hidden?a():f(),C="visibilitychange";g.addEventListener(C,k),v=()=>g.removeEventListener(C,k),k()}),wi(()=>{m(r.onpop,"function")&&r.onpop(r.id),v&&v()});const w=g=>{g instanceof KeyboardEvent&&["Enter"," "].includes(g.key)&&c()},$=()=>{r.pausable&&a()};return e.$$set=g=>{"item"in g&&n(0,r=g.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(m(r.progress)||n(0,r.next=r.progress,r)),e.$$.dirty&131&&o!==r.next&&(n(7,o=r.next),u=i,d=!1,s.set(o).then(l)),e.$$.dirty&1&&r.component){const{props:g={},sendIdTo:k}=r.component;n(2,_={...g,...k&&{[k]:r.id}})}},[r,i,_,s,c,a,f,o,w,$]}class Hr extends et{constructor(t){super(),tt(this,t,Fr,Dr,X,{item:0})}}function An(e,t,n){const i=e.slice();return i[5]=t[n],i}function On(e,t){let n,i,r,s,c,l,o,u,d=j,a;return i=new Hr({props:{item:t[5]}}),{key:e,first:null,c(){n=h("li"),W(i.$$.fragment),r=E(),b(n,"class",s=we(t[5].classes.join(" "))+" svelte-yh90az"),b(n,"style",c=t[1](t[5].theme)),this.first=n},m(f,_){T(f,n,_),U(i,n,null),p(n,r),a=!0},p(f,_){t=f;const m={};_&1&&(m.item=t[5]),i.$set(m),(!a||_&1&&s!==(s=we(t[5].classes.join(" "))+" svelte-yh90az"))&&b(n,"class",s),(!a||_&1&&c!==(c=t[1](t[5].theme)))&&b(n,"style",c)},r(){u=n.getBoundingClientRect()},f(){ki(n),d(),Xn(n,u)},a(){d(),d=yi(n,u,Ar,{duration:200})},i(f){a||(N(i.$$.fragment,f),G(()=>{o&&o.end(1),l=tn(n,Se,t[5].intro),l.start()}),a=!0)},o(f){x(i.$$.fragment,f),l&&l.invalidate(),o=en(n,ti,{}),a=!1},d(f){f&&S(n),D(i),f&&o&&o.end()}}}function qr(e){let t,n=[],i=new Map,r,s=e[0];const c=l=>l[5].id;for(let l=0;l<s.length;l+=1){let o=An(e,s,l),u=c(o);i.set(u,n[l]=On(u,o))}return{c(){t=h("ul");for(let l=0;l<n.length;l+=1)n[l].c();b(t,"class","_toastContainer svelte-yh90az")},m(l,o){T(l,t,o);for(let u=0;u<n.length;u+=1)n[u].m(t,null);r=!0},p(l,[o]){if(o&3){s=l[0],yt();for(let u=0;u<n.length;u+=1)n[u].r();n=Ri(n,o,c,1,l,s,i,t,Si,On,null,An);for(let u=0;u<n.length;u+=1)n[u].a();kt()}},i(l){if(!r){for(let o=0;o<s.length;o+=1)N(n[o]);r=!0}},o(l){for(let o=0;o<n.length;o+=1)x(n[o]);r=!1},d(l){l&&S(t);for(let o=0;o<n.length;o+=1)n[o].d()}}}function Wr(e,t,n){let i;Y(e,Pt,o=>n(4,i=o));let{options:r={}}=t,{target:s="default"}=t,c;const l=o=>Object.keys(o).reduce((u,d)=>`${u}${d}:${o[d]};`,"");return e.$$set=o=>{"options"in o&&n(2,r=o.options),"target"in o&&n(3,s=o.target)},e.$$.update=()=>{e.$$.dirty&12&&Pt._init(s,r),e.$$.dirty&24&&n(0,c=i.filter(o=>o.target===s))},[c,l,r,s,i]}class Br extends et{constructor(t){super(),tt(this,t,Wr,qr,X,{options:2,target:3})}}function Kr(e){let t,n,i,r;return n=new Br({props:{options:e[2],target:e[1]}}),{c(){t=h("div"),W(n.$$.fragment),b(t,"class",i=we(`toast-wrapper-${e[0]}`)+" svelte-gbm9c2")},m(s,c){T(s,t,c),U(n,t,null),r=!0},p(s,[c]){const l={};c&4&&(l.options=s[2]),c&2&&(l.target=s[1]),n.$set(l),(!r||c&1&&i!==(i=we(`toast-wrapper-${s[0]}`)+" svelte-gbm9c2"))&&b(t,"class",i)},i(s){r||(N(n.$$.fragment,s),r=!0)},o(s){x(n.$$.fragment,s),r=!1},d(s){s&&S(t),D(n)}}}function Yr(e,t,n){const i={duration:1e3,initial:1,next:0,pausable:!0,dismissable:!1,reversed:!1,intro:{x:0},theme:{},classes:[]},r={duration:500,initial:1,next:0,pausable:!1,dismissable:!1,reversed:!0,intro:{y:20,duration:100},theme:{},classes:[]};let s;vt(()=>{c==1?n(2,s=i):c==2&&n(2,s=r)});let{type:c=1}=t,{target:l=void 0}=t;return e.$$set=o=>{"type"in o&&n(0,c=o.type),"target"in o&&n(1,l=o.target)},[c,l,s]}class Ve extends et{constructor(t){super(),tt(this,t,Yr,Kr,X,{type:0,target:1})}}function ui(){let e="",t=Zn,n=B(t);t-=n;let i=B(t);t-=i;let r=t;n+=Oi,i+=Li,r+=Pi;let s=n,c=B(Ui),l=Math.ceil(Ot(s+i+r)/2);return{name:e,hp:n,maxhp:s,str:i,dex:r,gp:c,xp:l,lvl:1}}function Gr(){Yt.set(ui())}const Yt=Vt(ui());function Xr(e){let t;return{c(){t=h("div")},m(n,i){T(n,t,i)},p:j,i:j,o:j,d(n){n&&S(t)}}}function Vr(e){let t,n,i,r;return{c(){t=h("span"),b(t,"class","icon map-u svelte-btrsmh"),rt(t,"rejoice",e[3])},m(s,c){T(s,t,c),r=!0},p(s,c){e=s,(!r||c&8)&&rt(t,"rejoice",e[3])},i(s){r||(G(()=>{i&&i.end(1),n=tn(t,Se,e[4]),n.start()}),r=!0)},o(s){n&&n.invalidate(),i=en(t,e[6],{}),r=!1},d(s){s&&S(t),s&&i&&i.end()}}}function Ln(e){let t,n,i,r,s;return{c(){t=h("div"),n=h("span"),b(n,"class","icon dragon svelte-btrsmh"),rt(n,"rejoice",e[2]),b(t,"class","col enc img svelte-btrsmh")},m(c,l){T(c,t,l),p(t,n),s=!0},p(c,l){e=c,(!s||l&4)&&rt(n,"rejoice",e[2])},i(c){s||(G(()=>{r&&r.end(1),i=tn(n,Se,e[5]),i.start()}),s=!0)},o(c){i&&i.invalidate(),r=en(n,e[7],{}),s=!1},d(c){c&&S(t),c&&r&&r.end()}}}function Qr(e){let t,n,i,r,s,c,l,o,u,d,a,f,_,m;const v=[Vr,Xr],y=[];function w(g,k){return!g[2]&&!g[0]?0:1}r=w(e),s=y[r]=v[r](e),o=new Ve({props:{target:"user",type:2}}),f=new Ve({props:{target:"enc",type:2}});let $=!e[3]&&!e[1]&&Ln(e);return{c(){t=h("div"),n=h("div"),i=h("div"),s.c(),c=E(),l=h("div"),W(o.$$.fragment),u=E(),d=h("div"),a=h("div"),W(f.$$.fragment),_=E(),$&&$.c(),b(i,"class","col user img svelte-btrsmh"),b(l,"class","col toast"),b(n,"class","row"),b(a,"class","col toast"),b(d,"class","row"),b(t,"class","row imgs svelte-btrsmh")},m(g,k){T(g,t,k),p(t,n),p(n,i),y[r].m(i,null),p(n,c),p(n,l),U(o,l,null),p(t,u),p(t,d),p(d,a),U(f,a,null),p(d,_),$&&$.m(d,null),m=!0},p(g,[k]){let C=r;r=w(g),r===C?y[r].p(g,k):(yt(),x(y[C],1,1,()=>{y[C]=null}),kt(),s=y[r],s?s.p(g,k):(s=y[r]=v[r](g),s.c()),N(s,1),s.m(i,null)),!g[3]&&!g[1]?$?($.p(g,k),k&10&&N($,1)):($=Ln(g),$.c(),N($,1),$.m(d,null)):$&&(yt(),x($,1,1,()=>{$=null}),kt())},i(g){m||(N(s),N(o.$$.fragment,g),N(f.$$.fragment,g),N($),m=!0)},o(g){x(s),x(o.$$.fragment,g),x(f.$$.fragment,g),x($),m=!1},d(g){g&&S(t),y[r].d(),D(o),D(f),$&&$.d()}}}function Zr(e,t,n){let i,r;Y(e,Yt,v=>n(8,i=v)),Y(e,P,v=>n(9,r=v));const s={x:40,duration:200},c={x:-40,duration:200},l={amount:40,duration:We};function o(v,y,w,$,g){if(!g){if(w)return Vi(v,l);{let k=$;return y||(k.x*=-1),Se(v,k)}}}function u(v){return o(v,f,a,s)}function d(v){return o(v,a,f,c,a)}let a,f,{userRan:_}=t,{encRan:m}=t;return e.$$set=v=>{"userRan"in v&&n(0,_=v.userRan),"encRan"in v&&n(1,m=v.encRan)},e.$$.update=()=>{e.$$.dirty&512&&n(2,a=r.hp<=0),e.$$.dirty&256&&n(3,f=i.hp<=0)},[_,m,a,f,s,c,u,d,i,r]}class zr extends et{constructor(t){super(),tt(this,t,Zr,Qr,X,{userRan:0,encRan:1})}}function Jr(e){let t;return{c(){t=h("div")},m(n,i){T(n,t,i)},p:j,d(n){n&&S(t)}}}function ts(e){let t;return{c(){t=h("progress"),t.value=e[4],b(t,"class","svelte-9px8le")},m(n,i){T(n,t,i)},p(n,i){i&16&&(t.value=n[4])},d(n){n&&S(t)}}}function es(e){let t;return{c(){t=h("div")},m(n,i){T(n,t,i)},p:j,d(n){n&&S(t)}}}function ns(e){let t;return{c(){t=h("progress"),t.value=e[5],b(t,"class","svelte-9px8le")},m(n,i){T(n,t,i)},p(n,i){i&32&&(t.value=n[5])},d(n){n&&S(t)}}}function is(e){let t,n,i,r;function s(a,f){return a[3].hp>0&&!a[0]?ts:Jr}let c=s(e),l=c(e);function o(a,f){return a[2].hp>0&&!a[1]?ns:es}let u=o(e),d=u(e);return{c(){t=h("div"),n=h("div"),l.c(),i=E(),r=h("div"),d.c(),b(n,"class","col user"),b(r,"class","col enc"),b(t,"class","row info svelte-9px8le")},m(a,f){T(a,t,f),p(t,n),l.m(n,null),p(t,i),p(t,r),d.m(r,null)},p(a,[f]){c===(c=s(a))&&l?l.p(a,f):(l.d(1),l=c(a),l&&(l.c(),l.m(n,null))),u===(u=o(a))&&d?d.p(a,f):(d.d(1),d=u(a),d&&(d.c(),d.m(r,null)))},i:j,o:j,d(a){a&&S(t),l.d(),d.d()}}}function rs(e,t,n){let i,r,s,c;Y(e,Yt,a=>n(2,i=a)),Y(e,P,a=>n(3,r=a));const l=Xe(0,{duration:Sn,easing:Ce});Y(e,l,a=>n(4,s=a));const o=Xe(0,{duration:Sn,easing:Ce});Y(e,o,a=>n(5,c=a));let{userRan:u}=t,{encRan:d}=t;return e.$$set=a=>{"userRan"in a&&n(0,u=a.userRan),"encRan"in a&&n(1,d=a.encRan)},e.$$.update=()=>{e.$$.dirty&8&&r.hp&&l.set(r.hp/r.maxhp),e.$$.dirty&4&&i.hp&&o.set(i.hp/i.maxhp)},[u,d,i,r,s,c,l,o]}class ss extends et{constructor(t){super(),tt(this,t,rs,is,X,{userRan:0,encRan:1})}}function ls(e){let t,n,i,r,s,c;return{c(){t=h("div"),n=h("div"),i=h("div"),r=E(),s=h("div"),c=h("div"),b(i,"class","circle svelte-1uajhnl"),ut(i,"transform",`rotate(${Math.min(e[1],180)}deg)`),b(n,"class","wrapper wrapper1 svelte-1uajhnl"),b(c,"class","circle svelte-1uajhnl"),rt(c,"hidden",e[0]<=50),ut(c,"transform",`rotate(${e[1]}deg)`),b(s,"class","wrapper wrapper2 svelte-1uajhnl"),b(t,"class","progress-bar svelte-1uajhnl"),rt(t,"hidden",e[0]>=100)},m(l,o){T(l,t,o),p(t,n),p(n,i),p(t,r),p(t,s),p(s,c)},p(l,[o]){o&2&&ut(i,"transform",`rotate(${Math.min(l[1],180)}deg)`),o&1&&rt(c,"hidden",l[0]<=50),o&2&&ut(c,"transform",`rotate(${l[1]}deg)`),o&1&&rt(t,"hidden",l[0]>=100)},i:j,o:j,d(l){l&&S(t)}}}const Pn=100;function os(e,t,n){let i;const r=Vn();function s(){n(5,u+=Pn),d>=100&&(clearInterval(a),r("ready"))}function c(f){a&&clearInterval(a),n(4,o=f),n(5,u=0),a=setInterval(s,Pn)}function l(){n(5,u=o)}let o=1e3,u,d,a;return e.$$.update=()=>{e.$$.dirty&48&&n(0,d=u/o*100),e.$$.dirty&1&&n(1,i=d*3.6)},[d,i,c,l,o,u]}class cs extends et{constructor(t){super(),tt(this,t,os,ls,X,{start:2,cancel:3})}get start(){return this.$$.ctx[2]}get cancel(){return this.$$.ctx[3]}}function Un(e,t){let n;if(e.dex>t.dex?n=1-t.dex/e.dex:n=e.dex/t.dex,n=Math.ceil(n*100),B(100)<n*Fi)return Ot(e.str)}function us(e,t){return Math.ceil(t/e*1e3*zn)}function Dn(){return Di*zn}function as(e,t=void 0){let n=t?{target:t}:void 0;Pt.push(e,n)}function fs(e,t=void 0){let n={initial:0,next:0};t&&(n.target=t),Pt.push(e,n)}function ds(){Pt.pop(0)}const at={show:as,persist:fs,clear:ds};function Fn(e){let t,n,i,r,s,c,l,o,u,d,a,f,_,m,v,y={};a=new cs({props:y}),e[12](a),a.$on("ready",e[10]);function w(k,C){if(!k[2]&&!k[3]&&!k[4]&&!k[5])return ms;if(k[2]&&k[1])return _s;if(k[3]&&k[1])return ps}let $=w(e),g=$&&$(e);return{c(){t=h("div"),n=h("div"),i=h("button"),r=q("Fight"),c=E(),l=h("button"),o=q("Block"),d=E(),W(a.$$.fragment),f=E(),g&&g.c(),i.disabled=s=!e[0],l.disabled=u=!e[0],b(t,"class","ctrls col")},m(k,C){T(k,t,C),p(t,n),p(n,i),p(i,r),p(n,c),p(n,l),p(l,o),p(n,d),U(a,n,null),p(t,f),g&&g.m(t,null),_=!0,m||(v=[I(i,"click",e[8]),I(l,"click",e[9])],m=!0)},p(k,C){(!_||C&1&&s!==(s=!k[0]))&&(i.disabled=s),(!_||C&1&&u!==(u=!k[0]))&&(l.disabled=u);const M={};a.$set(M),$===($=w(k))&&g?g.p(k,C):(g&&g.d(1),g=$&&$(k),g&&(g.c(),g.m(t,null)))},i(k){_||(N(a.$$.fragment,k),_=!0)},o(k){x(a.$$.fragment,k),_=!1},d(k){k&&S(t),e[12](null),D(a),g&&g.d(),m=!1,J(v)}}}function ps(e){let t,n,i;return{c(){t=h("button"),t.textContent="Reset"},m(r,s){T(r,t,s),n||(i=I(t,"click",Re),n=!0)},p:j,d(r){r&&S(t),n=!1,i()}}}function _s(e){let t,n,i;return{c(){t=h("button"),t.textContent="Proceed"},m(r,s){T(r,t,s),n||(i=I(t,"click",dt),n=!0)},p:j,d(r){r&&S(t),n=!1,i()}}}function ms(e){let t,n,i;return{c(){t=h("button"),t.textContent="Run"},m(r,s){T(r,t,s),n||(i=I(t,"click",e[11]),n=!0)},p:j,d(r){r&&S(t),n=!1,i()}}}function hs(e){let t,n,i,r,s,c,l,o,u,d;i=new zr({props:{userRan:e[4],encRan:e[5]}}),s=new ss({props:{userRan:e[4],encRan:e[5]}});let a=!e[4]&&Fn(e);return{c(){t=h("div"),n=h("div"),W(i.$$.fragment),r=E(),W(s.$$.fragment),c=E(),a&&a.c(),b(n,"class","view field svelte-1tqkonl")},m(f,_){T(f,t,_),p(t,n),U(i,n,null),p(n,r),U(s,n,null),p(t,c),a&&a.m(t,null),o=!0,u||(d=I(window,"keydown",e[7]),u=!0)},p(f,[_]){const m={};_&16&&(m.userRan=f[4]),_&32&&(m.encRan=f[5]),i.$set(m);const v={};_&16&&(v.userRan=f[4]),_&32&&(v.encRan=f[5]),s.$set(v),f[4]?a&&(yt(),x(a,1,1,()=>{a=null}),kt()):a?(a.p(f,_),_&16&&N(a,1)):(a=Fn(f),a.c(),N(a,1),a.m(t,null))},i(f){o||(N(i.$$.fragment,f),N(s.$$.fragment,f),N(a),G(()=>{l||(l=st(t,lt,{},!0)),l.run(1)}),o=!0)},o(f){x(i.$$.fragment,f),x(s.$$.fragment,f),x(a),l||(l=st(t,lt,{},!1)),l.run(0),o=!1},d(f){f&&S(t),D(i),D(s),a&&a.d(),f&&l&&l.end(),u=!1,d()}}}function vs(e,t,n){let i,r;Y(e,P,R=>n(18,i=R)),Y(e,Yt,R=>n(19,r=R));function s(R){switch(R.key){case"f":c();break;case"v":l();break;case"q":!C&&!M&&!L&&!A?m():C&&k?dt():M&&k&&Re();break}}function c(){if(!g)return;n(0,g=!1);let R=Un(i,r);mt(Yt,r.hp-=R??0,r),at.show(y(R),"enc"),r.hp<=0?u():f()}function l(){g&&(K=!0,n(0,g=!1),f())}function o(){if(!C&&!M&&!L&&!Et){let R=Un(r,i);K&&(R=Math.ceil(R/4)),mt(P,i.hp-=R??0,i),at.show(y(R),"user"),R?ot=0:ot++,i.hp<=0?a():ot>3&&B(1)==1?_t(500,v):_t(Ot(w),o)}}function u(){V.cancel(),n(2,C=!0),n(0,g=!1),_t(We,()=>{n(1,k=!0),d()})}function d(){let R=r.xp;A&&(R*=1-r.hp/r.maxhp,R=Math.floor(Math.min(R,i.next-i.xp-1))),R&&(mt(P,i.xp+=R,i),at.persist(`Gained ${R} experience`,"enc")),i.xp>=i.next&&(rr(i),at.persist("Level up!","enc")),A||r.gp&&(mt(P,i.gp+=r.gp,i),at.persist(`Found ${r.gp} gold`,"enc"))}function a(){V.cancel(),n(3,M=!0),n(0,g=!1),_t(We,()=>{n(1,k=!0),at.persist("Game over")})}function f(){$=Ot(Dn()),V.start($)}function _(){!C&&!M&&(n(0,g=!0),K=!1)}function m(){V.cancel(),n(4,L=!0);var R=B(Math.min(i.gp/2,r.gp));mt(P,i.gp-=R,i),R&&at.show(`Dropped ${R} gold`),_t(1e3,dt)}function v(){n(5,A=!0),at.show("Escaped"),u()}vt(()=>(Gr(),w=us(r.dex,i.dex),$=Dn(),_t(B(w),o),V.start($),()=>{V==null||V.cancel(),Et=!0}));const y=R=>R==null?"Miss":`${R}`;let w,$,g,k,C,M,L,A,K,Et,V,ot=0;function Ct(R){He[R?"unshift":"push"](()=>{V=R,n(6,V)})}return[g,k,C,M,L,A,V,s,c,l,_,m,Ct]}class gs extends et{constructor(t){super(),tt(this,t,vs,hs,X,{})}}function Hn(e){let t,n,i,r=e[0].innCost+"",s,c;return{c(){t=h("p"),t.textContent="Inn",n=E(),i=h("p"),s=q(r),c=q(" gold per night")},m(l,o){T(l,t,o),T(l,n,o),T(l,i,o),p(i,s),p(i,c)},p(l,o){o&1&&r!==(r=l[0].innCost+"")&&ct(s,r)},d(l){l&&S(t),l&&S(n),l&&S(i)}}}function bs(e){let t,n,i,r,s,c,l,o,u,d,a,f=e[0]&&Hn(e);return{c(){t=h("div"),n=h("div"),f&&f.c(),i=E(),r=h("div"),s=h("button"),s.textContent="Rest",c=E(),l=h("button"),l.textContent="Leave",b(n,"class","view col"),b(r,"class","ctrls")},m(_,m){T(_,t,m),p(t,n),f&&f.m(n,null),p(t,i),p(t,r),p(r,s),p(r,c),p(r,l),u=!0,d||(a=[I(window,"keydown",e[1]),I(s,"click",e[2]),I(l,"click",dt)],d=!0)},p(_,[m]){_[0]?f?f.p(_,m):(f=Hn(_),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i(_){u||(G(()=>{o||(o=st(t,lt,{},!0)),o.run(1)}),u=!0)},o(_){o||(o=st(t,lt,{},!1)),o.run(0),u=!1},d(_){_&&S(t),f&&f.d(),_&&o&&o.end(),d=!1,J(a)}}}function ys(e,t,n){let i;Y(e,P,l=>n(3,i=l));function r(l){switch(l.key){case"q":dt();break;case"r":s();break}}function s(){i.gp>=c.innCost?(mt(P,i.gp-=c.innCost,i),zi()):at.show("Not enough gold")}vt(()=>{let l=ht.location().abs;n(0,c=Cr(l.x,l.y))});let c;return[c,r,s]}class ks extends et{constructor(t){super(),tt(this,t,ys,bs,X,{})}}function ws(e){let t,n,i,r,s;return{c(){t=h("div"),n=h("div"),i=h("span"),b(i,"class","icon moon"),ut(i,"margin-top","80px"),b(n,"class","view")},m(c,l){T(c,t,l),p(t,n),p(n,i),s=!0},p:j,i(c){s||(G(()=>{r||(r=st(t,lt,{},!0)),r.run(1)}),s=!0)},o(c){r||(r=st(t,lt,{},!1)),r.run(0),s=!1},d(c){c&&S(t),c&&r&&r.end()}}}function $s(e,t,n){let i;return Y(e,P,r=>n(0,i=r)),vt(()=>{mt(P,i.hp=i.maxhp,i),_t(2e3,dt)}),[]}class Es extends et{constructor(t){super(),tt(this,t,$s,ws,X,{})}}function Cs(e){let t,n;return t=new Es({}),{c(){W(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(N(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Ms(e){let t,n;return t=new ks({}),{c(){W(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(N(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Ss(e){let t,n;return t=new gs({}),{c(){W(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(N(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Rs(e){let t,n;return t=new xr({}),{c(){W(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(N(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function js(e){let t,n;return t=new Tr({}),{c(){W(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(N(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Ts(e){let t,n;return t=new cr({}),{c(){W(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(N(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Ns(e){let t,n,i,r,s,c;n=new Ve({});const l=[Ts,js,Rs,Ss,Ms,Cs],o=[];function u(d,a){return d[0]==nt.TITLE?0:d[0]==nt.MAP?1:d[0]==nt.MENU?2:d[0]==nt.ENC?3:d[0]==nt.CITY?4:d[0]==nt.SLEEP?5:-1}return~(r=u(e))&&(s=o[r]=l[r](e)),{c(){t=h("main"),W(n.$$.fragment),i=E(),s&&s.c()},m(d,a){T(d,t,a),U(n,t,null),p(t,i),~r&&o[r].m(t,null),c=!0},p(d,[a]){let f=r;r=u(d),r!==f&&(s&&(yt(),x(o[f],1,1,()=>{o[f]=null}),kt()),~r?(s=o[r],s||(s=o[r]=l[r](d),s.c()),N(s,1),s.m(t,null)):s=null)},i(d){c||(N(n.$$.fragment,d),N(s),c=!0)},o(d){x(n.$$.fragment,d),x(s),c=!1},d(d){d&&S(t),D(n),~r&&o[r].d()}}}function Is(e,t,n){vt(()=>{$t.subscribe(r=>{n(0,i=void 0),at.clear(),_t(Jn,()=>{n(0,i=r)})})});let i;return[i]}class xs extends et{constructor(t){super(),tt(this,t,Is,Ns,X,{})}}new xs({target:document.getElementById("app")});
