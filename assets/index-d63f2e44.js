(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function M(){}const yt=e=>e;function be(e,t){for(const n in t)e[n]=t[n];return e}function hn(e){return e()}function Xe(){return Object.create(null)}function V(e){e.forEach(hn)}function bt(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function jn(e){return Object.keys(e).length===0}function Un(e,...t){if(e==null)return M;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function B(e,t,n){e.$$.on_destroy.push(Un(t,n))}function re(e){return e??""}function _t(e,t,n){return e.set(n),t}function kt(e){return e&&bt(e.destroy)?e.destroy:M}const gn=typeof window<"u";let xt=gn?()=>window.performance.now():()=>Date.now(),Ne=gn?e=>requestAnimationFrame(e):M;const Tt=new Set;function vn(e){Tt.forEach(t=>{t.c(e)||(Tt.delete(t),t.f())}),Tt.size!==0&&Ne(vn)}function Dt(e){let t;return Tt.size===0&&Ne(vn),{promise:new Promise(n=>{Tt.add(t={c:e,f:n})}),abort(){Tt.delete(t)}}}function _(e,t){e.appendChild(t)}function yn(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ln(e){const t=g("style");return Pn(yn(e),t),t.sheet}function Pn(e,t){return _(e.head||e,t),t.sheet}function N(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e){return document.createElement(e)}function xn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Q(e){return document.createTextNode(e)}function $(){return Q(" ")}function Ie(){return Q("")}function O(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Dn(e){return Array.from(e.childNodes)}function at(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Qe(e,t){e.value=t??""}function nt(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function J(e,t,n){e.classList[n?"add":"remove"](t)}function bn(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}class Fn{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=xn(n.nodeName):this.e=g(n.nodeName),this.t=n,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)N(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(S)}}function Ze(e,t){return new e(t)}const se=new Map;let le=0;function Hn(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Bn(e,t){const n={stylesheet:Ln(t),rules:{}};return se.set(e,n),n}function jt(e,t,n,i,r,s,u,l=0){const o=16.666/i;let c=`{
`;for(let v=0;v<=1;v+=o){const y=t+(n-t)*s(v);c+=v*100+`%{${u(y,1-y)}}
`}const a=c+`100% {${u(n,1-n)}}
}`,d=`__svelte_${Hn(a)}_${l}`,f=yn(e),{stylesheet:p,rules:m}=se.get(f)||Bn(f,e);m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${a}`,p.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${i}ms linear ${r}ms 1 both`,le+=1,d}function Ut(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),r=n.length-i.length;r&&(e.style.animation=i.join(", "),le-=r,le||Wn())}function Wn(){Ne(()=>{le||(se.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&S(t)}),se.clear())})}function Kn(e,t,n,i){if(!t)return M;const r=e.getBoundingClientRect();if(t.left===r.left&&t.right===r.right&&t.top===r.top&&t.bottom===r.bottom)return M;const{delay:s=0,duration:u=300,easing:l=yt,start:o=xt()+s,end:c=o+u,tick:a=M,css:d}=n(e,{from:t,to:r},i);let f=!0,p=!1,m;function h(){d&&(m=jt(e,0,1,u,s,l,d)),s||(p=!0)}function v(){d&&Ut(e,m),f=!1}return Dt(y=>{if(!p&&y>=o&&(p=!0),p&&y>=c&&(a(1,0),v()),!f)return!1;if(p){const I=y-o,k=0+1*l(I/u);a(k,1-k)}return!0}),h(),a(0,1),v}function Yn(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,r=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,kn(e,r)}}function kn(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),r=i.transform==="none"?"":i.transform;e.style.transform=`${r} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Lt;function qt(e){Lt=e}function Re(){if(!Lt)throw new Error("Function called outside component initialization");return Lt}function Gn(e){Re().$$.on_mount.push(e)}function Vn(e){Re().$$.on_destroy.push(e)}function Xn(){const e=Re();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=bn(t,n,{cancelable:i});return r.slice().forEach(u=>{u.call(e,s)}),!s.defaultPrevented}return!0}}const Ot=[],ze=[],te=[],Je=[],Qn=Promise.resolve();let ke=!1;function Zn(){ke||(ke=!0,Qn.then(wn))}function G(e){te.push(e)}const ye=new Set;let zt=0;function wn(){const e=Lt;do{for(;zt<Ot.length;){const t=Ot[zt];zt++,qt(t),zn(t.$$)}for(qt(null),Ot.length=0,zt=0;ze.length;)ze.pop()();for(let t=0;t<te.length;t+=1){const n=te[t];ye.has(n)||(ye.add(n),n())}te.length=0}while(Ot.length);for(;Je.length;)Je.pop()();ke=!1,ye.clear(),qt(e)}function zn(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(G)}}let At;function Ae(){return At||(At=Promise.resolve(),At.then(()=>{At=null})),At}function ht(e,t,n){e.dispatchEvent(bn(`${t?"intro":"outro"}${n}`))}const ee=new Set;let it;function gt(){it={r:0,c:[],p:it}}function vt(){it.r||V(it.c),it=it.p}function R(e,t){e&&e.i&&(ee.delete(e),e.i(t))}function A(e,t,n,i){if(e&&e.o){if(ee.has(e))return;ee.add(e),it.c.push(()=>{ee.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const Oe={duration:0};function qe(e,t,n){const i={direction:"in"};let r=t(e,n,i),s=!1,u,l,o=0;function c(){u&&Ut(e,u)}function a(){const{delay:f=0,duration:p=300,easing:m=yt,tick:h=M,css:v}=r||Oe;v&&(u=jt(e,0,1,p,f,m,v,o++)),h(0,1);const y=xt()+f,I=y+p;l&&l.abort(),s=!0,G(()=>ht(e,!0,"start")),l=Dt(k=>{if(s){if(k>=I)return h(1,0),ht(e,!0,"end"),c(),s=!1;if(k>=y){const C=m((k-y)/p);h(C,1-C)}}return s})}let d=!1;return{start(){d||(d=!0,Ut(e),bt(r)?(r=r(i),Ae().then(a)):a())},invalidate(){d=!1},end(){s&&(c(),s=!1)}}}function je(e,t,n){const i={direction:"out"};let r=t(e,n,i),s=!0,u;const l=it;l.r+=1;function o(){const{delay:c=0,duration:a=300,easing:d=yt,tick:f=M,css:p}=r||Oe;p&&(u=jt(e,1,0,a,c,d,p));const m=xt()+c,h=m+a;G(()=>ht(e,!1,"start")),Dt(v=>{if(s){if(v>=h)return f(0,1),ht(e,!1,"end"),--l.r||V(l.c),!1;if(v>=m){const y=d((v-m)/a);f(1-y,y)}}return s})}return bt(r)?Ae().then(()=>{r=r(i),o()}):o(),{end(c){c&&r.tick&&r.tick(1,0),s&&(u&&Ut(e,u),s=!1)}}}function rt(e,t,n,i){const r={direction:"both"};let s=t(e,n,r),u=i?0:1,l=null,o=null,c=null;function a(){c&&Ut(e,c)}function d(p,m){const h=p.b-u;return m*=Math.abs(h),{a:u,b:p.b,d:h,duration:m,start:p.start,end:p.start+m,group:p.group}}function f(p){const{delay:m=0,duration:h=300,easing:v=yt,tick:y=M,css:I}=s||Oe,k={start:xt()+m,b:p};p||(k.group=it,it.r+=1),l||o?o=k:(I&&(a(),c=jt(e,u,p,h,m,v,I)),p&&y(0,1),l=d(k,h),G(()=>ht(e,p,"start")),Dt(C=>{if(o&&C>o.start&&(l=d(o,h),o=null,ht(e,l.b,"start"),I&&(a(),c=jt(e,u,l.b,l.duration,0,v,s.css))),l){if(C>=l.end)y(u=l.b,1-u),ht(e,l.b,"end"),o||(l.b?a():--l.group.r||V(l.group.c)),l=null;else if(C>=l.start){const E=C-l.start;u=l.a+l.d*v(E/l.duration),y(u,1-u)}}return!!(l||o)}))}return{run(p){bt(s)?Ae().then(()=>{s=s(r),f(p)}):f(p)},end(){a(),l=o=null}}}function Jn(e,t){A(e,1,1,()=>{t.delete(e.key)})}function ti(e,t){e.f(),Jn(e,t)}function ei(e,t,n,i,r,s,u,l,o,c,a,d){let f=e.length,p=s.length,m=f;const h={};for(;m--;)h[e[m].key]=m;const v=[],y=new Map,I=new Map;for(m=p;m--;){const T=d(r,s,m),U=n(T);let w=u.get(U);w?i&&w.p(T,t):(w=c(U,T),w.c()),y.set(U,v[m]=w),U in h&&I.set(U,Math.abs(m-h[U]))}const k=new Set,C=new Set;function E(T){R(T,1),T.m(l,a),u.set(T.key,T),a=T.first,p--}for(;f&&p;){const T=v[p-1],U=e[f-1],w=T.key,j=U.key;T===U?(a=T.first,f--,p--):y.has(j)?!u.has(w)||k.has(w)?E(T):C.has(j)?f--:I.get(w)>I.get(j)?(C.add(w),E(T)):(k.add(j),f--):(o(U,u),f--)}for(;f--;){const T=e[f];y.has(T.key)||o(T,u)}for(;p;)E(v[p-1]);return v}function ni(e,t){const n={},i={},r={$$scope:1};let s=e.length;for(;s--;){const u=e[s],l=t[s];if(l){for(const o in u)o in l||(i[o]=1);for(const o in l)r[o]||(n[o]=l[o],r[o]=1);e[s]=l}else for(const o in u)r[o]=1}for(const u in i)u in n||(n[u]=void 0);return n}function ii(e){return typeof e=="object"&&e!==null?e:{}}function D(e){e&&e.c()}function P(e,t,n,i){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),i||G(()=>{const u=e.$$.on_mount.map(hn).filter(bt);e.$$.on_destroy?e.$$.on_destroy.push(...u):V(u),e.$$.on_mount=[]}),s.forEach(G)}function x(e,t){const n=e.$$;n.fragment!==null&&(V(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ri(e,t){e.$$.dirty[0]===-1&&(Ot.push(e),Zn(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Z(e,t,n,i,r,s,u,l=[-1]){const o=Lt;qt(e);const c=e.$$={fragment:null,ctx:[],props:s,update:M,not_equal:r,bound:Xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:Xe(),dirty:l,skip_bound:!1,root:t.target||o.$$.root};u&&u(c.root);let a=!1;if(c.ctx=n?n(e,t.props||{},(d,f,...p)=>{const m=p.length?p[0]:f;return c.ctx&&r(c.ctx[d],c.ctx[d]=m)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](m),a&&ri(e,d)),f}):[],c.update(),a=!0,V(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const d=Dn(t.target);c.fragment&&c.fragment.l(d),d.forEach(S)}else c.fragment&&c.fragment.c();t.intro&&R(e.$$.fragment),P(e,t.target,t.anchor,t.customElement),wn()}qt(o)}class z{$destroy(){x(this,1),this.$destroy=M}$on(t,n){if(!bt(n))return M;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!jn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const $n=20,si=50,li=4,oi=4,ci=10,ui=2,fi=2,tn=200,we=500,En=2,ai=1e3,di=2,pi=7,mi=9,_i=2,hi=2,en=200,nn=10,Cn=200,gi=.1,vi=5,yi=100;function W(e,t){return e??(e=0),t??(t=0),Math.floor(Math.random()*(e-t))+t}function ot(e,t){setTimeout(t,e)}function oe(e,t){t??(t=gi);let n=Math.ceil(Math.abs(e*t));return W(e+n,e-n)}const St=[];function Ft(e,t=M){let n;const i=new Set;function r(l){if(X(e,l)&&(e=l,n)){const o=!St.length;for(const c of i)c[1](),St.push(c,e);if(o){for(let c=0;c<St.length;c+=2)St[c][0](St[c+1]);St.length=0}}}function s(l){r(l(e))}function u(l,o=M){const c=[l,o];return i.add(c),i.size===1&&(n=t(r)||M),l(e),()=>{i.delete(c),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:u}}function bi(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function ce(e){const t=e-1;return t*t*t+1}function rn(e,{delay:t=0,duration:n=400,easing:i=bi,amount:r=5,opacity:s=0}={}){const u=getComputedStyle(e),l=+u.opacity,o=u.filter==="none"?"":u.filter,c=l*(1-s);return{delay:t,duration:n,easing:i,css:(a,d)=>`opacity: ${l-c*d}; filter: ${o} blur(${d*r}px);`}}function Mn(e,{delay:t=0,duration:n=400,easing:i=yt}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*r}`}}function fe(e,{delay:t=0,duration:n=400,easing:i=ce,x:r=0,y:s=0,opacity:u=0}={}){const l=getComputedStyle(e),o=+l.opacity,c=l.transform==="none"?"":l.transform,a=o*(1-u);return{delay:t,duration:n,easing:i,css:(d,f)=>`
			transform: ${c} translate(${(1-d)*r}px, ${(1-d)*s}px);
			opacity: ${o-a*f}`}}const et={TITLE:0,MAP:1,MENU:2,ENC:3,CITY:4},wt=Ft(et.TITLE);function ct(){wt.set(et.MAP)}function Sn(){wt.set(et.MENU)}function ki(){wt.set(et.ENC)}function ae(){wt.set(et.TITLE)}function wi(){wt.set(et.CITY)}function $i(e,t){wt.set(void 0),ot(e,t)}function st(e){return Mn(e,{duration:Cn})}let Jt;const Ei=new Uint8Array(16);function Ci(){if(!Jt&&(Jt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Jt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jt(Ei)}const L=[];for(let e=0;e<256;++e)L.push((e+256).toString(16).slice(1));function Mi(e,t=0){return(L[e[t+0]]+L[e[t+1]]+L[e[t+2]]+L[e[t+3]]+"-"+L[e[t+4]]+L[e[t+5]]+"-"+L[e[t+6]]+L[e[t+7]]+"-"+L[e[t+8]]+L[e[t+9]]+"-"+L[e[t+10]]+L[e[t+11]]+L[e[t+12]]+L[e[t+13]]+L[e[t+14]]+L[e[t+15]]).toLowerCase()}const Si=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sn={randomUUID:Si};function Ti(e,t,n){if(sn.randomUUID&&!t&&!e)return sn.randomUUID();e=e||{};const i=e.random||(e.rng||Ci)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let r=0;r<16;++r)t[n+r]=i[r];return t}return Mi(i)}function Tn(){let e="",t=$n,n=W(t);t-=n;let i=W(t);t-=i;let r=t;return n+=si,i+=li,r+=oi,{name:e,hp:n,maxhp:n,str:i,dex:r,steps:0,gp:0}}const F=Ft(Tn());function Ni(){F.set(Tn())}function Ii(e){let t,n,i,r,s,u,l,o,c,a,d,f,p,m,h;return{c(){t=g("div"),n=g("div"),i=g("h1"),i.textContent="Relic",r=$(),s=g("p"),s.textContent="by elyktc",u=$(),l=g("div"),o=g("input"),c=$(),a=g("div"),d=g("button"),d.textContent="Start",nt(i,"margin-right","50px"),nt(s,"margin-left","100px"),b(o,"maxlength","8"),b(o,"class","svelte-evi9wy"),nt(o,"display","none"),b(l,"class","row"),b(n,"class","view col svelte-evi9wy"),b(a,"class","ctrls")},m(v,y){N(v,t,y),_(t,n),_(n,i),_(n,r),_(n,s),_(n,u),_(n,l),_(l,o),Qe(o,e[0].name),_(t,c),_(t,a),_(a,d),p=!0,m||(h=[O(o,"input",e[2]),kt(e[1].call(null,d)),O(d,"click",ct)],m=!0)},p(v,[y]){y&1&&o.value!==v[0].name&&Qe(o,v[0].name)},i(v){p||(G(()=>{f||(f=rt(t,st,{},!0)),f.run(1)}),p=!0)},o(v){f||(f=rt(t,st,{},!1)),f.run(0),p=!1},d(v){v&&S(t),v&&f&&f.end(),m=!1,V(h)}}}function Ri(e,t,n){let i;B(e,F,u=>n(0,i=u));function r(u){Ni(),u.focus()}function s(){i.name=this.value,F.set(i)}return[i,r,s]}class Ai extends z{constructor(t){super(),Z(this,t,Ri,Ii,X,{})}}function Oi(e){let t,n,i,r,s,u,l,o,c,a,d,f,p,m,h,v,y,I,k,C,E,T,U;return{c(){t=g("div"),n=g("div"),i=g("button"),i.textContent="NW",r=$(),s=g("button"),s.textContent="N",u=$(),l=g("button"),l.textContent="NE",o=$(),c=g("div"),a=g("button"),a.textContent="W",d=$(),f=g("button"),f.textContent="Menu",p=$(),m=g("button"),m.textContent="E",h=$(),v=g("div"),y=g("button"),y.textContent="SW",I=$(),k=g("button"),k.textContent="S",C=$(),E=g("button"),E.textContent="SE",b(t,"class","ctrls")},m(w,j){N(w,t,j),_(t,n),_(n,i),_(n,r),_(n,s),_(n,u),_(n,l),_(t,o),_(t,c),_(c,a),_(c,d),_(c,f),_(c,p),_(c,m),_(t,h),_(t,v),_(v,y),_(v,I),_(v,k),_(v,C),_(v,E),T||(U=[O(window,"keydown",e[8]),O(i,"click",e[0]),O(s,"click",e[1]),O(l,"click",e[2]),O(a,"click",e[3]),O(f,"click",Sn),O(m,"click",e[4]),O(y,"click",e[5]),O(k,"click",e[6]),O(E,"click",e[7])],T=!0)},p:M,i:M,o:M,d(w){w&&S(t),T=!1,V(U)}}}function qi(e){const t=Xn(),n=()=>t("move",{x:-1,y:-1}),i=()=>t("move",{x:-1,y:0}),r=()=>t("move",{x:-1,y:1}),s=()=>t("move",{x:0,y:-1}),u=()=>t("move",{x:0,y:1}),l=()=>t("move",{x:1,y:-1}),o=()=>t("move",{x:1,y:0}),c=()=>t("move",{x:1,y:1});function a(d){switch(d.key){case"x":Sn();break;case"q":n();break;case"w":i();break;case"e":r();break;case"a":s();break;case"d":u();break;case"z":l();break;case"s":o();break;case"c":c();break}}return[n,i,r,s,u,l,o,c,a]}class ji extends z{constructor(t){super(),Z(this,t,qi,Oi,X,{})}}let q,K,Y,de,pe,Nt=!0,Ue=mi,ln=_i,$e=0,Le=0;const Ui="u",Pe="f",ne="p",xe="t",Nn="w",ue="c";function In(e,t,n){e=Math.max(e,1),q=Nt?[]:q??[];let i=t??Math.floor(e/2),r=n??Math.floor(e/2);K=i,Y=r,Nt&&(de=K,pe=Y,$e=0,Le=0),Ee(i,r,Ce.CITY);for(let s=1;s<e;s++){let u=s%2==0?s:-s;i+=u,r+=u,Ee(i,r)}q=Rn(!0,e,t,n)}function Li(e,t,n,i){if(!e)return e;i??(i=Ue);let r=Math.floor(i/2);t??(t=r),n??(n=r);let s=[];for(let u=0;u<i;u++)for(let l=0;l<i;l++){let o=t-r+u,c=n-r+l,a=(e[o]&&e[o][c])??Pe;s[u]??(s[u]=[]),s[u][l]=a}return s[r][r]=Ui,s}function Pi(){let e=An();if(K<e&&(q.splice(0,0,[]),de++,K=e),Y<e){let t=On();for(let n=0;n<t;n++)q[n].splice(0,0,void 0);pe++,Y=e}}function xi(e){return[...e.map(t=>[...t])]}function Rn(e,t,n,i){var d;if(!q)return q;t=t??Ue,n=n??K,i=i??Y;let r=xi(q),s=On(),u=Fi(),l=Math.min(t??s,s),o=Math.min(t??u,u),c=Math.max((n??0)-Math.floor(l/2),0),a=Math.max((i??0)-Math.floor(o/2),0);for(let f=0;f<l;f++)for(let p=0;p<o;p++){let m=c+f,h=a+p;r[m]??(r[m]=[]);let v=e?me(m,h):Pe;(d=r[m])[h]??(d[h]=v)}return r}function Ee(e,t,n){var i;return e??(e=K),t??(t=Y),q??(q=[]),q[e]??(q[e]=[]),(i=q[e])[t]??(i[t]=n??me(e,t)),n}function me(e,t){if(e??(e=K),t??(t=Y),q&&q[e]&&q[e][t])return q[e][t];let n;if(W(en)==1&&W(en)<$e++)n=ue,$e=0;else{let i=Di(e,t),r=W(i.length+1);if(r>=i.length){let s=[ne,xe];r=W(s.length+hi),n=r>=s.length?ne:s[r]}else n=i[r]}return Nt&&(n==ue||n==Nn)&&(n=ne),Nt||Le++,n}function Di(e,t){let n=[];for(let i=e-1;i<=e+1;i++)for(let r=t-1;r<=t+1;r++)q[i]&&q[i][r]&&q[i][r]!=ue&&n.push(q[i][r]);return n}function An(){return me()==xe?Math.floor(ln/2):ln}function On(e){return e??(e=q??[]),e.length}function Fi(e){e??(e=q??[]);let t=e.map(n=>n.length).sort((n,i)=>n-i);return t[t.length-1]}function Hi(e){if(K+=e.x,Y+=e.y,Pi(),Ee()==Nn)return K-=e.x,Y-=e.y,!1;{let n=An();n>0&&In(n*2+1,K,Y)}return!0}function Bi(){let e=Rn(!1);return Li(e,K,Y,Ue)}function Wi(){let e=Math.abs(K-de),t=Math.abs(Y-pe);return Math.ceil(Math.hypot(e,t))}function Ki(){return Le}function Yi(){return{x:K,y:Y,abs:{x:K-de,y:Y-pe},terrain:me(),distance:Wi()}}function Gi(){Nt=!0,In(pi),Nt=!1}const Ce={FOG:Pe,PLAIN:ne,FOREST:xe,CITY:ue},pt={miniMap:Bi,location:Yi,move:Hi,getExplored:Ki};let ie=new Map;function Vi(){let e=Ti().substring(0,8),t=W(vi,yi);return{name:e,innCost:t}}function Xi(e,t){let n=`${e}.${t}`;return ie.has(n)||ie.set(n,Vi()),ie.get(n)}function Qi(){ie.clear()}function Zi(e){let t,n,i,r,s,u,l,o;return r=new ji({}),r.$on("move",e[3]),{c(){t=g("div"),n=g("div"),i=$(),D(r.$$.fragment),b(n,"class","view field svelte-ajca67")},m(c,a){N(c,t,a),_(t,n),n.innerHTML=e[0],_(t,i),P(r,t,null),u=!0,l||(o=kt(e[2].call(null,n)),l=!0)},p(c,[a]){(!u||a&1)&&(n.innerHTML=c[0])},i(c){u||(R(r.$$.fragment,c),G(()=>{s||(s=rt(t,st,{},!0)),s.run(1)}),u=!0)},o(c){A(r.$$.fragment,c),s||(s=rt(t,st,{},!1)),s.run(0),u=!1},d(c){c&&S(t),x(r),c&&s&&s.end(),l=!1,o()}}}function zi(e){return`<span class="icon map-${e}"></span>`}function Ji(e,t,n){let i;B(e,F,a=>n(4,i=a));function r(a){n(0,o=a.map(d=>d.map(zi).join("")).join("<br/>"))}function s(){return pt.location().terrain==Ce.FOREST?Math.ceil(nn/2):nn}function u(a){pt.move(a)&&(_t(F,i.steps++,i),r(pt.miniMap()),pt.location().terrain==Ce.CITY?wi():W(s())==1&&ki())}function l(a){i.steps||(Gi(),Qi()),r(pt.miniMap())}let o="";return[o,u,l,a=>u(a.detail)]}let tr=class extends z{constructor(t){super(),Z(this,t,Ji,Zi,X,{})}};function er(e){let t,n,i,r=e[0].name+"",s,u,l,o,c,a,d=e[0].hp+"",f,p,m=e[0].maxhp+"",h,v,y,I,k,C,E=e[0].str+"",T,U,w,j,$t,ut,Ht=e[0].dex+"",_e,De,dt,Bt,Fe,Wt,Kt=e[0].gp+"",he,He,Et,Yt,Be,Gt,Vt=new Intl.NumberFormat().format(e[0].steps)+"",ge,We,Ct,Xt,Ke,Qt,Ye,Mt,Rt,Ge,Zt,ft,tt,ve,Ve;return{c(){t=g("div"),n=g("div"),i=g("h1"),s=Q(r),u=$(),l=g("div"),o=g("div"),o.textContent="Health",c=$(),a=g("div"),f=Q(d),p=Q(" / "),h=Q(m),v=$(),y=g("div"),I=g("div"),I.textContent="Strength",k=$(),C=g("div"),T=Q(E),U=$(),w=g("div"),j=g("div"),j.textContent="Dexterity",$t=$(),ut=g("div"),_e=Q(Ht),De=$(),dt=g("div"),Bt=g("div"),Bt.textContent="Gold",Fe=$(),Wt=g("div"),he=Q(Kt),He=$(),Et=g("div"),Yt=g("div"),Yt.textContent="Steps",Be=$(),Gt=g("div"),ge=Q(Vt),We=$(),Ct=g("div"),Xt=g("div"),Xt.textContent="Explored",Ke=$(),Qt=g("div"),Qt.textContent=`${new Intl.NumberFormat().format(pt.getExplored())}`,Ye=$(),Mt=g("div"),Rt=g("button"),Rt.textContent="Reset",Ge=$(),Zt=g("button"),Zt.textContent="Back",nt(i,"display","none"),b(o,"class","col label svelte-qam9kv"),b(a,"class","col value svelte-qam9kv"),b(l,"class","row svelte-qam9kv"),b(I,"class","col label svelte-qam9kv"),b(C,"class","col value svelte-qam9kv"),b(y,"class","row svelte-qam9kv"),b(j,"class","col label svelte-qam9kv"),b(ut,"class","col value svelte-qam9kv"),b(w,"class","row svelte-qam9kv"),b(Bt,"class","col label svelte-qam9kv"),b(Wt,"class","col value svelte-qam9kv"),b(dt,"class","row svelte-qam9kv"),nt(dt,"margin","10px 0"),b(Yt,"class","col label svelte-qam9kv"),b(Gt,"class","col value svelte-qam9kv"),b(Et,"class","row svelte-qam9kv"),b(Xt,"class","col label svelte-qam9kv"),b(Qt,"class","col value svelte-qam9kv"),b(Ct,"class","row svelte-qam9kv"),b(n,"class","view col svelte-qam9kv"),nt(Rt,"background-color","maroon"),b(Mt,"class","ctrls")},m(H,lt){N(H,t,lt),_(t,n),_(n,i),_(i,s),_(n,u),_(n,l),_(l,o),_(l,c),_(l,a),_(a,f),_(a,p),_(a,h),_(n,v),_(n,y),_(y,I),_(y,k),_(y,C),_(C,T),_(n,U),_(n,w),_(w,j),_(w,$t),_(w,ut),_(ut,_e),_(n,De),_(n,dt),_(dt,Bt),_(dt,Fe),_(dt,Wt),_(Wt,he),_(n,He),_(n,Et),_(Et,Yt),_(Et,Be),_(Et,Gt),_(Gt,ge),_(n,We),_(n,Ct),_(Ct,Xt),_(Ct,Ke),_(Ct,Qt),_(t,Ye),_(t,Mt),_(Mt,Rt),_(Mt,Ge),_(Mt,Zt),tt=!0,ve||(Ve=[O(window,"keydown",e[1]),O(Rt,"click",ae),O(Zt,"click",ct)],ve=!0)},p(H,[lt]){(!tt||lt&1)&&r!==(r=H[0].name+"")&&at(s,r),(!tt||lt&1)&&d!==(d=H[0].hp+"")&&at(f,d),(!tt||lt&1)&&m!==(m=H[0].maxhp+"")&&at(h,m),(!tt||lt&1)&&E!==(E=H[0].str+"")&&at(T,E),(!tt||lt&1)&&Ht!==(Ht=H[0].dex+"")&&at(_e,Ht),(!tt||lt&1)&&Kt!==(Kt=H[0].gp+"")&&at(he,Kt),(!tt||lt&1)&&Vt!==(Vt=new Intl.NumberFormat().format(H[0].steps)+"")&&at(ge,Vt)},i(H){tt||(G(()=>{ft||(ft=rt(t,st,{},!0)),ft.run(1)}),tt=!0)},o(H){ft||(ft=rt(t,st,{},!1)),ft.run(0),tt=!1},d(H){H&&S(t),H&&ft&&ft.end(),ve=!1,V(Ve)}}}function nr(e,t,n){let i;B(e,F,s=>n(0,i=s));function r(s){switch(s.key){case"q":ct();break;case"Escape":ae();break}}return[i,r]}class ir extends z{constructor(t){super(),Z(this,t,nr,er,X,{})}}function rr(e,{from:t,to:n},i={}){const r=getComputedStyle(e),s=r.transform==="none"?"":r.transform,[u,l]=r.transformOrigin.split(" ").map(parseFloat),o=t.left+t.width*u/n.width-(n.left+u),c=t.top+t.height*l/n.height-(n.top+l),{delay:a=0,duration:d=p=>Math.sqrt(p)*120,easing:f=ce}=i;return{delay:a,duration:bt(d)?d(Math.sqrt(o*o+c*c)):d,easing:f,css:(p,m)=>{const h=m*o,v=m*c,y=p+m*t.width/n.width,I=p+m*t.height/n.height;return`transform: ${s} translate(${h}px, ${v}px) scale(${y}, ${I});`}}}const sr={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},lr=()=>{const{subscribe:e,update:t}=Ft([]);let n=0;const i={},r=c=>c instanceof Object;return{subscribe:e,push:(c,a={})=>{const d={target:"default",...r(c)?c:{...a,msg:c}},f=i[d.target]||{},p={...sr,...f,...d,theme:{...f.theme,...d.theme},classes:[...f.classes||[],...d.classes||[]],id:++n};return t(m=>p.reversed?[...m,p]:[p,...m]),n},pop:c=>{t(a=>{if(!a.length||c===0)return[];if(r(c))return a.filter(f=>c(f));const d=c||Math.max(...a.map(f=>f.id));return a.filter(f=>f.id!==d)})},set:(c,a={})=>{const d=r(c)?{...c}:{...a,id:c};t(f=>{const p=f.findIndex(m=>m.id===d.id);return p>-1&&(f[p]={...f[p],...d}),f})},_init:(c="default",a={})=>(i[c]=a,i)}},It=lr();function on(e){return Object.prototype.toString.call(e)==="[object Date]"}function Me(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((r,s)=>Me(e[s],r));return r=>i.map(s=>s(r))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(on(e)&&on(t)){e=e.getTime(),t=t.getTime();const s=t-e;return u=>new Date(e+u*s)}const i=Object.keys(t),r={};return i.forEach(s=>{r[s]=Me(e[s],t[s])}),s=>{const u={};return i.forEach(l=>{u[l]=r[l](s)}),u}}if(n==="number"){const i=t-e;return r=>e+r*i}throw new Error(`Cannot interpolate ${n} values`)}function Se(e,t={}){const n=Ft(e);let i,r=e;function s(u,l){if(e==null)return n.set(e=u),Promise.resolve();r=u;let o=i,c=!1,{delay:a=0,duration:d=400,easing:f=yt,interpolate:p=Me}=be(be({},t),l);if(d===0)return o&&(o.abort(),o=null),n.set(e=r),Promise.resolve();const m=xt()+a;let h;return i=Dt(v=>{if(v<m)return!0;c||(h=p(e,u),typeof d=="function"&&(d=d(e,u)),c=!0),o&&(o.abort(),o=null);const y=v-m;return y>d?(n.set(e=u),!1):(n.set(e=h(f(y/d))),!0)}),i.promise}return{set:s,update:(u,l)=>s(u(r,e),l),subscribe:n.subscribe}}function or(e){let t,n=e[0].msg+"",i;return{c(){t=new Fn(!1),i=Ie(),t.a=i},m(r,s){t.m(n,r,s),N(r,i,s)},p(r,s){s&1&&n!==(n=r[0].msg+"")&&t.p(n)},i:M,o:M,d(r){r&&S(i),r&&t.d()}}}function cr(e){let t,n,i;const r=[e[2]];var s=e[0].component.src;function u(l){let o={};for(let c=0;c<r.length;c+=1)o=be(o,r[c]);return{props:o}}return s&&(t=Ze(s,u())),{c(){t&&D(t.$$.fragment),n=Ie()},m(l,o){t&&P(t,l,o),N(l,n,o),i=!0},p(l,o){const c=o&4?ni(r,[ii(l[2])]):{};if(s!==(s=l[0].component.src)){if(t){gt();const a=t;A(a.$$.fragment,1,0,()=>{x(a,1)}),vt()}s?(t=Ze(s,u()),D(t.$$.fragment),R(t.$$.fragment,1),P(t,n.parentNode,n)):t=null}else s&&t.$set(c)},i(l){i||(t&&R(t.$$.fragment,l),i=!0)},o(l){t&&A(t.$$.fragment,l),i=!1},d(l){l&&S(n),t&&x(t,l)}}}function cn(e){let t,n,i;return{c(){t=g("div"),b(t,"class","_toastBtn pe svelte-l65oht"),b(t,"role","button"),b(t,"tabindex","0")},m(r,s){N(r,t,s),n||(i=[O(t,"click",e[4]),O(t,"keydown",e[8])],n=!0)},p:M,d(r){r&&S(t),n=!1,V(i)}}}function ur(e){let t,n,i,r,s,u,l,o,c,a;const d=[cr,or],f=[];function p(h,v){return h[0].component?0:1}i=p(e),r=f[i]=d[i](e);let m=e[0].dismissable&&cn(e);return{c(){t=g("div"),n=g("div"),r.c(),s=$(),m&&m.c(),u=$(),l=g("progress"),b(n,"role","status"),b(n,"class","_toastMsg svelte-l65oht"),J(n,"pe",e[0].component),b(l,"class","_toastBar svelte-l65oht"),l.value=e[1],b(t,"class","_toastItem svelte-l65oht"),J(t,"pe",e[0].pausable)},m(h,v){N(h,t,v),_(t,n),f[i].m(n,null),_(t,s),m&&m.m(t,null),_(t,u),_(t,l),o=!0,c||(a=[O(t,"mouseenter",e[9]),O(t,"mouseleave",e[6])],c=!0)},p(h,[v]){let y=i;i=p(h),i===y?f[i].p(h,v):(gt(),A(f[y],1,1,()=>{f[y]=null}),vt(),r=f[i],r?r.p(h,v):(r=f[i]=d[i](h),r.c()),R(r,1),r.m(n,null)),(!o||v&1)&&J(n,"pe",h[0].component),h[0].dismissable?m?m.p(h,v):(m=cn(h),m.c(),m.m(t,u)):m&&(m.d(1),m=null),(!o||v&2)&&(l.value=h[1]),(!o||v&1)&&J(t,"pe",h[0].pausable)},i(h){o||(R(r),o=!0)},o(h){A(r),o=!1},d(h){h&&S(t),f[i].d(),m&&m.d(),c=!1,V(a)}}}function fr(e,t,n){let i,{item:r}=t;const s=Se(r.initial,{duration:r.duration,easing:yt});B(e,s,k=>n(1,i=k));const u=()=>It.pop(r.id),l=()=>{(i===1||i===0)&&u()};let o=r.initial,c=o,a=!1;const d=()=>{!a&&i!==o&&(s.set(i,{duration:0}),a=!0)},f=()=>{if(a){const k=r.duration,C=k-k*((i-c)/(o-c));s.set(o,{duration:C}).then(l),a=!1}};let p={};const m=(k,C="undefined")=>typeof k===C;let h;Gn((k=document)=>{if(m(k.hidden))return;const C=()=>k.hidden?d():f(),E="visibilitychange";k.addEventListener(E,C),h=()=>k.removeEventListener(E,C),C()}),Vn(()=>{m(r.onpop,"function")&&r.onpop(r.id),h&&h()});const y=k=>{k instanceof KeyboardEvent&&["Enter"," "].includes(k.key)&&u()},I=()=>{r.pausable&&d()};return e.$$set=k=>{"item"in k&&n(0,r=k.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(m(r.progress)||n(0,r.next=r.progress,r)),e.$$.dirty&131&&o!==r.next&&(n(7,o=r.next),c=i,a=!1,s.set(o).then(l)),e.$$.dirty&1&&r.component){const{props:k={},sendIdTo:C}=r.component;n(2,p={...k,...C&&{[C]:r.id}})}},[r,i,p,s,u,d,f,o,y,I]}class ar extends z{constructor(t){super(),Z(this,t,fr,ur,X,{item:0})}}function un(e,t,n){const i=e.slice();return i[5]=t[n],i}function fn(e,t){let n,i,r,s,u,l,o,c,a=M,d;return i=new ar({props:{item:t[5]}}),{key:e,first:null,c(){n=g("li"),D(i.$$.fragment),r=$(),b(n,"class",s=re(t[5].classes.join(" "))+" svelte-yh90az"),b(n,"style",u=t[1](t[5].theme)),this.first=n},m(f,p){N(f,n,p),P(i,n,null),_(n,r),d=!0},p(f,p){t=f;const m={};p&1&&(m.item=t[5]),i.$set(m),(!d||p&1&&s!==(s=re(t[5].classes.join(" "))+" svelte-yh90az"))&&b(n,"class",s),(!d||p&1&&u!==(u=t[1](t[5].theme)))&&b(n,"style",u)},r(){c=n.getBoundingClientRect()},f(){Yn(n),a(),kn(n,c)},a(){a(),a=Kn(n,c,rr,{duration:200})},i(f){d||(R(i.$$.fragment,f),G(()=>{o&&o.end(1),l=qe(n,fe,t[5].intro),l.start()}),d=!0)},o(f){A(i.$$.fragment,f),l&&l.invalidate(),o=je(n,Mn,{}),d=!1},d(f){f&&S(n),x(i),f&&o&&o.end()}}}function dr(e){let t,n=[],i=new Map,r,s=e[0];const u=l=>l[5].id;for(let l=0;l<s.length;l+=1){let o=un(e,s,l),c=u(o);i.set(c,n[l]=fn(c,o))}return{c(){t=g("ul");for(let l=0;l<n.length;l+=1)n[l].c();b(t,"class","_toastContainer svelte-yh90az")},m(l,o){N(l,t,o);for(let c=0;c<n.length;c+=1)n[c].m(t,null);r=!0},p(l,[o]){if(o&3){s=l[0],gt();for(let c=0;c<n.length;c+=1)n[c].r();n=ei(n,o,u,1,l,s,i,t,ti,fn,null,un);for(let c=0;c<n.length;c+=1)n[c].a();vt()}},i(l){if(!r){for(let o=0;o<s.length;o+=1)R(n[o]);r=!0}},o(l){for(let o=0;o<n.length;o+=1)A(n[o]);r=!1},d(l){l&&S(t);for(let o=0;o<n.length;o+=1)n[o].d()}}}function pr(e,t,n){let i;B(e,It,o=>n(4,i=o));let{options:r={}}=t,{target:s="default"}=t,u;const l=o=>Object.keys(o).reduce((c,a)=>`${c}${a}:${o[a]};`,"");return e.$$set=o=>{"options"in o&&n(2,r=o.options),"target"in o&&n(3,s=o.target)},e.$$.update=()=>{e.$$.dirty&12&&It._init(s,r),e.$$.dirty&24&&n(0,u=i.filter(o=>o.target===s))},[u,l,r,s,i]}class mr extends z{constructor(t){super(),Z(this,t,pr,dr,X,{options:2,target:3})}}function _r(e){let t,n,i,r,s,u;return n=new mr({props:{options:e[2],target:e[1]}}),{c(){t=g("div"),D(n.$$.fragment),b(t,"class",i=re(`toast-wrapper-${e[0]}`)+" svelte-83kuhx")},m(l,o){N(l,t,o),P(n,t,null),r=!0,s||(u=kt(e[3].call(null,t)),s=!0)},p(l,[o]){const c={};o&4&&(c.options=l[2]),o&2&&(c.target=l[1]),n.$set(c),(!r||o&1&&i!==(i=re(`toast-wrapper-${l[0]}`)+" svelte-83kuhx"))&&b(t,"class",i)},i(l){r||(R(n.$$.fragment,l),r=!0)},o(l){A(n.$$.fragment,l),r=!1},d(l){l&&S(t),x(n),s=!1,u()}}}function hr(e,t,n){const i={duration:1e3,initial:1,next:0,pausable:!0,dismissable:!1,reversed:!1,intro:{x:0},theme:{},classes:[]},r={duration:500,initial:1,next:0,pausable:!1,dismissable:!1,reversed:!0,intro:{y:20,duration:100},theme:{},classes:[]};let s;function u(c){l==1?n(2,s=i):l==2&&n(2,s=r)}let{type:l=1}=t,{target:o=void 0}=t;return e.$$set=c=>{"type"in c&&n(0,l=c.type),"target"in c&&n(1,o=c.target)},[l,o,s,u]}class Te extends z{constructor(t){super(),Z(this,t,hr,_r,X,{type:0,target:1})}}function qn(){let e="",t=$n,n=W(t);t-=n;let i=W(t);t-=i;let r=t;n+=ci,i+=ui,r+=fi;let s=n,u=Math.ceil(oe(s+i)/2);return{name:e,hp:n,maxhp:s,str:i,dex:r,gp:u}}const Pt=Ft(qn());function gr(){Pt.set(qn())}function vr(e){let t;return{c(){t=g("div")},m(n,i){N(n,t,i)},p:M,i:M,o:M,d(n){n&&S(t)}}}function yr(e){let t,n,i,r;return{c(){t=g("span"),b(t,"class","icon map-u svelte-btrsmh"),J(t,"rejoice",e[3])},m(s,u){N(s,t,u),r=!0},p(s,u){e=s,(!r||u&8)&&J(t,"rejoice",e[3])},i(s){r||(G(()=>{i&&i.end(1),n=qe(t,fe,e[1]),n.start()}),r=!0)},o(s){n&&n.invalidate(),i=je(t,e[5],{}),r=!1},d(s){s&&S(t),s&&i&&i.end()}}}function br(e){let t;return{c(){t=g("div")},m(n,i){N(n,t,i)},p:M,i:M,o:M,d(n){n&&S(t)}}}function kr(e){let t,n,i,r;return{c(){t=g("span"),b(t,"class","icon dragon svelte-btrsmh"),J(t,"rejoice",e[2])},m(s,u){N(s,t,u),r=!0},p(s,u){e=s,(!r||u&4)&&J(t,"rejoice",e[2])},i(s){r||(G(()=>{i&&i.end(1),n=qe(t,fe,e[4]),n.start()}),r=!0)},o(s){n&&n.invalidate(),i=je(t,e[6],{}),r=!1},d(s){s&&S(t),s&&i&&i.end()}}}function wr(e){let t,n,i,r,s,u,l,o,c,a,d,f,p,m,h,v,y;const I=[yr,vr],k=[];function C(w,j){return!w[2]&&!w[0]?0:1}r=C(e),s=k[r]=I[r](e),o=new Te({props:{target:"user",type:2}}),f=new Te({props:{target:"enc",type:2}});const E=[kr,br],T=[];function U(w,j){return w[3]?1:0}return h=U(e),v=T[h]=E[h](e),{c(){t=g("div"),n=g("div"),i=g("div"),s.c(),u=$(),l=g("div"),D(o.$$.fragment),c=$(),a=g("div"),d=g("div"),D(f.$$.fragment),p=$(),m=g("div"),v.c(),b(i,"class","col user img svelte-btrsmh"),b(l,"class","col toast"),b(n,"class","row"),b(d,"class","col toast"),b(m,"class","col enc img svelte-btrsmh"),b(a,"class","row"),b(t,"class","row imgs svelte-btrsmh")},m(w,j){N(w,t,j),_(t,n),_(n,i),k[r].m(i,null),_(n,u),_(n,l),P(o,l,null),_(t,c),_(t,a),_(a,d),P(f,d,null),_(a,p),_(a,m),T[h].m(m,null),y=!0},p(w,[j]){let $t=r;r=C(w),r===$t?k[r].p(w,j):(gt(),A(k[$t],1,1,()=>{k[$t]=null}),vt(),s=k[r],s?s.p(w,j):(s=k[r]=I[r](w),s.c()),R(s,1),s.m(i,null));let ut=h;h=U(w),h===ut?T[h].p(w,j):(gt(),A(T[ut],1,1,()=>{T[ut]=null}),vt(),v=T[h],v?v.p(w,j):(v=T[h]=E[h](w),v.c()),R(v,1),v.m(m,null))},i(w){y||(R(s),R(o.$$.fragment,w),R(f.$$.fragment,w),R(v),y=!0)},o(w){A(s),A(o.$$.fragment,w),A(f.$$.fragment,w),A(v),y=!1},d(w){w&&S(t),k[r].d(),x(o),x(f),T[h].d()}}}function $r(e,t,n){let i,r;B(e,Pt,p=>n(7,i=p)),B(e,F,p=>n(8,r=p));const s={x:40,duration:200},u={x:-40,duration:200},l={amount:40,duration:we};function o(p){return a?rn(p,l):(d||n(1,s.x*=-1,s),fe(p,s))}function c(p){return d?rn(p,l):void 0}let a,d,{ran:f}=t;return e.$$set=p=>{"ran"in p&&n(0,f=p.ran)},e.$$.update=()=>{e.$$.dirty&256&&n(2,a=r.hp<=0),e.$$.dirty&128&&n(3,d=i.hp<=0)},[f,s,a,d,u,o,c,i,r]}class Er extends z{constructor(t){super(),Z(this,t,$r,wr,X,{ran:0})}}function Cr(e){let t;return{c(){t=g("div")},m(n,i){N(n,t,i)},p:M,d(n){n&&S(t)}}}function Mr(e){let t;return{c(){t=g("progress"),t.value=e[3],b(t,"class","svelte-1xfyygy")},m(n,i){N(n,t,i)},p(n,i){i&8&&(t.value=n[3])},d(n){n&&S(t)}}}function Sr(e){let t;return{c(){t=g("div")},m(n,i){N(n,t,i)},p:M,d(n){n&&S(t)}}}function Tr(e){let t;return{c(){t=g("progress"),t.value=e[4],b(t,"class","svelte-1xfyygy")},m(n,i){N(n,t,i)},p(n,i){i&16&&(t.value=n[4])},d(n){n&&S(t)}}}function Nr(e){let t,n,i,r;function s(d,f){return d[2].hp>0&&!d[0]?Mr:Cr}let u=s(e),l=u(e);function o(d,f){return d[1].hp>0?Tr:Sr}let c=o(e),a=c(e);return{c(){t=g("div"),n=g("div"),l.c(),i=$(),r=g("div"),a.c(),b(n,"class","col user"),b(r,"class","col enc"),b(t,"class","row info svelte-1xfyygy")},m(d,f){N(d,t,f),_(t,n),l.m(n,null),_(t,i),_(t,r),a.m(r,null)},p(d,[f]){u===(u=s(d))&&l?l.p(d,f):(l.d(1),l=u(d),l&&(l.c(),l.m(n,null))),c===(c=o(d))&&a?a.p(d,f):(a.d(1),a=c(d),a&&(a.c(),a.m(r,null)))},i:M,o:M,d(d){d&&S(t),l.d(),a.d()}}}function Ir(e,t,n){let i,r,s,u;B(e,Pt,a=>n(1,i=a)),B(e,F,a=>n(2,r=a));const l=Se(0,{duration:tn,easing:ce});B(e,l,a=>n(3,s=a));const o=Se(0,{duration:tn,easing:ce});B(e,o,a=>n(4,u=a));let{ran:c}=t;return e.$$set=a=>{"ran"in a&&n(0,c=a.ran)},e.$$.update=()=>{e.$$.dirty&4&&r.hp&&l.set(r.hp/r.maxhp),e.$$.dirty&2&&i.hp&&o.set(i.hp/i.maxhp)},[c,i,r,s,u,l,o]}class Rr extends z{constructor(t){super(),Z(this,t,Ir,Nr,X,{ran:0})}}function an(e){let t,n,i,r,s,u,l,o;return{c(){t=g("div"),n=g("div"),i=g("div"),r=$(),s=g("div"),u=g("div"),b(i,"class","circle svelte-usw2cb"),nt(i,"transform",`rotate(${Math.min(e[2],180)}deg)`),b(n,"class","wrapper wrapper1 svelte-usw2cb"),b(u,"class","circle svelte-usw2cb"),J(u,"hidden",e[1]<=50),nt(u,"transform",`rotate(${e[2]}deg)`),b(s,"class","wrapper wrapper2 svelte-usw2cb"),b(t,"class","progress-bar svelte-usw2cb"),J(t,"hidden",e[1]>=100)},m(c,a){N(c,t,a),_(t,n),_(n,i),_(t,r),_(t,s),_(s,u),l||(o=kt(e[3].call(null,t)),l=!0)},p(c,a){a&4&&nt(i,"transform",`rotate(${Math.min(c[2],180)}deg)`),a&2&&J(u,"hidden",c[1]<=50),a&4&&nt(u,"transform",`rotate(${c[2]}deg)`),a&2&&J(t,"hidden",c[1]>=100)},d(c){c&&S(t),l=!1,o()}}}function Ar(e){let t,n=e[0]&&an(e);return{c(){n&&n.c(),t=Ie()},m(i,r){n&&n.m(i,r),N(i,t,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=an(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:M,o:M,d(i){n&&n.d(i),i&&S(t)}}}const dn=100;function Or(e,t,n){let i;function r(){n(5,u+=dn),l>=100&&clearInterval(o)}function s(d){n(5,u=0),o=setInterval(r,dn)}let u,l,o,{duration:c=1e3}=t,{waiting:a=!1}=t;return e.$$set=d=>{"duration"in d&&n(4,c=d.duration),"waiting"in d&&n(0,a=d.waiting)},e.$$.update=()=>{e.$$.dirty&48&&n(1,l=u/c*100),e.$$.dirty&2&&n(2,i=l*3.6)},[a,l,i,s,c,u]}class qr extends z{constructor(t){super(),Z(this,t,Or,Ar,X,{duration:4,waiting:0})}}function pn(e,t){let n;if(e.dex>t.dex?n=1-t.dex/e.dex:n=e.dex/t.dex,n=Math.ceil(n*100),W(100)<n*di)return oe(e.str)}function jr(e,t){return Math.ceil(t/e*1e3*En)}function Ur(){return ai*En}function Lr(e,t=void 0){let n=t?{target:t}:void 0;It.push(e,n)}function Pr(e,t=void 0){let n={initial:0,next:0};t&&(n.target=t),It.push(e,n)}function xr(){It.pop(0)}const mt={show:Lr,persist:Pr,clear:xr};function mn(e){let t,n,i,r,s,u,l,o,c,a,d;l=new qr({props:{duration:e[0],waiting:e[6]}});function f(h,v){if(!h[3]&&!h[4]&&!h[5])return Hr;if(h[3]&&h[2])return Fr;if(h[4]&&h[2])return Dr}let p=f(e),m=p&&p(e);return{c(){t=g("div"),n=g("div"),i=g("button"),r=Q("Fight"),u=$(),D(l.$$.fragment),o=$(),m&&m.c(),i.disabled=s=!e[1],b(t,"class","ctrls col")},m(h,v){N(h,t,v),_(t,n),_(n,i),_(i,r),_(n,u),P(l,n,null),_(t,o),m&&m.m(t,null),c=!0,a||(d=O(i,"click",e[8]),a=!0)},p(h,v){(!c||v&2&&s!==(s=!h[1]))&&(i.disabled=s);const y={};v&1&&(y.duration=h[0]),v&64&&(y.waiting=h[6]),l.$set(y),p===(p=f(h))&&m?m.p(h,v):(m&&m.d(1),m=p&&p(h),m&&(m.c(),m.m(t,null)))},i(h){c||(R(l.$$.fragment,h),c=!0)},o(h){A(l.$$.fragment,h),c=!1},d(h){h&&S(t),x(l),m&&m.d(),a=!1,d()}}}function Dr(e){let t,n,i;return{c(){t=g("button"),t.textContent="Reset"},m(r,s){N(r,t,s),n||(i=O(t,"click",ae),n=!0)},p:M,d(r){r&&S(t),n=!1,i()}}}function Fr(e){let t,n,i;return{c(){t=g("button"),t.textContent="Carry on"},m(r,s){N(r,t,s),n||(i=O(t,"click",ct),n=!0)},p:M,d(r){r&&S(t),n=!1,i()}}}function Hr(e){let t,n,i;return{c(){t=g("button"),t.textContent="Run"},m(r,s){N(r,t,s),n||(i=O(t,"click",e[9]),n=!0)},p:M,d(r){r&&S(t),n=!1,i()}}}function Br(e){let t,n,i,r,s,u,l,o,c,a;i=new Er({props:{ran:e[5]}}),s=new Rr({props:{ran:e[5]}});let d=!e[5]&&mn(e);return{c(){t=g("div"),n=g("div"),D(i.$$.fragment),r=$(),D(s.$$.fragment),u=$(),d&&d.c(),b(n,"class","view field svelte-dg097n")},m(f,p){N(f,t,p),_(t,n),P(i,n,null),_(n,r),P(s,n,null),_(t,u),d&&d.m(t,null),o=!0,c||(a=[O(window,"keydown",e[7]),kt(e[10].call(null,n))],c=!0)},p(f,[p]){const m={};p&32&&(m.ran=f[5]),i.$set(m);const h={};p&32&&(h.ran=f[5]),s.$set(h),f[5]?d&&(gt(),A(d,1,1,()=>{d=null}),vt()):d?(d.p(f,p),p&32&&R(d,1)):(d=mn(f),d.c(),R(d,1),d.m(t,null))},i(f){o||(R(i.$$.fragment,f),R(s.$$.fragment,f),R(d),G(()=>{l||(l=rt(t,st,{},!0)),l.run(1)}),o=!0)},o(f){A(i.$$.fragment,f),A(s.$$.fragment,f),A(d),l||(l=rt(t,st,{},!1)),l.run(0),o=!1},d(f){f&&S(t),x(i),x(s),d&&d.d(),f&&l&&l.end(),c=!1,V(a)}}}function Wr(e,t,n){let i,r;B(e,F,E=>n(12,i=E)),B(e,Pt,E=>n(13,r=E));function s(E){switch(E.key){case"f":u();break;case"q":!y&&!I&&!k?a():y&&v?ct():I&&v&&ae();break}}function u(){if(!h)return;n(1,h=!1);let E=pn(i,r);_t(Pt,r.hp-=E??0,r),mt.show(f(E),"enc"),r.hp<=0?o():(n(6,C=!0),n(0,m=oe(Ur())),ot(m,()=>{n(6,C=!1),!y&&!I&&n(1,h=!0)}))}function l(){if(!y&&!I&&!k){let E=pn(r,i);_t(F,i.hp-=E??0,i),mt.show(f(E),"user"),i.hp<=0?c():ot(oe(p),l)}}function o(){n(3,y=!0),n(6,C=!1),n(1,h=!1),ot(we,()=>{n(2,v=!0),_t(F,i.gp+=r.gp,i),mt.persist(`Got ${r.gp} gold!`)})}function c(){n(4,I=!0),n(6,C=!1),n(1,h=!1),ot(we,()=>{n(2,v=!0),mt.persist("Game over")})}function a(){n(5,k=!0);var E=W(Math.min(i.gp/2,r.gp));_t(F,i.gp-=E,i),E&&mt.show(`Dropped ${E} gold`),ot(1e3,ct)}function d(E){gr(),p=jr(r.dex,i.dex),n(0,m=0),n(6,C=!0),ot(W(p)+100,l),ot(m,()=>{n(6,C=!1),n(1,h=!0)})}const f=E=>E==null?"Miss":`${E}`;let p,m,h,v,y,I,k,C;return[m,h,v,y,I,k,C,s,u,a,d]}class Kr extends z{constructor(t){super(),Z(this,t,Wr,Br,X,{})}}function _n(e){let t,n,i,r=e[0].innCost+"",s,u;return{c(){t=g("p"),t.textContent="Inn",n=$(),i=g("p"),s=Q(r),u=Q(" gold per night")},m(l,o){N(l,t,o),N(l,n,o),N(l,i,o),_(i,s),_(i,u)},p(l,o){o&1&&r!==(r=l[0].innCost+"")&&at(s,r)},d(l){l&&S(t),l&&S(n),l&&S(i)}}}function Yr(e){let t,n,i,r,s,u,l,o,c,a,d,f=e[0]&&_n(e);return{c(){t=g("div"),n=g("div"),f&&f.c(),i=$(),r=g("div"),s=g("button"),s.textContent="Rest",u=$(),l=g("button"),l.textContent="Leave",b(n,"class","view col"),b(r,"class","ctrls")},m(p,m){N(p,t,m),_(t,n),f&&f.m(n,null),_(t,i),_(t,r),_(r,s),_(r,u),_(r,l),c=!0,a||(d=[O(window,"keydown",e[1]),kt(e[3].call(null,n)),O(s,"click",e[2]),O(l,"click",ct)],a=!0)},p(p,[m]){p[0]?f?f.p(p,m):(f=_n(p),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i(p){c||(G(()=>{o||(o=rt(t,st,{},!0)),o.run(1)}),c=!0)},o(p){o||(o=rt(t,st,{},!1)),o.run(0),c=!1},d(p){p&&S(t),f&&f.d(),p&&o&&o.end(),a=!1,V(d)}}}function Gr(e,t,n){let i;B(e,F,o=>n(4,i=o));function r(o){switch(o.key){case"q":ct();break;case"r":s();break}}function s(){i.gp>=l.innCost?(_t(F,i.gp-=l.innCost,i),_t(F,i.hp=i.maxhp,i),$i(2e3,ct)):mt.show("Not enough gold")}function u(o){let c=pt.location().abs;n(0,l=Xi(c.x,c.y))}let l;return[l,r,s,u]}class Vr extends z{constructor(t){super(),Z(this,t,Gr,Yr,X,{})}}function Xr(e){let t,n;return t=new Vr({}),{c(){D(t.$$.fragment)},m(i,r){P(t,i,r),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){x(t,i)}}}function Qr(e){let t,n;return t=new Kr({}),{c(){D(t.$$.fragment)},m(i,r){P(t,i,r),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){x(t,i)}}}function Zr(e){let t,n;return t=new ir({}),{c(){D(t.$$.fragment)},m(i,r){P(t,i,r),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){x(t,i)}}}function zr(e){let t,n;return t=new tr({}),{c(){D(t.$$.fragment)},m(i,r){P(t,i,r),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){x(t,i)}}}function Jr(e){let t,n;return t=new Ai({}),{c(){D(t.$$.fragment)},m(i,r){P(t,i,r),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){x(t,i)}}}function ts(e){let t,n,i,r,s,u,l,o;n=new Te({});const c=[Jr,zr,Zr,Qr,Xr],a=[];function d(f,p){return f[0]==et.TITLE?0:f[0]==et.MAP?1:f[0]==et.MENU?2:f[0]==et.ENC?3:f[0]==et.CITY?4:-1}return~(r=d(e))&&(s=a[r]=c[r](e)),{c(){t=g("main"),D(n.$$.fragment),i=$(),s&&s.c()},m(f,p){N(f,t,p),P(n,t,null),_(t,i),~r&&a[r].m(t,null),u=!0,l||(o=kt(e[1].call(null,t)),l=!0)},p(f,[p]){let m=r;r=d(f),r!==m&&(s&&(gt(),A(a[m],1,1,()=>{a[m]=null}),vt()),~r?(s=a[r],s||(s=a[r]=c[r](f),s.c()),R(s,1),s.m(t,null)):s=null)},i(f){u||(R(n.$$.fragment,f),R(s),u=!0)},o(f){A(n.$$.fragment,f),A(s),u=!1},d(f){f&&S(t),x(n),~r&&a[r].d(),l=!1,o()}}}function es(e,t,n){function i(s){wt.subscribe(u=>{n(0,r=void 0),mt.clear(),ot(Cn,()=>{n(0,r=u)})})}let r;return[r,i]}class ns extends z{constructor(t){super(),Z(this,t,es,ts,X,{})}}new ns({target:document.getElementById("app")});
