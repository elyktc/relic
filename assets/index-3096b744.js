(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function M(){}const at=e=>e;function de(e,t){for(const n in t)e[n]=t[n];return e}function tn(e){return e()}function Le(){return Object.create(null)}function K(e){e.forEach(tn)}function dt(e){return typeof e=="function"}function G(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function vn(e){return Object.keys(e).length===0}function yn(e,...t){if(e==null)return M;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function H(e,t,n){e.$$.on_destroy.push(yn(t,n))}function Jt(e){return e??""}function yt(e,t,n){return e.set(n),t}function Ct(e){return e&&dt(e.destroy)?e.destroy:M}const en=typeof window<"u";let At=en?()=>window.performance.now():()=>Date.now(),ke=en?e=>requestAnimationFrame(e):M;const bt=new Set;function nn(e){bt.forEach(t=>{t.c(e)||(bt.delete(t),t.f())}),bt.size!==0&&ke(nn)}function Ot(e){let t;return bt.size===0&&ke(nn),{promise:new Promise(n=>{bt.add(t={c:e,f:n})}),abort(){bt.delete(t)}}}function m(e,t){e.appendChild(t)}function rn(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function bn(e){const t=v("style");return $n(rn(e),t),t.sheet}function $n(e,t){return m(e.head||e,t),t.sheet}function S(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function v(e){return document.createElement(e)}function kn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Z(e){return document.createTextNode(e)}function C(){return Z(" ")}function sn(){return Z("")}function j(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function wn(e){return Array.from(e.childNodes)}function lt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Pe(e,t){e.value=t??""}function zt(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function ot(e,t,n){e.classList[n?"add":"remove"](t)}function on(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}class En{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=kn(n.nodeName):this.e=v(n.nodeName),this.t=n,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)S(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(E)}}function Fe(e,t){return new e(t)}const te=new Map;let ee=0;function Cn(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Mn(e,t){const n={stylesheet:bn(t),rules:{}};return te.set(e,n),n}function Nt(e,t,n,i,r,s,u,o=0){const l=16.666/i;let c=`{
`;for(let g=0;g<=1;g+=l){const y=t+(n-t)*s(g);c+=g*100+`%{${u(y,1-y)}}
`}const f=c+`100% {${u(n,1-n)}}
}`,d=`__svelte_${Cn(f)}_${o}`,a=rn(e),{stylesheet:_,rules:p}=te.get(a)||Mn(a,e);p[d]||(p[d]=!0,_.insertRule(`@keyframes ${d} ${f}`,_.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${i}ms linear ${r}ms 1 both`,ee+=1,d}function It(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),r=n.length-i.length;r&&(e.style.animation=i.join(", "),ee-=r,ee||Sn())}function Sn(){ke(()=>{ee||(te.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&E(t)}),te.clear())})}function Tn(e,t,n,i){if(!t)return M;const r=e.getBoundingClientRect();if(t.left===r.left&&t.right===r.right&&t.top===r.top&&t.bottom===r.bottom)return M;const{delay:s=0,duration:u=300,easing:o=at,start:l=At()+s,end:c=l+u,tick:f=M,css:d}=n(e,{from:t,to:r},i);let a=!0,_=!1,p;function h(){d&&(p=Nt(e,0,1,u,s,o,d)),s||(_=!0)}function g(){d&&It(e,p),a=!1}return Ot(y=>{if(!_&&y>=l&&(_=!0),_&&y>=c&&(f(1,0),g()),!a)return!1;if(_){const w=y-l,$=0+1*o(w/u);f($,1-$)}return!0}),h(),f(0,1),g}function Nn(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,r=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,ln(e,r)}}function ln(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),r=i.transform==="none"?"":i.transform;e.style.transform=`${r} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Rt;function Tt(e){Rt=e}function we(){if(!Rt)throw new Error("Function called outside component initialization");return Rt}function In(e){we().$$.on_mount.push(e)}function Rn(e){we().$$.on_destroy.push(e)}function xn(){const e=we();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=on(t,n,{cancelable:i});return r.slice().forEach(u=>{u.call(e,s)}),!s.defaultPrevented}return!0}}const St=[],He=[],Kt=[],De=[],An=Promise.resolve();let pe=!1;function On(){pe||(pe=!0,An.then(cn))}function Y(e){Kt.push(e)}const ae=new Set;let Xt=0;function cn(){const e=Rt;do{for(;Xt<St.length;){const t=St[Xt];Xt++,Tt(t),jn(t.$$)}for(Tt(null),St.length=0,Xt=0;He.length;)He.pop()();for(let t=0;t<Kt.length;t+=1){const n=Kt[t];ae.has(n)||(ae.add(n),n())}Kt.length=0}while(St.length);for(;De.length;)De.pop()();pe=!1,ae.clear(),Tt(e)}function jn(e){if(e.fragment!==null){e.update(),K(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}let Mt;function Ee(){return Mt||(Mt=Promise.resolve(),Mt.then(()=>{Mt=null})),Mt}function ft(e,t,n){e.dispatchEvent(on(`${t?"intro":"outro"}${n}`))}const Vt=new Set;let et;function $t(){et={r:0,c:[],p:et}}function kt(){et.r||K(et.c),et=et.p}function x(e,t){e&&e.i&&(Vt.delete(e),e.i(t))}function A(e,t,n,i){if(e&&e.o){if(Vt.has(e))return;Vt.add(e),et.c.push(()=>{Vt.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const Ce={duration:0};function Me(e,t,n){const i={direction:"in"};let r=t(e,n,i),s=!1,u,o,l=0;function c(){u&&It(e,u)}function f(){const{delay:a=0,duration:_=300,easing:p=at,tick:h=M,css:g}=r||Ce;g&&(u=Nt(e,0,1,_,a,p,g,l++)),h(0,1);const y=At()+a,w=y+_;o&&o.abort(),s=!0,Y(()=>ft(e,!0,"start")),o=Ot($=>{if(s){if($>=w)return h(1,0),ft(e,!0,"end"),c(),s=!1;if($>=y){const T=p(($-y)/_);h(T,1-T)}}return s})}let d=!1;return{start(){d||(d=!0,It(e),dt(r)?(r=r(i),Ee().then(f)):f())},invalidate(){d=!1},end(){s&&(c(),s=!1)}}}function Se(e,t,n){const i={direction:"out"};let r=t(e,n,i),s=!0,u;const o=et;o.r+=1;function l(){const{delay:c=0,duration:f=300,easing:d=at,tick:a=M,css:_}=r||Ce;_&&(u=Nt(e,1,0,f,c,d,_));const p=At()+c,h=p+f;Y(()=>ft(e,!1,"start")),Ot(g=>{if(s){if(g>=h)return a(0,1),ft(e,!1,"end"),--o.r||K(o.c),!1;if(g>=p){const y=d((g-p)/f);a(1-y,y)}}return s})}return dt(r)?Ee().then(()=>{r=r(i),l()}):l(),{end(c){c&&r.tick&&r.tick(1,0),s&&(u&&It(e,u),s=!1)}}}function nt(e,t,n,i){const r={direction:"both"};let s=t(e,n,r),u=i?0:1,o=null,l=null,c=null;function f(){c&&It(e,c)}function d(_,p){const h=_.b-u;return p*=Math.abs(h),{a:u,b:_.b,d:h,duration:p,start:_.start,end:_.start+p,group:_.group}}function a(_){const{delay:p=0,duration:h=300,easing:g=at,tick:y=M,css:w}=s||Ce,$={start:At()+p,b:_};_||($.group=et,et.r+=1),o||l?l=$:(w&&(f(),c=Nt(e,u,_,h,p,g,w)),_&&y(0,1),o=d($,h),Y(()=>ft(e,_,"start")),Ot(T=>{if(l&&T>l.start&&(o=d(l,h),l=null,ft(e,o.b,"start"),w&&(f(),c=Nt(e,u,o.b,o.duration,0,g,s.css))),o){if(T>=o.end)y(u=o.b,1-u),ft(e,o.b,"end"),l||(o.b?f():--o.group.r||K(o.group.c)),o=null;else if(T>=o.start){const R=T-o.start;u=o.a+o.d*g(R/o.duration),y(u,1-u)}}return!!(o||l)}))}return{run(_){dt(s)?Ee().then(()=>{s=s(r),a(_)}):a(_)},end(){f(),o=l=null}}}function qn(e,t){A(e,1,1,()=>{t.delete(e.key)})}function Un(e,t){e.f(),qn(e,t)}function Ln(e,t,n,i,r,s,u,o,l,c,f,d){let a=e.length,_=s.length,p=a;const h={};for(;p--;)h[e[p].key]=p;const g=[],y=new Map,w=new Map;for(p=_;p--;){const I=d(r,s,p),k=n(I);let N=u.get(k);N?i&&N.p(I,t):(N=c(k,I),N.c()),y.set(k,g[p]=N),k in h&&w.set(k,Math.abs(p-h[k]))}const $=new Set,T=new Set;function R(I){x(I,1),I.m(o,f),u.set(I.key,I),f=I.first,_--}for(;a&&_;){const I=g[_-1],k=e[a-1],N=I.key,P=k.key;I===k?(f=I.first,a--,_--):y.has(P)?!u.has(N)||$.has(N)?R(I):T.has(P)?a--:w.get(N)>w.get(P)?(T.add(N),R(I)):($.add(P),a--):(l(k,u),a--)}for(;a--;){const I=e[a];y.has(I.key)||l(I,u)}for(;_;)R(g[_-1]);return g}function Pn(e,t){const n={},i={},r={$$scope:1};let s=e.length;for(;s--;){const u=e[s],o=t[s];if(o){for(const l in u)l in o||(i[l]=1);for(const l in o)r[l]||(n[l]=o[l],r[l]=1);e[s]=o}else for(const l in u)r[l]=1}for(const u in i)u in n||(n[u]=void 0);return n}function Fn(e){return typeof e=="object"&&e!==null?e:{}}function F(e){e&&e.c()}function U(e,t,n,i){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),i||Y(()=>{const u=e.$$.on_mount.map(tn).filter(dt);e.$$.on_destroy?e.$$.on_destroy.push(...u):K(u),e.$$.on_mount=[]}),s.forEach(Y)}function L(e,t){const n=e.$$;n.fragment!==null&&(K(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Hn(e,t){e.$$.dirty[0]===-1&&(St.push(e),On(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function V(e,t,n,i,r,s,u,o=[-1]){const l=Rt;Tt(e);const c=e.$$={fragment:null,ctx:[],props:s,update:M,not_equal:r,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Le(),dirty:o,skip_bound:!1,root:t.target||l.$$.root};u&&u(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(d,a,..._)=>{const p=_.length?_[0]:a;return c.ctx&&r(c.ctx[d],c.ctx[d]=p)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](p),f&&Hn(e,d)),a}):[],c.update(),f=!0,K(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const d=wn(t.target);c.fragment&&c.fragment.l(d),d.forEach(E)}else c.fragment&&c.fragment.c();t.intro&&x(e.$$.fragment),U(e,t.target,t.anchor,t.customElement),cn()}Tt(l)}class Q{$destroy(){L(this,1),this.$destroy=M}$on(t,n){if(!dt(n))return M;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!vn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Dn=60,Bn=80,Wn=5,Yn=9,Xn=20,Gn=40,zn=1,Kn=12,Be=200,_e=500,Vn=7,Qn=9,Zn=2,Jn=2,We=20,Ye=10,un=200,ti=.1,ei=5,ni=100;function z(e,t){return e??(e=0),t??(t=0),Math.floor(Math.random()*(e-t))+t}function vt(e,t){setTimeout(t,e)}function me(e,t){t??(t=ti);let n=Math.ceil(Math.abs(e*t));return z(e+n,e-n)}const gt=[];function jt(e,t=M){let n;const i=new Set;function r(o){if(G(e,o)&&(e=o,n)){const l=!gt.length;for(const c of i)c[1](),gt.push(c,e);if(l){for(let c=0;c<gt.length;c+=2)gt[c][0](gt[c+1]);gt.length=0}}}function s(o){r(o(e))}function u(o,l=M){const c=[o,l];return i.add(c),i.size===1&&(n=t(r)||M),o(e),()=>{i.delete(c),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:u}}function ii(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function ne(e){const t=e-1;return t*t*t+1}function Xe(e,{delay:t=0,duration:n=400,easing:i=ii,amount:r=5,opacity:s=0}={}){const u=getComputedStyle(e),o=+u.opacity,l=u.filter==="none"?"":u.filter,c=o*(1-s);return{delay:t,duration:n,easing:i,css:(f,d)=>`opacity: ${o-c*d}; filter: ${l} blur(${d*r}px);`}}function fn(e,{delay:t=0,duration:n=400,easing:i=at}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*r}`}}function re(e,{delay:t=0,duration:n=400,easing:i=ne,x:r=0,y:s=0,opacity:u=0}={}){const o=getComputedStyle(e),l=+o.opacity,c=o.transform==="none"?"":o.transform,f=l*(1-u);return{delay:t,duration:n,easing:i,css:(d,a)=>`
			transform: ${c} translate(${(1-d)*r}px, ${(1-d)*s}px);
			opacity: ${l-f*a}`}}const J={TITLE:0,MAP:1,MENU:2,ENC:3,CITY:4},pt=jt(J.TITLE);function qt(){pt.set(J.MAP)}function ri(){pt.set(J.MENU)}function si(){pt.set(J.ENC)}function oi(){pt.set(J.TITLE)}function li(){pt.set(J.CITY)}function ci(e,t){pt.set(void 0),vt(e,t)}function it(e){return fn(e,{duration:un})}let Gt;const ui=new Uint8Array(16);function fi(){if(!Gt&&(Gt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Gt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gt(ui)}const q=[];for(let e=0;e<256;++e)q.push((e+256).toString(16).slice(1));function ai(e,t=0){return(q[e[t+0]]+q[e[t+1]]+q[e[t+2]]+q[e[t+3]]+"-"+q[e[t+4]]+q[e[t+5]]+"-"+q[e[t+6]]+q[e[t+7]]+"-"+q[e[t+8]]+q[e[t+9]]+"-"+q[e[t+10]]+q[e[t+11]]+q[e[t+12]]+q[e[t+13]]+q[e[t+14]]+q[e[t+15]]).toLowerCase()}const di=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ge={randomUUID:di};function pi(e,t,n){if(Ge.randomUUID&&!t&&!e)return Ge.randomUUID();e=e||{};const i=e.random||(e.rng||fi)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let r=0;r<16;++r)t[n+r]=i[r];return t}return ai(i)}function an(){let e="",t=z(Bn,Dn),n=z(Yn,Wn);return{name:e,hp:t,maxhp:t,str:n,steps:0,gp:0}}const D=jt(an());function _i(){D.set(an())}function mi(e){let t,n,i,r,s,u,o,l,c,f,d,a,_,p,h;return{c(){t=v("div"),n=v("div"),i=v("h1"),i.textContent="Relic",r=C(),s=v("p"),s.textContent="by elyktc",u=C(),o=v("div"),l=v("input"),c=C(),f=v("div"),d=v("button"),d.textContent="Start",zt(i,"margin-right","50px"),zt(s,"margin-left","100px"),b(l,"maxlength","8"),b(l,"class","svelte-evi9wy"),zt(l,"display","none"),b(o,"class","row"),b(n,"class","view col svelte-evi9wy"),b(f,"class","ctrls")},m(g,y){S(g,t,y),m(t,n),m(n,i),m(n,r),m(n,s),m(n,u),m(n,o),m(o,l),Pe(l,e[0].name),m(t,c),m(t,f),m(f,d),_=!0,p||(h=[j(l,"input",e[2]),Ct(e[1].call(null,d)),j(d,"click",qt)],p=!0)},p(g,[y]){y&1&&l.value!==g[0].name&&Pe(l,g[0].name)},i(g){_||(Y(()=>{a||(a=nt(t,it,{},!0)),a.run(1)}),_=!0)},o(g){a||(a=nt(t,it,{},!1)),a.run(0),_=!1},d(g){g&&E(t),g&&a&&a.end(),p=!1,K(h)}}}function hi(e,t,n){let i;H(e,D,u=>n(0,i=u));function r(u){_i(),u.focus()}function s(){i.name=this.value,D.set(i)}return[i,r,s]}class gi extends Q{constructor(t){super(),V(this,t,hi,mi,G,{})}}function vi(e){let t,n,i,r,s,u,o,l,c,f,d,a,_,p,h,g,y,w,$,T,R,I,k;return{c(){t=v("div"),n=v("div"),i=v("button"),i.textContent="NW",r=C(),s=v("button"),s.textContent="N",u=C(),o=v("button"),o.textContent="NE",l=C(),c=v("div"),f=v("button"),f.textContent="W",d=C(),a=v("button"),a.textContent="Menu",_=C(),p=v("button"),p.textContent="E",h=C(),g=v("div"),y=v("button"),y.textContent="SW",w=C(),$=v("button"),$.textContent="S",T=C(),R=v("button"),R.textContent="SE",b(t,"class","ctrls")},m(N,P){S(N,t,P),m(t,n),m(n,i),m(n,r),m(n,s),m(n,u),m(n,o),m(t,l),m(t,c),m(c,f),m(c,d),m(c,a),m(c,_),m(c,p),m(t,h),m(t,g),m(g,y),m(g,w),m(g,$),m(g,T),m(g,R),I||(k=[j(window,"keydown",e[8]),j(i,"click",e[0]),j(s,"click",e[1]),j(o,"click",e[2]),j(f,"click",e[3]),j(a,"click",ri),j(p,"click",e[4]),j(y,"click",e[5]),j($,"click",e[6]),j(R,"click",e[7])],I=!0)},p:M,i:M,o:M,d(N){N&&E(t),I=!1,K(k)}}}function yi(e){const t=xn(),n=()=>t("move",{x:-1,y:-1}),i=()=>t("move",{x:-1,y:0}),r=()=>t("move",{x:-1,y:1}),s=()=>t("move",{x:0,y:-1}),u=()=>t("move",{x:0,y:1}),o=()=>t("move",{x:1,y:-1}),l=()=>t("move",{x:1,y:0}),c=()=>t("move",{x:1,y:1});function f(d){switch(d.key){case"q":n();break;case"w":i();break;case"e":r();break;case"a":s();break;case"d":u();break;case"z":o();break;case"s":l();break;case"c":c();break}}return[n,i,r,s,u,o,l,c,f]}class bi extends Q{constructor(t){super(),V(this,t,yi,vi,G,{})}}let O,B,W,se,oe,wt=!0,Te=Qn,ze=Zn,he=0,Ne=0;const $i="u",Ie="f",Qt="p",Re="t",dn="w",ie="c";function pn(e,t,n){e=Math.max(e,1),O=wt?[]:O??[];let i=t??Math.floor(e/2),r=n??Math.floor(e/2);B=i,W=r,wt&&(se=B,oe=W,he=0,Ne=0),ge(i,r,ve.CITY);for(let s=1;s<e;s++){let u=s%2==0?s:-s;i+=u,r+=u,ge(i,r)}O=_n(!0,e,t,n)}function ki(e,t,n,i){if(!e)return e;i??(i=Te);let r=Math.floor(i/2);t??(t=r),n??(n=r);let s=[];for(let u=0;u<i;u++)for(let o=0;o<i;o++){let l=t-r+u,c=n-r+o,f=(e[l]&&e[l][c])??Ie;s[u]??(s[u]=[]),s[u][o]=f}return s[r][r]=$i,s}function wi(){let e=mn();if(B<e&&(O.splice(0,0,[]),se++,B=e),W<e){let t=hn();for(let n=0;n<t;n++)O[n].splice(0,0,void 0);oe++,W=e}}function Ei(e){return[...e.map(t=>[...t])]}function _n(e,t,n,i){var d;if(!O)return O;t=t??Te,n=n??B,i=i??W;let r=Ei(O),s=hn(),u=Mi(),o=Math.min(t??s,s),l=Math.min(t??u,u),c=Math.max((n??0)-Math.floor(o/2),0),f=Math.max((i??0)-Math.floor(l/2),0);for(let a=0;a<o;a++)for(let _=0;_<l;_++){let p=c+a,h=f+_;r[p]??(r[p]=[]);let g=e?le(p,h):Ie;(d=r[p])[h]??(d[h]=g)}return r}function ge(e,t,n){var i;return e??(e=B),t??(t=W),O??(O=[]),O[e]??(O[e]=[]),(i=O[e])[t]??(i[t]=n??le(e,t)),n}function le(e,t){if(e??(e=B),t??(t=W),O&&O[e]&&O[e][t])return O[e][t];let n;if(z(We)==1&&z(We)<he++)n=ie,he=0;else{let i=Ci(e,t),r=z(i.length+1);if(r>=i.length){let s=[Qt,Re];r=z(s.length+Jn),n=r>=s.length?Qt:s[r]}else n=i[r]}return wt&&(n==ie||n==dn)&&(n=Qt),wt||Ne++,n}function Ci(e,t){let n=[];for(let i=e-1;i<=e+1;i++)for(let r=t-1;r<=t+1;r++)O[i]&&O[i][r]&&O[i][r]!=ie&&n.push(O[i][r]);return n}function mn(){return le()==Re?Math.floor(ze/2):ze}function hn(e){return e??(e=O??[]),e.length}function Mi(e){e??(e=O??[]);let t=e.map(n=>n.length).sort((n,i)=>n-i);return t[t.length-1]}function Si(e){if(B+=e.x,W+=e.y,wi(),ge()==dn)return B-=e.x,W-=e.y,!1;{let n=mn();n>0&&pn(n*2+1,B,W)}return!0}function Ti(){let e=_n(!1);return ki(e,B,W,Te)}function Ni(){let e=Math.abs(B-se),t=Math.abs(W-oe);return Math.ceil(Math.hypot(e,t))}function Ii(){return Ne}function Ri(){return{x:B,y:W,abs:{x:B-se,y:W-oe},terrain:le(),distance:Ni()}}function xi(){wt=!0,pn(Vn),wt=!1}const ve={FOG:Ie,PLAIN:Qt,FOREST:Re,CITY:ie},ct={miniMap:Ti,location:Ri,move:Si,getExplored:Ii};let Zt=new Map;function Ai(){let e=pi().substring(0,8),t=z(ei,ni);return{name:e,innCost:t}}function Oi(e,t){let n=`${e}.${t}`;return Zt.has(n)||Zt.set(n,Ai()),Zt.get(n)}function ji(){Zt.clear()}function qi(e){let t,n,i,r,s,u,o,l;return r=new bi({}),r.$on("move",e[3]),{c(){t=v("div"),n=v("div"),i=C(),F(r.$$.fragment),b(n,"class","view field svelte-1f1cfey")},m(c,f){S(c,t,f),m(t,n),n.innerHTML=e[0],m(t,i),U(r,t,null),u=!0,o||(l=Ct(e[2].call(null,n)),o=!0)},p(c,[f]){(!u||f&1)&&(n.innerHTML=c[0])},i(c){u||(x(r.$$.fragment,c),Y(()=>{s||(s=nt(t,it,{},!0)),s.run(1)}),u=!0)},o(c){A(r.$$.fragment,c),s||(s=nt(t,it,{},!1)),s.run(0),u=!1},d(c){c&&E(t),L(r),c&&s&&s.end(),o=!1,l()}}}function Ui(e){return`<span class="icon map-${e}"></span>`}function Li(e,t,n){let i;H(e,D,f=>n(4,i=f));function r(f){n(0,l=f.map(d=>d.map(Ui).join("")).join("<br/>"))}function s(){return ct.location().terrain==ve.FOREST?Math.ceil(Ye/2):Ye}function u(f){ct.move(f)&&(yt(D,i.steps++,i),r(ct.miniMap()),ct.location().terrain==ve.CITY?li():z(s())==1&&si())}function o(f){i.steps||(xi(),ji()),r(ct.miniMap())}let l="";return[l,u,o,f=>u(f.detail)]}let Pi=class extends Q{constructor(t){super(),V(this,t,Li,qi,G,{})}};function Fi(e){let t,n,i,r=e[0].name+"",s,u,o,l,c,f,d=e[0].hp+"",a,_,p=e[0].maxhp+"",h,g,y,w,$,T,R=e[0].str+"",I,k,N,P,_t,Ut,Lt=e[0].gp+"",ce,xe,mt,Pt,Ae,Ft,Ht=new Intl.NumberFormat().format(e[0].steps)+"",ue,Oe,ht,Dt,je,Bt,qe,Wt,Yt,rt,tt,fe,Ue;return{c(){t=v("div"),n=v("div"),i=v("h1"),s=Z(r),u=C(),o=v("div"),l=v("div"),l.textContent="Health",c=C(),f=v("div"),a=Z(d),_=Z(" / "),h=Z(p),g=C(),y=v("div"),w=v("div"),w.textContent="Strength",$=C(),T=v("div"),I=Z(R),k=C(),N=v("div"),P=v("div"),P.textContent="Gold",_t=C(),Ut=v("div"),ce=Z(Lt),xe=C(),mt=v("div"),Pt=v("div"),Pt.textContent="Steps",Ae=C(),Ft=v("div"),ue=Z(Ht),Oe=C(),ht=v("div"),Dt=v("div"),Dt.textContent="Explored",je=C(),Bt=v("div"),Bt.textContent=`${new Intl.NumberFormat().format(ct.getExplored())}`,qe=C(),Wt=v("div"),Yt=v("button"),Yt.textContent="Back",zt(i,"display","none"),b(l,"class","col label svelte-qam9kv"),b(f,"class","col value svelte-qam9kv"),b(o,"class","row svelte-qam9kv"),b(w,"class","col label svelte-qam9kv"),b(T,"class","col value svelte-qam9kv"),b(y,"class","row svelte-qam9kv"),b(P,"class","col label svelte-qam9kv"),b(Ut,"class","col value svelte-qam9kv"),b(N,"class","row svelte-qam9kv"),b(Pt,"class","col label svelte-qam9kv"),b(Ft,"class","col value svelte-qam9kv"),b(mt,"class","row svelte-qam9kv"),b(Dt,"class","col label svelte-qam9kv"),b(Bt,"class","col value svelte-qam9kv"),b(ht,"class","row svelte-qam9kv"),b(n,"class","view col svelte-qam9kv"),b(Wt,"class","ctrls")},m(X,st){S(X,t,st),m(t,n),m(n,i),m(i,s),m(n,u),m(n,o),m(o,l),m(o,c),m(o,f),m(f,a),m(f,_),m(f,h),m(n,g),m(n,y),m(y,w),m(y,$),m(y,T),m(T,I),m(n,k),m(n,N),m(N,P),m(N,_t),m(N,Ut),m(Ut,ce),m(n,xe),m(n,mt),m(mt,Pt),m(mt,Ae),m(mt,Ft),m(Ft,ue),m(n,Oe),m(n,ht),m(ht,Dt),m(ht,je),m(ht,Bt),m(t,qe),m(t,Wt),m(Wt,Yt),tt=!0,fe||(Ue=j(Yt,"click",qt),fe=!0)},p(X,[st]){(!tt||st&1)&&r!==(r=X[0].name+"")&&lt(s,r),(!tt||st&1)&&d!==(d=X[0].hp+"")&&lt(a,d),(!tt||st&1)&&p!==(p=X[0].maxhp+"")&&lt(h,p),(!tt||st&1)&&R!==(R=X[0].str+"")&&lt(I,R),(!tt||st&1)&&Lt!==(Lt=X[0].gp+"")&&lt(ce,Lt),(!tt||st&1)&&Ht!==(Ht=new Intl.NumberFormat().format(X[0].steps)+"")&&lt(ue,Ht)},i(X){tt||(Y(()=>{rt||(rt=nt(t,it,{},!0)),rt.run(1)}),tt=!0)},o(X){rt||(rt=nt(t,it,{},!1)),rt.run(0),tt=!1},d(X){X&&E(t),X&&rt&&rt.end(),fe=!1,Ue()}}}function Hi(e,t,n){let i;return H(e,D,r=>n(0,i=r)),[i]}class Di extends Q{constructor(t){super(),V(this,t,Hi,Fi,G,{})}}function Bi(e,{from:t,to:n},i={}){const r=getComputedStyle(e),s=r.transform==="none"?"":r.transform,[u,o]=r.transformOrigin.split(" ").map(parseFloat),l=t.left+t.width*u/n.width-(n.left+u),c=t.top+t.height*o/n.height-(n.top+o),{delay:f=0,duration:d=_=>Math.sqrt(_)*120,easing:a=ne}=i;return{delay:f,duration:dt(d)?d(Math.sqrt(l*l+c*c)):d,easing:a,css:(_,p)=>{const h=p*l,g=p*c,y=_+p*t.width/n.width,w=_+p*t.height/n.height;return`transform: ${s} translate(${h}px, ${g}px) scale(${y}, ${w});`}}}const Wi={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},Yi=()=>{const{subscribe:e,update:t}=jt([]);let n=0;const i={},r=c=>c instanceof Object;return{subscribe:e,push:(c,f={})=>{const d={target:"default",...r(c)?c:{...f,msg:c}},a=i[d.target]||{},_={...Wi,...a,...d,theme:{...a.theme,...d.theme},classes:[...a.classes||[],...d.classes||[]],id:++n};return t(p=>_.reversed?[...p,_]:[_,...p]),n},pop:c=>{t(f=>{if(!f.length||c===0)return[];if(r(c))return f.filter(a=>c(a));const d=c||Math.max(...f.map(a=>a.id));return f.filter(a=>a.id!==d)})},set:(c,f={})=>{const d=r(c)?{...c}:{...f,id:c};t(a=>{const _=a.findIndex(p=>p.id===d.id);return _>-1&&(a[_]={...a[_],...d}),a})},_init:(c="default",f={})=>(i[c]=f,i)}},Et=Yi();function Ke(e){return Object.prototype.toString.call(e)==="[object Date]"}function ye(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((r,s)=>ye(e[s],r));return r=>i.map(s=>s(r))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Ke(e)&&Ke(t)){e=e.getTime(),t=t.getTime();const s=t-e;return u=>new Date(e+u*s)}const i=Object.keys(t),r={};return i.forEach(s=>{r[s]=ye(e[s],t[s])}),s=>{const u={};return i.forEach(o=>{u[o]=r[o](s)}),u}}if(n==="number"){const i=t-e;return r=>e+r*i}throw new Error(`Cannot interpolate ${n} values`)}function be(e,t={}){const n=jt(e);let i,r=e;function s(u,o){if(e==null)return n.set(e=u),Promise.resolve();r=u;let l=i,c=!1,{delay:f=0,duration:d=400,easing:a=at,interpolate:_=ye}=de(de({},t),o);if(d===0)return l&&(l.abort(),l=null),n.set(e=r),Promise.resolve();const p=At()+f;let h;return i=Ot(g=>{if(g<p)return!0;c||(h=_(e,u),typeof d=="function"&&(d=d(e,u)),c=!0),l&&(l.abort(),l=null);const y=g-p;return y>d?(n.set(e=u),!1):(n.set(e=h(a(y/d))),!0)}),i.promise}return{set:s,update:(u,o)=>s(u(r,e),o),subscribe:n.subscribe}}function Xi(e){let t,n=e[0].msg+"",i;return{c(){t=new En(!1),i=sn(),t.a=i},m(r,s){t.m(n,r,s),S(r,i,s)},p(r,s){s&1&&n!==(n=r[0].msg+"")&&t.p(n)},i:M,o:M,d(r){r&&E(i),r&&t.d()}}}function Gi(e){let t,n,i;const r=[e[2]];var s=e[0].component.src;function u(o){let l={};for(let c=0;c<r.length;c+=1)l=de(l,r[c]);return{props:l}}return s&&(t=Fe(s,u())),{c(){t&&F(t.$$.fragment),n=sn()},m(o,l){t&&U(t,o,l),S(o,n,l),i=!0},p(o,l){const c=l&4?Pn(r,[Fn(o[2])]):{};if(s!==(s=o[0].component.src)){if(t){$t();const f=t;A(f.$$.fragment,1,0,()=>{L(f,1)}),kt()}s?(t=Fe(s,u()),F(t.$$.fragment),x(t.$$.fragment,1),U(t,n.parentNode,n)):t=null}else s&&t.$set(c)},i(o){i||(t&&x(t.$$.fragment,o),i=!0)},o(o){t&&A(t.$$.fragment,o),i=!1},d(o){o&&E(n),t&&L(t,o)}}}function Ve(e){let t,n,i;return{c(){t=v("div"),b(t,"class","_toastBtn pe svelte-l65oht"),b(t,"role","button"),b(t,"tabindex","0")},m(r,s){S(r,t,s),n||(i=[j(t,"click",e[4]),j(t,"keydown",e[8])],n=!0)},p:M,d(r){r&&E(t),n=!1,K(i)}}}function zi(e){let t,n,i,r,s,u,o,l,c,f;const d=[Gi,Xi],a=[];function _(h,g){return h[0].component?0:1}i=_(e),r=a[i]=d[i](e);let p=e[0].dismissable&&Ve(e);return{c(){t=v("div"),n=v("div"),r.c(),s=C(),p&&p.c(),u=C(),o=v("progress"),b(n,"role","status"),b(n,"class","_toastMsg svelte-l65oht"),ot(n,"pe",e[0].component),b(o,"class","_toastBar svelte-l65oht"),o.value=e[1],b(t,"class","_toastItem svelte-l65oht"),ot(t,"pe",e[0].pausable)},m(h,g){S(h,t,g),m(t,n),a[i].m(n,null),m(t,s),p&&p.m(t,null),m(t,u),m(t,o),l=!0,c||(f=[j(t,"mouseenter",e[9]),j(t,"mouseleave",e[6])],c=!0)},p(h,[g]){let y=i;i=_(h),i===y?a[i].p(h,g):($t(),A(a[y],1,1,()=>{a[y]=null}),kt(),r=a[i],r?r.p(h,g):(r=a[i]=d[i](h),r.c()),x(r,1),r.m(n,null)),(!l||g&1)&&ot(n,"pe",h[0].component),h[0].dismissable?p?p.p(h,g):(p=Ve(h),p.c(),p.m(t,u)):p&&(p.d(1),p=null),(!l||g&2)&&(o.value=h[1]),(!l||g&1)&&ot(t,"pe",h[0].pausable)},i(h){l||(x(r),l=!0)},o(h){A(r),l=!1},d(h){h&&E(t),a[i].d(),p&&p.d(),c=!1,K(f)}}}function Ki(e,t,n){let i,{item:r}=t;const s=be(r.initial,{duration:r.duration,easing:at});H(e,s,$=>n(1,i=$));const u=()=>Et.pop(r.id),o=()=>{(i===1||i===0)&&u()};let l=r.initial,c=l,f=!1;const d=()=>{!f&&i!==l&&(s.set(i,{duration:0}),f=!0)},a=()=>{if(f){const $=r.duration,T=$-$*((i-c)/(l-c));s.set(l,{duration:T}).then(o),f=!1}};let _={};const p=($,T="undefined")=>typeof $===T;let h;In(($=document)=>{if(p($.hidden))return;const T=()=>$.hidden?d():a(),R="visibilitychange";$.addEventListener(R,T),h=()=>$.removeEventListener(R,T),T()}),Rn(()=>{p(r.onpop,"function")&&r.onpop(r.id),h&&h()});const y=$=>{$ instanceof KeyboardEvent&&["Enter"," "].includes($.key)&&u()},w=()=>{r.pausable&&d()};return e.$$set=$=>{"item"in $&&n(0,r=$.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(p(r.progress)||n(0,r.next=r.progress,r)),e.$$.dirty&131&&l!==r.next&&(n(7,l=r.next),c=i,f=!1,s.set(l).then(o)),e.$$.dirty&1&&r.component){const{props:$={},sendIdTo:T}=r.component;n(2,_={...$,...T&&{[T]:r.id}})}},[r,i,_,s,u,d,a,l,y,w]}class Vi extends Q{constructor(t){super(),V(this,t,Ki,zi,G,{item:0})}}function Qe(e,t,n){const i=e.slice();return i[5]=t[n],i}function Ze(e,t){let n,i,r,s,u,o,l,c,f=M,d;return i=new Vi({props:{item:t[5]}}),{key:e,first:null,c(){n=v("li"),F(i.$$.fragment),r=C(),b(n,"class",s=Jt(t[5].classes.join(" "))+" svelte-yh90az"),b(n,"style",u=t[1](t[5].theme)),this.first=n},m(a,_){S(a,n,_),U(i,n,null),m(n,r),d=!0},p(a,_){t=a;const p={};_&1&&(p.item=t[5]),i.$set(p),(!d||_&1&&s!==(s=Jt(t[5].classes.join(" "))+" svelte-yh90az"))&&b(n,"class",s),(!d||_&1&&u!==(u=t[1](t[5].theme)))&&b(n,"style",u)},r(){c=n.getBoundingClientRect()},f(){Nn(n),f(),ln(n,c)},a(){f(),f=Tn(n,c,Bi,{duration:200})},i(a){d||(x(i.$$.fragment,a),Y(()=>{l&&l.end(1),o=Me(n,re,t[5].intro),o.start()}),d=!0)},o(a){A(i.$$.fragment,a),o&&o.invalidate(),l=Se(n,fn,{}),d=!1},d(a){a&&E(n),L(i),a&&l&&l.end()}}}function Qi(e){let t,n=[],i=new Map,r,s=e[0];const u=o=>o[5].id;for(let o=0;o<s.length;o+=1){let l=Qe(e,s,o),c=u(l);i.set(c,n[o]=Ze(c,l))}return{c(){t=v("ul");for(let o=0;o<n.length;o+=1)n[o].c();b(t,"class","_toastContainer svelte-yh90az")},m(o,l){S(o,t,l);for(let c=0;c<n.length;c+=1)n[c].m(t,null);r=!0},p(o,[l]){if(l&3){s=o[0],$t();for(let c=0;c<n.length;c+=1)n[c].r();n=Ln(n,l,u,1,o,s,i,t,Un,Ze,null,Qe);for(let c=0;c<n.length;c+=1)n[c].a();kt()}},i(o){if(!r){for(let l=0;l<s.length;l+=1)x(n[l]);r=!0}},o(o){for(let l=0;l<n.length;l+=1)A(n[l]);r=!1},d(o){o&&E(t);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Zi(e,t,n){let i;H(e,Et,l=>n(4,i=l));let{options:r={}}=t,{target:s="default"}=t,u;const o=l=>Object.keys(l).reduce((c,f)=>`${c}${f}:${l[f]};`,"");return e.$$set=l=>{"options"in l&&n(2,r=l.options),"target"in l&&n(3,s=l.target)},e.$$.update=()=>{e.$$.dirty&12&&Et._init(s,r),e.$$.dirty&24&&n(0,u=i.filter(l=>l.target===s))},[u,o,r,s,i]}class Ji extends Q{constructor(t){super(),V(this,t,Zi,Qi,G,{options:2,target:3})}}function tr(e){let t,n,i,r,s,u;return n=new Ji({props:{options:e[2],target:e[1]}}),{c(){t=v("div"),F(n.$$.fragment),b(t,"class",i=Jt(`toast-wrapper-${e[0]}`)+" svelte-83kuhx")},m(o,l){S(o,t,l),U(n,t,null),r=!0,s||(u=Ct(e[3].call(null,t)),s=!0)},p(o,[l]){const c={};l&4&&(c.options=o[2]),l&2&&(c.target=o[1]),n.$set(c),(!r||l&1&&i!==(i=Jt(`toast-wrapper-${o[0]}`)+" svelte-83kuhx"))&&b(t,"class",i)},i(o){r||(x(n.$$.fragment,o),r=!0)},o(o){A(n.$$.fragment,o),r=!1},d(o){o&&E(t),L(n),s=!1,u()}}}function er(e,t,n){const i={duration:1e3,initial:1,next:0,pausable:!0,dismissable:!1,reversed:!1,intro:{x:0},theme:{},classes:[]},r={duration:500,initial:1,next:0,pausable:!1,dismissable:!1,reversed:!0,intro:{y:20,duration:100},theme:{},classes:[]};let s;function u(c){o==1?n(2,s=i):o==2&&n(2,s=r)}let{type:o=1}=t,{target:l=void 0}=t;return e.$$set=c=>{"type"in c&&n(0,o=c.type),"target"in c&&n(1,l=c.target)},[o,l,s,u]}class $e extends Q{constructor(t){super(),V(this,t,er,tr,G,{type:0,target:1})}}function gn(){let e="",t=z(Gn,Xn),n=z(Kn,zn),i=t,r=me(i+n);return{name:e,hp:t,maxhp:i,str:n,gp:r}}const xt=jt(gn());function nr(){xt.set(gn())}function ir(e){let t;return{c(){t=v("div")},m(n,i){S(n,t,i)},p:M,i:M,o:M,d(n){n&&E(t)}}}function rr(e){let t,n,i,r;return{c(){t=v("span"),b(t,"class","icon map-u svelte-15ez2vt"),ot(t,"rejoice",e[1])},m(s,u){S(s,t,u),r=!0},p(s,u){e=s,(!r||u&2)&&ot(t,"rejoice",e[1])},i(s){r||(Y(()=>{i&&i.end(1),n=Me(t,re,e[2]),n.start()}),r=!0)},o(s){n&&n.invalidate(),i=Se(t,e[4],{}),r=!1},d(s){s&&E(t),s&&i&&i.end()}}}function sr(e){let t;return{c(){t=v("div")},m(n,i){S(n,t,i)},p:M,i:M,o:M,d(n){n&&E(t)}}}function or(e){let t,n,i,r;return{c(){t=v("span"),b(t,"class","icon dragon svelte-15ez2vt"),ot(t,"rejoice",e[0])},m(s,u){S(s,t,u),r=!0},p(s,u){e=s,(!r||u&1)&&ot(t,"rejoice",e[0])},i(s){r||(Y(()=>{i&&i.end(1),n=Me(t,re,e[3]),n.start()}),r=!0)},o(s){n&&n.invalidate(),i=Se(t,e[5],{}),r=!1},d(s){s&&E(t),s&&i&&i.end()}}}function lr(e){let t,n,i,r,s,u,o,l,c,f,d,a,_,p,h,g;const y=[rr,ir],w=[];function $(k,N){return k[0]?1:0}i=$(e),r=w[i]=y[i](e),o=new $e({props:{target:"user",type:2}}),d=new $e({props:{target:"enc",type:2}});const T=[or,sr],R=[];function I(k,N){return k[1]?1:0}return p=I(e),h=R[p]=T[p](e),{c(){t=v("div"),n=v("div"),r.c(),s=C(),u=v("div"),F(o.$$.fragment),l=C(),c=v("div"),f=v("div"),F(d.$$.fragment),a=C(),_=v("div"),h.c(),b(n,"class","col user img svelte-15ez2vt"),b(u,"class","col toast"),b(t,"class","row"),b(f,"class","col toast"),b(_,"class","col enc img svelte-15ez2vt"),b(c,"class","row")},m(k,N){S(k,t,N),m(t,n),w[i].m(n,null),m(t,s),m(t,u),U(o,u,null),S(k,l,N),S(k,c,N),m(c,f),U(d,f,null),m(c,a),m(c,_),R[p].m(_,null),g=!0},p(k,[N]){let P=i;i=$(k),i===P?w[i].p(k,N):($t(),A(w[P],1,1,()=>{w[P]=null}),kt(),r=w[i],r?r.p(k,N):(r=w[i]=y[i](k),r.c()),x(r,1),r.m(n,null));let _t=p;p=I(k),p===_t?R[p].p(k,N):($t(),A(R[_t],1,1,()=>{R[_t]=null}),kt(),h=R[p],h?h.p(k,N):(h=R[p]=T[p](k),h.c()),x(h,1),h.m(_,null))},i(k){g||(x(r),x(o.$$.fragment,k),x(d.$$.fragment,k),x(h),g=!0)},o(k){A(r),A(o.$$.fragment,k),A(d.$$.fragment,k),A(h),g=!1},d(k){k&&E(t),w[i].d(),L(o),k&&E(l),k&&E(c),L(d),R[p].d()}}}function cr(e,t,n){let i,r;H(e,xt,a=>n(6,i=a)),H(e,D,a=>n(7,r=a));const s={x:40,duration:200},u={x:-40,duration:200},o={amount:40,duration:_e};function l(a){return f?Xe(a,o):re(a,s)}function c(a){return d?Xe(a,o):void 0}let f,d;return e.$$.update=()=>{e.$$.dirty&128&&n(0,f=r.hp<=0),e.$$.dirty&64&&n(1,d=i.hp<=0)},[f,d,s,u,l,c,i,r]}class ur extends Q{constructor(t){super(),V(this,t,cr,lr,G,{})}}function fr(e){let t;return{c(){t=v("div")},m(n,i){S(n,t,i)},p:M,d(n){n&&E(t)}}}function ar(e){let t;return{c(){t=v("progress"),t.value=e[2],b(t,"class","svelte-6in6vb")},m(n,i){S(n,t,i)},p(n,i){i&4&&(t.value=n[2])},d(n){n&&E(t)}}}function dr(e){let t;return{c(){t=v("div")},m(n,i){S(n,t,i)},p:M,d(n){n&&E(t)}}}function pr(e){let t;return{c(){t=v("progress"),t.value=e[3],b(t,"class","svelte-6in6vb")},m(n,i){S(n,t,i)},p(n,i){i&8&&(t.value=n[3])},d(n){n&&E(t)}}}function _r(e){let t,n,i;function r(f,d){return f[1].hp>0?ar:fr}let s=r(e),u=s(e);function o(f,d){return f[0].hp>0?pr:dr}let l=o(e),c=l(e);return{c(){t=v("div"),u.c(),n=C(),i=v("div"),c.c(),b(t,"class","col user"),b(i,"class","col enc")},m(f,d){S(f,t,d),u.m(t,null),S(f,n,d),S(f,i,d),c.m(i,null)},p(f,[d]){s===(s=r(f))&&u?u.p(f,d):(u.d(1),u=s(f),u&&(u.c(),u.m(t,null))),l===(l=o(f))&&c?c.p(f,d):(c.d(1),c=l(f),c&&(c.c(),c.m(i,null)))},i:M,o:M,d(f){f&&E(t),u.d(),f&&E(n),f&&E(i),c.d()}}}function mr(e,t,n){let i,r,s,u;H(e,xt,c=>n(0,i=c)),H(e,D,c=>n(1,r=c));const o=be(0,{duration:Be,easing:ne});H(e,o,c=>n(2,s=c));const l=be(0,{duration:Be,easing:ne});return H(e,l,c=>n(3,u=c)),e.$$.update=()=>{e.$$.dirty&2&&r.hp&&o.set(r.hp/r.maxhp),e.$$.dirty&1&&i.hp&&l.set(i.hp/i.maxhp)},[i,r,s,u,o,l]}class hr extends Q{constructor(t){super(),V(this,t,mr,_r,G,{})}}function gr(e,t=void 0){let n=t?{target:t}:void 0;Et.push(e,n)}function vr(e,t=void 0){let n={initial:0,next:0};t&&(n.target=t),Et.push(e,n)}function yr(){Et.pop(0)}const ut={show:gr,persist:vr,clear:yr};function br(e){let t,n,i;return{c(){t=v("button"),t.textContent="Reset"},m(r,s){S(r,t,s),n||(i=j(t,"click",oi),n=!0)},p:M,d(r){r&&E(t),n=!1,i()}}}function $r(e){let t,n,i;return{c(){t=v("button"),t.textContent="Fight"},m(r,s){S(r,t,s),n||(i=j(t,"click",e[3]),n=!0)},p:M,d(r){r&&E(t),n=!1,i()}}}function kr(e){let t,n,i;return{c(){t=v("button"),t.textContent="Continue"},m(r,s){S(r,t,s),n||(i=j(t,"click",qt),n=!0)},p:M,d(r){r&&E(t),n=!1,i()}}}function wr(e){let t,n,i,r,s,u,o,l,c,f,d,a,_;r=new ur({}),o=new hr({});function p(y,w){if(y[1])return kr;if(y[0])return $r;if(y[2])return br}let h=p(e),g=h&&h(e);return{c(){t=v("div"),n=v("div"),i=v("div"),F(r.$$.fragment),s=C(),u=v("div"),F(o.$$.fragment),l=C(),c=v("div"),g&&g.c(),b(i,"class","row imgs svelte-j2ojq6"),b(u,"class","row info svelte-j2ojq6"),b(n,"class","view field svelte-j2ojq6"),b(c,"class","ctrls")},m(y,w){S(y,t,w),m(t,n),m(n,i),U(r,i,null),m(n,s),m(n,u),U(o,u,null),m(t,l),m(t,c),g&&g.m(c,null),d=!0,a||(_=Ct(e[4].call(null,n)),a=!0)},p(y,[w]){h===(h=p(y))&&g?g.p(y,w):(g&&g.d(1),g=h&&h(y),g&&(g.c(),g.m(c,null)))},i(y){d||(x(r.$$.fragment,y),x(o.$$.fragment,y),Y(()=>{f||(f=nt(t,it,{},!0)),f.run(1)}),d=!0)},o(y){A(r.$$.fragment,y),A(o.$$.fragment,y),f||(f=nt(t,it,{},!1)),f.run(0),d=!1},d(y){y&&E(t),L(r),L(o),g&&g.d(),y&&f&&f.end(),a=!1,_()}}}function Er(e,t,n){let i,r;H(e,xt,h=>n(5,i=h)),H(e,D,h=>n(6,r=h));function s(){n(0,a=!1),l(r.str),i.hp<=0?c():u()}function u(){vt(z(400,600),()=>{o(i.str),r.hp<=0?f():n(0,a=!0)})}function o(h){let g=me(h);yt(D,r.hp-=g,r),ut.show(`${g}`,"user")}function l(h){let g=me(h);yt(xt,i.hp-=g,i),ut.show(`${g}`,"enc")}function c(){vt(_e,()=>{ut.persist(`Got ${i.gp} gold!`),yt(D,r.gp+=i.gp,r),n(1,_=!0)})}function f(){vt(_e,()=>{ut.persist("Game over"),n(2,p=!0)})}function d(h){nr(),n(0,a=!1),n(1,_=!1),n(2,p=!1),vt(500,()=>{n(0,a=!0)})}let a,_,p;return[a,_,p,s,d]}class Cr extends Q{constructor(t){super(),V(this,t,Er,wr,G,{})}}function Je(e){let t,n,i,r=e[0].innCost+"",s,u;return{c(){t=v("p"),t.textContent="Inn",n=C(),i=v("p"),s=Z(r),u=Z(" gold per night")},m(o,l){S(o,t,l),S(o,n,l),S(o,i,l),m(i,s),m(i,u)},p(o,l){l&1&&r!==(r=o[0].innCost+"")&&lt(s,r)},d(o){o&&E(t),o&&E(n),o&&E(i)}}}function Mr(e){let t,n,i,r,s,u,o,l,c,f,d,a=e[0]&&Je(e);return{c(){t=v("div"),n=v("div"),a&&a.c(),i=C(),r=v("div"),s=v("button"),s.textContent="Rest",u=C(),o=v("button"),o.textContent="Leave",b(n,"class","view col"),b(r,"class","ctrls")},m(_,p){S(_,t,p),m(t,n),a&&a.m(n,null),m(t,i),m(t,r),m(r,s),m(r,u),m(r,o),c=!0,f||(d=[Ct(e[2].call(null,n)),j(s,"click",e[1]),j(o,"click",qt)],f=!0)},p(_,[p]){_[0]?a?a.p(_,p):(a=Je(_),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i(_){c||(Y(()=>{l||(l=nt(t,it,{},!0)),l.run(1)}),c=!0)},o(_){l||(l=nt(t,it,{},!1)),l.run(0),c=!1},d(_){_&&E(t),a&&a.d(),_&&l&&l.end(),f=!1,K(d)}}}function Sr(e,t,n){let i;H(e,D,o=>n(3,i=o));function r(){i.gp>=u.innCost?(ut.show("HP restored"),yt(D,i.gp-=u.innCost,i),yt(D,i.hp=i.maxhp,i),ci(2e3,qt)):ut.show("Not enough gold")}function s(o){let l=ct.location().abs;n(0,u=Oi(l.x,l.y))}let u;return[u,r,s]}class Tr extends Q{constructor(t){super(),V(this,t,Sr,Mr,G,{})}}function Nr(e){let t,n;return t=new Tr({}),{c(){F(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(x(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){L(t,i)}}}function Ir(e){let t,n;return t=new Cr({}),{c(){F(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(x(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){L(t,i)}}}function Rr(e){let t,n;return t=new Di({}),{c(){F(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(x(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){L(t,i)}}}function xr(e){let t,n;return t=new Pi({}),{c(){F(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(x(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){L(t,i)}}}function Ar(e){let t,n;return t=new gi({}),{c(){F(t.$$.fragment)},m(i,r){U(t,i,r),n=!0},i(i){n||(x(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){L(t,i)}}}function Or(e){let t,n,i,r,s,u,o,l;n=new $e({});const c=[Ar,xr,Rr,Ir,Nr],f=[];function d(a,_){return a[0]==J.TITLE?0:a[0]==J.MAP?1:a[0]==J.MENU?2:a[0]==J.ENC?3:a[0]==J.CITY?4:-1}return~(r=d(e))&&(s=f[r]=c[r](e)),{c(){t=v("main"),F(n.$$.fragment),i=C(),s&&s.c()},m(a,_){S(a,t,_),U(n,t,null),m(t,i),~r&&f[r].m(t,null),u=!0,o||(l=Ct(e[1].call(null,t)),o=!0)},p(a,[_]){let p=r;r=d(a),r!==p&&(s&&($t(),A(f[p],1,1,()=>{f[p]=null}),kt()),~r?(s=f[r],s||(s=f[r]=c[r](a),s.c()),x(s,1),s.m(t,null)):s=null)},i(a){u||(x(n.$$.fragment,a),x(s),u=!0)},o(a){A(n.$$.fragment,a),A(s),u=!1},d(a){a&&E(t),L(n),~r&&f[r].d(),o=!1,l()}}}function jr(e,t,n){function i(s){pt.subscribe(u=>{n(0,r=void 0),ut.clear(),vt(un,()=>{n(0,r=u)})})}let r;return[r,i]}class qr extends Q{constructor(t){super(),V(this,t,jr,Or,G,{})}}new qr({target:document.getElementById("app")});
