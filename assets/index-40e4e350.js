(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function j(){}const bt=e=>e;function Ue(e,t){for(const n in t)e[n]=t[n];return e}function Wn(e){return e()}function $n(){return Object.create(null)}function W(e){e.forEach(Wn)}function yt(e){return typeof e=="function"}function Q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function fi(e){return Object.keys(e).length===0}function ai(e,...t){if(e==null)return j;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Y(e,t,n){e.$$.on_destroy.push(ai(t,n))}function be(e){return e??""}function dt(e,t,n){return e.set(n),t}function kt(e){return e&&yt(e.destroy)?e.destroy:j}const Kn=typeof window<"u";let Bt=Kn?()=>window.performance.now():()=>Date.now(),Ge=Kn?e=>requestAnimationFrame(e):j;const It=new Set;function Yn(e){It.forEach(t=>{t.c(e)||(It.delete(t),t.f())}),It.size!==0&&Ge(Yn)}function Wt(e){let t;return It.size===0&&Ge(Yn),{promise:new Promise(n=>{It.add(t={c:e,f:n})}),abort(){It.delete(t)}}}function p(e,t){e.appendChild(t)}function Gn(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function di(e){const t=h("style");return pi(Gn(e),t),t.sheet}function pi(e,t){return p(e.head||e,t),t.sheet}function N(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e){return document.createElement(e)}function _i(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function U(e){return document.createTextNode(e)}function E(){return U(" ")}function Xe(){return U("")}function x(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function y(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function mi(e){return Array.from(e.childNodes)}function nt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function En(e,t){e.value=t??""}function lt(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function tt(e,t,n){e.classList[n?"add":"remove"](t)}function Xn(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,i,t),l}class hi{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=_i(n.nodeName):this.e=h(n.nodeName),this.t=n,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)N(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(S)}}function Cn(e,t){return new e(t)}const ye=new Map;let ke=0;function gi(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function vi(e,t){const n={stylesheet:di(t),rules:{}};return ye.set(e,n),n}function Dt(e,t,n,i,l,s,c,r=0){const o=16.666/i;let u=`{
`;for(let v=0;v<=1;v+=o){const k=t+(n-t)*s(v);u+=v*100+`%{${c(k,1-k)}}
`}const a=u+`100% {${c(n,1-n)}}
}`,d=`__svelte_${gi(a)}_${r}`,f=Gn(e),{stylesheet:_,rules:m}=ye.get(f)||vi(f,e);m[d]||(m[d]=!0,_.insertRule(`@keyframes ${d} ${a}`,_.cssRules.length));const b=e.style.animation||"";return e.style.animation=`${b?`${b}, `:""}${d} ${i}ms linear ${l}ms 1 both`,ke+=1,d}function Ft(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),l=n.length-i.length;l&&(e.style.animation=i.join(", "),ke-=l,ke||bi())}function bi(){Ge(()=>{ke||(ye.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&S(t)}),ye.clear())})}function yi(e,t,n,i){if(!t)return j;const l=e.getBoundingClientRect();if(t.left===l.left&&t.right===l.right&&t.top===l.top&&t.bottom===l.bottom)return j;const{delay:s=0,duration:c=300,easing:r=bt,start:o=Bt()+s,end:u=o+c,tick:a=j,css:d}=n(e,{from:t,to:l},i);let f=!0,_=!1,m;function b(){d&&(m=Dt(e,0,1,c,s,r,d)),s||(_=!0)}function v(){d&&Ft(e,m),f=!1}return Wt(k=>{if(!_&&k>=o&&(_=!0),_&&k>=u&&(a(1,0),v()),!f)return!1;if(_){const w=k-o,g=0+1*r(w/c);a(g,1-g)}return!0}),b(),a(0,1),v}function ki(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,l=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,Vn(e,l)}}function Vn(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),l=i.transform==="none"?"":i.transform;e.style.transform=`${l} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Ht;function Ut(e){Ht=e}function Ve(){if(!Ht)throw new Error("Function called outside component initialization");return Ht}function wi(e){Ve().$$.on_mount.push(e)}function $i(e){Ve().$$.on_destroy.push(e)}function Ei(){const e=Ve();return(t,n,{cancelable:i=!1}={})=>{const l=e.$$.callbacks[t];if(l){const s=Xn(t,n,{cancelable:i});return l.slice().forEach(c=>{c.call(e,s)}),!s.defaultPrevented}return!0}}const Pt=[],Mn=[],me=[],Sn=[],Ci=Promise.resolve();let De=!1;function Mi(){De||(De=!0,Ci.then(Qn))}function V(e){me.push(e)}const Pe=new Set;let de=0;function Qn(){const e=Ht;do{for(;de<Pt.length;){const t=Pt[de];de++,Ut(t),Si(t.$$)}for(Ut(null),Pt.length=0,de=0;Mn.length;)Mn.pop()();for(let t=0;t<me.length;t+=1){const n=me[t];Pe.has(n)||(Pe.add(n),n())}me.length=0}while(Pt.length);for(;Sn.length;)Sn.pop()();De=!1,Pe.clear(),Ut(e)}function Si(e){if(e.fragment!==null){e.update(),W(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(V)}}let Lt;function Qe(){return Lt||(Lt=Promise.resolve(),Lt.then(()=>{Lt=null})),Lt}function ht(e,t,n){e.dispatchEvent(Xn(`${t?"intro":"outro"}${n}`))}const he=new Set;let st;function gt(){st={r:0,c:[],p:st}}function vt(){st.r||W(st.c),st=st.p}function I(e,t){e&&e.i&&(he.delete(e),e.i(t))}function R(e,t,n,i){if(e&&e.o){if(he.has(e))return;he.add(e),st.c.push(()=>{he.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const Ze={duration:0};function ze(e,t,n){const i={direction:"in"};let l=t(e,n,i),s=!1,c,r,o=0;function u(){c&&Ft(e,c)}function a(){const{delay:f=0,duration:_=300,easing:m=bt,tick:b=j,css:v}=l||Ze;v&&(c=Dt(e,0,1,_,f,m,v,o++)),b(0,1);const k=Bt()+f,w=k+_;r&&r.abort(),s=!0,V(()=>ht(e,!0,"start")),r=Wt(g=>{if(s){if(g>=w)return b(1,0),ht(e,!0,"end"),u(),s=!1;if(g>=k){const $=m((g-k)/_);b($,1-$)}}return s})}let d=!1;return{start(){d||(d=!0,Ft(e),yt(l)?(l=l(i),Qe().then(a)):a())},invalidate(){d=!1},end(){s&&(u(),s=!1)}}}function Je(e,t,n){const i={direction:"out"};let l=t(e,n,i),s=!0,c;const r=st;r.r+=1;function o(){const{delay:u=0,duration:a=300,easing:d=bt,tick:f=j,css:_}=l||Ze;_&&(c=Dt(e,1,0,a,u,d,_));const m=Bt()+u,b=m+a;V(()=>ht(e,!1,"start")),Wt(v=>{if(s){if(v>=b)return f(0,1),ht(e,!1,"end"),--r.r||W(r.c),!1;if(v>=m){const k=d((v-m)/a);f(1-k,k)}}return s})}return yt(l)?Qe().then(()=>{l=l(i),o()}):o(),{end(u){u&&l.tick&&l.tick(1,0),s&&(c&&Ft(e,c),s=!1)}}}function rt(e,t,n,i){const l={direction:"both"};let s=t(e,n,l),c=i?0:1,r=null,o=null,u=null;function a(){u&&Ft(e,u)}function d(_,m){const b=_.b-c;return m*=Math.abs(b),{a:c,b:_.b,d:b,duration:m,start:_.start,end:_.start+m,group:_.group}}function f(_){const{delay:m=0,duration:b=300,easing:v=bt,tick:k=j,css:w}=s||Ze,g={start:Bt()+m,b:_};_||(g.group=st,st.r+=1),r||o?o=g:(w&&(a(),u=Dt(e,c,_,b,m,v,w)),_&&k(0,1),r=d(g,b),V(()=>ht(e,_,"start")),Wt($=>{if(o&&$>o.start&&(r=d(o,b),o=null,ht(e,r.b,"start"),w&&(a(),u=Dt(e,c,r.b,r.duration,0,v,s.css))),r){if($>=r.end)k(c=r.b,1-c),ht(e,r.b,"end"),o||(r.b?a():--r.group.r||W(r.group.c)),r=null;else if($>=r.start){const T=$-r.start;c=r.a+r.d*v(T/r.duration),k(c,1-c)}}return!!(r||o)}))}return{run(_){yt(s)?Qe().then(()=>{s=s(l),f(_)}):f(_)},end(){a(),r=o=null}}}function ji(e,t){R(e,1,1,()=>{t.delete(e.key)})}function Ti(e,t){e.f(),ji(e,t)}function Ni(e,t,n,i,l,s,c,r,o,u,a,d){let f=e.length,_=s.length,m=f;const b={};for(;m--;)b[e[m].key]=m;const v=[],k=new Map,w=new Map;for(m=_;m--;){const M=d(l,s,m),O=n(M);let C=c.get(O);C?i&&C.p(M,t):(C=u(O,M),C.c()),k.set(O,v[m]=C),O in b&&w.set(O,Math.abs(m-b[O]))}const g=new Set,$=new Set;function T(M){I(M,1),M.m(r,a),c.set(M.key,M),a=M.first,_--}for(;f&&_;){const M=v[_-1],O=e[f-1],C=M.key,et=O.key;M===O?(a=M.first,f--,_--):k.has(et)?!c.has(C)||g.has(C)?T(M):$.has(et)?f--:w.get(C)>w.get(et)?($.add(C),T(M)):(g.add(et),f--):(o(O,c),f--)}for(;f--;){const M=e[f];k.has(M.key)||o(M,c)}for(;_;)T(v[_-1]);return v}function Ii(e,t){const n={},i={},l={$$scope:1};let s=e.length;for(;s--;){const c=e[s],r=t[s];if(r){for(const o in c)o in r||(i[o]=1);for(const o in r)l[o]||(n[o]=r[o],l[o]=1);e[s]=r}else for(const o in c)l[o]=1}for(const c in i)c in n||(n[c]=void 0);return n}function xi(e){return typeof e=="object"&&e!==null?e:{}}function q(e){e&&e.c()}function F(e,t,n,i){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),i||V(()=>{const c=e.$$.on_mount.map(Wn).filter(yt);e.$$.on_destroy?e.$$.on_destroy.push(...c):W(c),e.$$.on_mount=[]}),s.forEach(V)}function H(e,t){const n=e.$$;n.fragment!==null&&(W(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ri(e,t){e.$$.dirty[0]===-1&&(Pt.push(e),Mi(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Z(e,t,n,i,l,s,c,r=[-1]){const o=Ht;Ut(e);const u=e.$$={fragment:null,ctx:[],props:s,update:j,not_equal:l,bound:$n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:$n(),dirty:r,skip_bound:!1,root:t.target||o.$$.root};c&&c(u.root);let a=!1;if(u.ctx=n?n(e,t.props||{},(d,f,..._)=>{const m=_.length?_[0]:f;return u.ctx&&l(u.ctx[d],u.ctx[d]=m)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](m),a&&Ri(e,d)),f}):[],u.update(),a=!0,W(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const d=mi(t.target);u.fragment&&u.fragment.l(d),d.forEach(S)}else u.fragment&&u.fragment.c();t.intro&&I(e.$$.fragment),F(e,t.target,t.anchor,t.customElement),Qn()}Ut(o)}class z{$destroy(){H(this,1),this.$destroy=j}$on(t,n){if(!yt(n))return j;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(t){this.$$set&&!fi(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Zn=20,Ai=50,Oi=4,Li=4,Pi=10,Ui=2,Di=2,Fi=50,jn=200,Fe=500,zn=2,Hi=1e3,qi=2,Bi=7,Wi=9,Ki=2,Yi=2,Tn=200,Nn=10,Jn=200,Gi=.1,Xi=5,Vi=100;function B(e,t){return e??(e=0),t??(t=0),Math.floor(Math.random()*(e-t))+t}function ut(e,t){setTimeout(t,e)}function xt(e,t){t??(t=Gi);let n=Math.ceil(Math.abs(e*t));return B(e+n,e-n)}function pe(e){return new Intl.NumberFormat().format(e)}const Nt=[];function Kt(e,t=j){let n;const i=new Set;function l(r){if(Q(e,r)&&(e=r,n)){const o=!Nt.length;for(const u of i)u[1](),Nt.push(u,e);if(o){for(let u=0;u<Nt.length;u+=2)Nt[u][0](Nt[u+1]);Nt.length=0}}}function s(r){l(r(e))}function c(r,o=j){const u=[r,o];return i.add(u),i.size===1&&(n=t(l)||j),r(e),()=>{i.delete(u),i.size===0&&(n(),n=null)}}return{set:l,update:s,subscribe:c}}function Qi(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function we(e){const t=e-1;return t*t*t+1}function In(e,{delay:t=0,duration:n=400,easing:i=Qi,amount:l=5,opacity:s=0}={}){const c=getComputedStyle(e),r=+c.opacity,o=c.filter==="none"?"":c.filter,u=r*(1-s);return{delay:t,duration:n,easing:i,css:(a,d)=>`opacity: ${r-u*d}; filter: ${o} blur(${d*l}px);`}}function ti(e,{delay:t=0,duration:n=400,easing:i=bt}={}){const l=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*l}`}}function Ee(e,{delay:t=0,duration:n=400,easing:i=we,x:l=0,y:s=0,opacity:c=0}={}){const r=getComputedStyle(e),o=+r.opacity,u=r.transform==="none"?"":r.transform,a=o*(1-c);return{delay:t,duration:n,easing:i,css:(d,f)=>`
			transform: ${u} translate(${(1-d)*l}px, ${(1-d)*s}px);
			opacity: ${o-a*f}`}}const it={TITLE:0,MAP:1,MENU:2,ENC:3,CITY:4},wt=Kt(it.TITLE);function ot(){wt.set(it.MAP)}function ei(){wt.set(it.MENU)}function Zi(){wt.set(it.ENC)}function Ce(){wt.set(it.TITLE)}function zi(){wt.set(it.CITY)}function Ji(e,t){wt.set(void 0),ut(e,t)}function ct(e){return ti(e,{duration:Jn})}let _e;const tl=new Uint8Array(16);function el(){if(!_e&&(_e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _e(tl)}const P=[];for(let e=0;e<256;++e)P.push((e+256).toString(16).slice(1));function nl(e,t=0){return(P[e[t+0]]+P[e[t+1]]+P[e[t+2]]+P[e[t+3]]+"-"+P[e[t+4]]+P[e[t+5]]+"-"+P[e[t+6]]+P[e[t+7]]+"-"+P[e[t+8]]+P[e[t+9]]+"-"+P[e[t+10]]+P[e[t+11]]+P[e[t+12]]+P[e[t+13]]+P[e[t+14]]+P[e[t+15]]).toLowerCase()}const il=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xn={randomUUID:il};function ll(e,t,n){if(xn.randomUUID&&!t&&!e)return xn.randomUUID();e=e||{};const i=e.random||(e.rng||el)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let l=0;l<16;++l)t[n+l]=i[l];return t}return nl(i)}function ni(){let e=Zn,t=B(e);e-=t;let n=B(e);return e-=n,{hp:t,str:n,dex:e}}function ii(){let e="";var t=ni();let n=t.hp+Ai,i=t.str+Oi,l=t.dex+Li,s=n,c=0,r=0,o=0,u=1,a=xt((s+t.str+t.dex)*2);return{name:e,hp:n,maxhp:s,str:i,dex:l,steps:c,gp:r,lvl:u,xp:o,next:a}}function sl(e){let t=ni();e.maxhp+=t.hp,e.hp=e.maxhp,e.str+=t.str,e.dex+=t.dex,e.next+=xt((e.maxhp+e.str+e.dex)*2),e.lvl++,D.set(e)}function rl(){D.set(ii())}const D=Kt(ii());function ol(e){let t,n,i,l,s,c,r,o,u,a,d,f,_,m,b;return{c(){t=h("div"),n=h("div"),i=h("h1"),i.textContent="Relic",l=E(),s=h("p"),s.textContent="by elyktc",c=E(),r=h("div"),o=h("input"),u=E(),a=h("div"),d=h("button"),d.textContent="Start",y(i,"class","svelte-lcr9aa"),lt(i,"margin-right","50px"),lt(s,"margin-left","100px"),y(o,"maxlength","8"),y(o,"class","svelte-lcr9aa"),lt(o,"display","none"),y(r,"class","row"),y(n,"class","view col svelte-lcr9aa"),y(a,"class","ctrls")},m(v,k){N(v,t,k),p(t,n),p(n,i),p(n,l),p(n,s),p(n,c),p(n,r),p(r,o),En(o,e[0].name),p(t,u),p(t,a),p(a,d),_=!0,m||(b=[x(window,"keydown",e[1]),x(o,"input",e[3]),kt(e[2].call(null,d)),x(d,"click",ot)],m=!0)},p(v,[k]){k&1&&o.value!==v[0].name&&En(o,v[0].name)},i(v){_||(V(()=>{f||(f=rt(t,ct,{},!0)),f.run(1)}),_=!0)},o(v){f||(f=rt(t,ct,{},!1)),f.run(0),_=!1},d(v){v&&S(t),v&&f&&f.end(),m=!1,W(b)}}}function cl(e,t,n){let i;Y(e,D,r=>n(0,i=r));function l(r){switch(r.key){case" ":ot();break}}function s(r){rl(),r.focus()}function c(){i.name=this.value,D.set(i)}return[i,l,s,c]}class ul extends z{constructor(t){super(),Z(this,t,cl,ol,Q,{})}}function fl(e){let t,n,i,l,s,c,r,o,u,a,d,f,_,m,b,v,k,w,g,$,T,M,O;return{c(){t=h("div"),n=h("div"),i=h("button"),i.textContent="NW",l=E(),s=h("button"),s.textContent="N",c=E(),r=h("button"),r.textContent="NE",o=E(),u=h("div"),a=h("button"),a.textContent="W",d=E(),f=h("button"),f.textContent="Menu",_=E(),m=h("button"),m.textContent="E",b=E(),v=h("div"),k=h("button"),k.textContent="SW",w=E(),g=h("button"),g.textContent="S",$=E(),T=h("button"),T.textContent="SE",y(t,"class","ctrls")},m(C,et){N(C,t,et),p(t,n),p(n,i),p(n,l),p(n,s),p(n,c),p(n,r),p(t,o),p(t,u),p(u,a),p(u,d),p(u,f),p(u,_),p(u,m),p(t,b),p(t,v),p(v,k),p(v,w),p(v,g),p(v,$),p(v,T),M||(O=[x(window,"keydown",e[8]),x(i,"click",e[0]),x(s,"click",e[1]),x(r,"click",e[2]),x(a,"click",e[3]),x(f,"click",ei),x(m,"click",e[4]),x(k,"click",e[5]),x(g,"click",e[6]),x(T,"click",e[7])],M=!0)},p:j,i:j,o:j,d(C){C&&S(t),M=!1,W(O)}}}function al(e){const t=Ei(),n=()=>t("move",{x:-1,y:-1}),i=()=>t("move",{x:-1,y:0}),l=()=>t("move",{x:-1,y:1}),s=()=>t("move",{x:0,y:-1}),c=()=>t("move",{x:0,y:1}),r=()=>t("move",{x:1,y:-1}),o=()=>t("move",{x:1,y:0}),u=()=>t("move",{x:1,y:1});function a(d){switch(d.key){case"x":ei();break;case"q":n();break;case"w":i();break;case"e":l();break;case"a":s();break;case"d":c();break;case"z":r();break;case"s":o();break;case"c":u();break}}return[n,i,l,s,c,r,o,u,a]}class dl extends z{constructor(t){super(),Z(this,t,al,fl,Q,{})}}let A,G,X,Me,Se,Rt=!0,tn=Wi,Rn=Ki,He=0,en=0;const pl="u",nn="f",ge="p",ln="t",li="w",$e="c";function si(e,t,n){e=Math.max(e,1),A=Rt?[]:A??[];let i=t??Math.floor(e/2),l=n??Math.floor(e/2);G=i,X=l,Rt&&(Me=G,Se=X,He=0,en=0),qe(i,l,Be.CITY);for(let s=1;s<e;s++){let c=s%2==0?s:-s;i+=c,l+=c,qe(i,l)}A=ri(!0,e,t,n)}function _l(e,t,n,i){if(!e)return e;i??(i=tn);let l=Math.floor(i/2);t??(t=l),n??(n=l);let s=[];for(let c=0;c<i;c++)for(let r=0;r<i;r++){let o=t-l+c,u=n-l+r,a=(e[o]&&e[o][u])??nn;s[c]??(s[c]=[]),s[c][r]=a}return s[l][l]=pl,s}function ml(){let e=oi();if(G<e&&(A.splice(0,0,[]),Me++,G=e),X<e){let t=ci();for(let n=0;n<t;n++)A[n].splice(0,0,void 0);Se++,X=e}}function hl(e){return[...e.map(t=>[...t])]}function ri(e,t,n,i){var d;if(!A)return A;t=t??tn,n=n??G,i=i??X;let l=hl(A),s=ci(),c=vl(),r=Math.min(t??s,s),o=Math.min(t??c,c),u=Math.max((n??0)-Math.floor(r/2),0),a=Math.max((i??0)-Math.floor(o/2),0);for(let f=0;f<r;f++)for(let _=0;_<o;_++){let m=u+f,b=a+_;l[m]??(l[m]=[]);let v=e?je(m,b):nn;(d=l[m])[b]??(d[b]=v)}return l}function qe(e,t,n){var i;return e??(e=G),t??(t=X),A??(A=[]),A[e]??(A[e]=[]),(i=A[e])[t]??(i[t]=n??je(e,t)),n}function je(e,t){if(e??(e=G),t??(t=X),A&&A[e]&&A[e][t])return A[e][t];let n;if(B(Tn)==1&&B(Tn)<He++)n=$e,He=0;else{let i=gl(e,t),l=B(i.length+1);if(l>=i.length){let s=[ge,ln];l=B(s.length+Yi),n=l>=s.length?ge:s[l]}else n=i[l]}return Rt&&(n==$e||n==li)&&(n=ge),Rt||en++,n}function gl(e,t){let n=[];for(let i=e-1;i<=e+1;i++)for(let l=t-1;l<=t+1;l++)A[i]&&A[i][l]&&A[i][l]!=$e&&n.push(A[i][l]);return n}function oi(){return je()==ln?Math.floor(Rn/2):Rn}function ci(e){return e??(e=A??[]),e.length}function vl(e){e??(e=A??[]);let t=e.map(n=>n.length).sort((n,i)=>n-i);return t[t.length-1]}function bl(e){if(G+=e.x,X+=e.y,ml(),qe()==li)return G-=e.x,X-=e.y,!1;{let n=oi();n>0&&si(n*2+1,G,X)}return!0}function yl(){let e=ri(!1);return _l(e,G,X,tn)}function kl(){let e=Math.abs(G-Me),t=Math.abs(X-Se);return Math.ceil(Math.hypot(e,t))}function wl(){return en}function $l(){return{x:G,y:X,abs:{x:G-Me,y:X-Se},terrain:je(),distance:kl()}}function El(){Rt=!0,si(Bi),Rt=!1}const Be={FOG:nn,PLAIN:ge,FOREST:ln,CITY:$e},pt={miniMap:yl,location:$l,move:bl,getExplored:wl};let ve=new Map;function Cl(){let e=ll().substring(0,8),t=B(Xi,Vi);return{name:e,innCost:t}}function Ml(e,t){let n=`${e}.${t}`;return ve.has(n)||ve.set(n,Cl()),ve.get(n)}function Sl(){ve.clear()}function jl(e){let t,n,i,l,s,c,r,o;return l=new dl({}),l.$on("move",e[3]),{c(){t=h("div"),n=h("div"),i=E(),q(l.$$.fragment),y(n,"class","view field svelte-1lhh3c0")},m(u,a){N(u,t,a),p(t,n),n.innerHTML=e[0],p(t,i),F(l,t,null),c=!0,r||(o=kt(e[2].call(null,n)),r=!0)},p(u,[a]){(!c||a&1)&&(n.innerHTML=u[0])},i(u){c||(I(l.$$.fragment,u),V(()=>{s||(s=rt(t,ct,{},!0)),s.run(1)}),c=!0)},o(u){R(l.$$.fragment,u),s||(s=rt(t,ct,{},!1)),s.run(0),c=!1},d(u){u&&S(t),H(l),u&&s&&s.end(),r=!1,o()}}}function Tl(e){return`<span class="icon map-${e}"></span>`}function Nl(e,t,n){let i;Y(e,D,a=>n(4,i=a));function l(a){n(0,o=a.map(d=>d.map(Tl).join("")).join("<br/>"))}function s(){return pt.location().terrain==Be.FOREST?Math.ceil(Nn/2):Nn}function c(a){pt.move(a)&&(dt(D,i.steps++,i),l(pt.miniMap()),pt.location().terrain==Be.CITY?zi():B(s())==1&&Zi())}function r(a){i.steps||(El(),Sl()),l(pt.miniMap())}let o="";return[o,c,r,a=>c(a.detail)]}let Il=class extends z{constructor(t){super(),Z(this,t,Nl,jl,Q,{})}};function xl(e){let t,n,i,l=e[0].name+"",s,c,r,o,u,a,d=e[0].lvl+"",f,_,m,b,v,k,w=e[0].xp+"",g,$,T,M,O,C,et=e[0].next+"",Te,sn,_t,Yt,rn,$t,Gt=e[0].hp+"",Ne,on,Xt=e[0].maxhp+"",Ie,cn,Et,Vt,un,Qt,Zt=e[0].str+"",xe,fn,Ct,zt,an,Jt,te=e[0].dex+"",Re,dn,mt,ee,pn,ne,ie=e[0].gp+"",Ae,_n,Mt,le,mn,se,re=pe(e[0].steps)+"",Oe,hn,St,oe,gn,ce,vn,jt,ue,bn,fe,yn,Tt,Ot,kn,ae,at,K,Le,wn;return{c(){t=h("div"),n=h("div"),i=h("h1"),s=U(l),c=E(),r=h("div"),o=h("div"),o.textContent="Level",u=E(),a=h("div"),f=U(d),_=E(),m=h("div"),b=h("div"),b.textContent="Experience",v=E(),k=h("div"),g=U(w),$=E(),T=h("div"),M=h("div"),M.textContent="Next level at",O=E(),C=h("div"),Te=U(et),sn=E(),_t=h("div"),Yt=h("div"),Yt.textContent="Health",rn=E(),$t=h("div"),Ne=U(Gt),on=U(" / "),Ie=U(Xt),cn=E(),Et=h("div"),Vt=h("div"),Vt.textContent="Strength",un=E(),Qt=h("div"),xe=U(Zt),fn=E(),Ct=h("div"),zt=h("div"),zt.textContent="Dexterity",an=E(),Jt=h("div"),Re=U(te),dn=E(),mt=h("div"),ee=h("div"),ee.textContent="Gold",pn=E(),ne=h("div"),Ae=U(ie),_n=E(),Mt=h("div"),le=h("div"),le.textContent="Steps",mn=E(),se=h("div"),Oe=U(re),hn=E(),St=h("div"),oe=h("div"),oe.textContent="Explored",gn=E(),ce=h("div"),ce.textContent=`${pe(pt.getExplored())}`,vn=E(),jt=h("div"),ue=h("div"),ue.textContent="Distance traveled",bn=E(),fe=h("div"),fe.textContent=`${pe(pt.location().distance)}`,yn=E(),Tt=h("div"),Ot=h("button"),Ot.textContent="Reset",kn=E(),ae=h("button"),ae.textContent="Back",lt(i,"display","none"),y(o,"class","col label svelte-hfjk0k"),y(a,"class","col value svelte-hfjk0k"),y(r,"class","row svelte-hfjk0k"),y(b,"class","col label svelte-hfjk0k"),y(k,"class","col value svelte-hfjk0k"),y(m,"class","row svelte-hfjk0k"),y(M,"class","col label svelte-hfjk0k"),y(C,"class","col value svelte-hfjk0k"),y(T,"class","row svelte-hfjk0k"),y(Yt,"class","col label svelte-hfjk0k"),y($t,"class","col value svelte-hfjk0k"),y(_t,"class","row svelte-hfjk0k"),lt(_t,"margin-top","20px"),y(Vt,"class","col label svelte-hfjk0k"),y(Qt,"class","col value svelte-hfjk0k"),y(Et,"class","row svelte-hfjk0k"),y(zt,"class","col label svelte-hfjk0k"),y(Jt,"class","col value svelte-hfjk0k"),y(Ct,"class","row svelte-hfjk0k"),y(ee,"class","col label svelte-hfjk0k"),y(ne,"class","col value svelte-hfjk0k"),y(mt,"class","row svelte-hfjk0k"),lt(mt,"margin","10px 0"),y(le,"class","col label svelte-hfjk0k"),y(se,"class","col value svelte-hfjk0k"),y(Mt,"class","row svelte-hfjk0k"),y(oe,"class","col label svelte-hfjk0k"),y(ce,"class","col value svelte-hfjk0k"),y(St,"class","row svelte-hfjk0k"),y(ue,"class","col label svelte-hfjk0k"),y(fe,"class","col value svelte-hfjk0k"),y(jt,"class","row svelte-hfjk0k"),y(n,"class","view col svelte-hfjk0k"),y(Ot,"class","danger svelte-hfjk0k"),y(Tt,"class","ctrls")},m(L,J){N(L,t,J),p(t,n),p(n,i),p(i,s),p(n,c),p(n,r),p(r,o),p(r,u),p(r,a),p(a,f),p(n,_),p(n,m),p(m,b),p(m,v),p(m,k),p(k,g),p(n,$),p(n,T),p(T,M),p(T,O),p(T,C),p(C,Te),p(n,sn),p(n,_t),p(_t,Yt),p(_t,rn),p(_t,$t),p($t,Ne),p($t,on),p($t,Ie),p(n,cn),p(n,Et),p(Et,Vt),p(Et,un),p(Et,Qt),p(Qt,xe),p(n,fn),p(n,Ct),p(Ct,zt),p(Ct,an),p(Ct,Jt),p(Jt,Re),p(n,dn),p(n,mt),p(mt,ee),p(mt,pn),p(mt,ne),p(ne,Ae),p(n,_n),p(n,Mt),p(Mt,le),p(Mt,mn),p(Mt,se),p(se,Oe),p(n,hn),p(n,St),p(St,oe),p(St,gn),p(St,ce),p(n,vn),p(n,jt),p(jt,ue),p(jt,bn),p(jt,fe),p(t,yn),p(t,Tt),p(Tt,Ot),p(Tt,kn),p(Tt,ae),K=!0,Le||(wn=[x(window,"keydown",e[1]),x(Ot,"click",Ce),x(ae,"click",ot)],Le=!0)},p(L,[J]){(!K||J&1)&&l!==(l=L[0].name+"")&&nt(s,l),(!K||J&1)&&d!==(d=L[0].lvl+"")&&nt(f,d),(!K||J&1)&&w!==(w=L[0].xp+"")&&nt(g,w),(!K||J&1)&&et!==(et=L[0].next+"")&&nt(Te,et),(!K||J&1)&&Gt!==(Gt=L[0].hp+"")&&nt(Ne,Gt),(!K||J&1)&&Xt!==(Xt=L[0].maxhp+"")&&nt(Ie,Xt),(!K||J&1)&&Zt!==(Zt=L[0].str+"")&&nt(xe,Zt),(!K||J&1)&&te!==(te=L[0].dex+"")&&nt(Re,te),(!K||J&1)&&ie!==(ie=L[0].gp+"")&&nt(Ae,ie),(!K||J&1)&&re!==(re=pe(L[0].steps)+"")&&nt(Oe,re)},i(L){K||(V(()=>{at||(at=rt(t,ct,{},!0)),at.run(1)}),K=!0)},o(L){at||(at=rt(t,ct,{},!1)),at.run(0),K=!1},d(L){L&&S(t),L&&at&&at.end(),Le=!1,W(wn)}}}function Rl(e,t,n){let i;Y(e,D,s=>n(0,i=s));function l(s){switch(s.key){case"q":ot();break;case"Escape":Ce();break}}return[i,l]}class Al extends z{constructor(t){super(),Z(this,t,Rl,xl,Q,{})}}function Ol(e,{from:t,to:n},i={}){const l=getComputedStyle(e),s=l.transform==="none"?"":l.transform,[c,r]=l.transformOrigin.split(" ").map(parseFloat),o=t.left+t.width*c/n.width-(n.left+c),u=t.top+t.height*r/n.height-(n.top+r),{delay:a=0,duration:d=_=>Math.sqrt(_)*120,easing:f=we}=i;return{delay:a,duration:yt(d)?d(Math.sqrt(o*o+u*u)):d,easing:f,css:(_,m)=>{const b=m*o,v=m*u,k=_+m*t.width/n.width,w=_+m*t.height/n.height;return`transform: ${s} translate(${b}px, ${v}px) scale(${k}, ${w});`}}}const Ll={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},Pl=()=>{const{subscribe:e,update:t}=Kt([]);let n=0;const i={},l=u=>u instanceof Object;return{subscribe:e,push:(u,a={})=>{const d={target:"default",...l(u)?u:{...a,msg:u}},f=i[d.target]||{},_={...Ll,...f,...d,theme:{...f.theme,...d.theme},classes:[...f.classes||[],...d.classes||[]],id:++n};return t(m=>_.reversed?[...m,_]:[_,...m]),n},pop:u=>{t(a=>{if(!a.length||u===0)return[];if(l(u))return a.filter(f=>u(f));const d=u||Math.max(...a.map(f=>f.id));return a.filter(f=>f.id!==d)})},set:(u,a={})=>{const d=l(u)?{...u}:{...a,id:u};t(f=>{const _=f.findIndex(m=>m.id===d.id);return _>-1&&(f[_]={...f[_],...d}),f})},_init:(u="default",a={})=>(i[u]=a,i)}},At=Pl();function An(e){return Object.prototype.toString.call(e)==="[object Date]"}function We(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((l,s)=>We(e[s],l));return l=>i.map(s=>s(l))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(An(e)&&An(t)){e=e.getTime(),t=t.getTime();const s=t-e;return c=>new Date(e+c*s)}const i=Object.keys(t),l={};return i.forEach(s=>{l[s]=We(e[s],t[s])}),s=>{const c={};return i.forEach(r=>{c[r]=l[r](s)}),c}}if(n==="number"){const i=t-e;return l=>e+l*i}throw new Error(`Cannot interpolate ${n} values`)}function Ke(e,t={}){const n=Kt(e);let i,l=e;function s(c,r){if(e==null)return n.set(e=c),Promise.resolve();l=c;let o=i,u=!1,{delay:a=0,duration:d=400,easing:f=bt,interpolate:_=We}=Ue(Ue({},t),r);if(d===0)return o&&(o.abort(),o=null),n.set(e=l),Promise.resolve();const m=Bt()+a;let b;return i=Wt(v=>{if(v<m)return!0;u||(b=_(e,c),typeof d=="function"&&(d=d(e,c)),u=!0),o&&(o.abort(),o=null);const k=v-m;return k>d?(n.set(e=c),!1):(n.set(e=b(f(k/d))),!0)}),i.promise}return{set:s,update:(c,r)=>s(c(l,e),r),subscribe:n.subscribe}}function Ul(e){let t,n=e[0].msg+"",i;return{c(){t=new hi(!1),i=Xe(),t.a=i},m(l,s){t.m(n,l,s),N(l,i,s)},p(l,s){s&1&&n!==(n=l[0].msg+"")&&t.p(n)},i:j,o:j,d(l){l&&S(i),l&&t.d()}}}function Dl(e){let t,n,i;const l=[e[2]];var s=e[0].component.src;function c(r){let o={};for(let u=0;u<l.length;u+=1)o=Ue(o,l[u]);return{props:o}}return s&&(t=Cn(s,c())),{c(){t&&q(t.$$.fragment),n=Xe()},m(r,o){t&&F(t,r,o),N(r,n,o),i=!0},p(r,o){const u=o&4?Ii(l,[xi(r[2])]):{};if(s!==(s=r[0].component.src)){if(t){gt();const a=t;R(a.$$.fragment,1,0,()=>{H(a,1)}),vt()}s?(t=Cn(s,c()),q(t.$$.fragment),I(t.$$.fragment,1),F(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(r){i||(t&&I(t.$$.fragment,r),i=!0)},o(r){t&&R(t.$$.fragment,r),i=!1},d(r){r&&S(n),t&&H(t,r)}}}function On(e){let t,n,i;return{c(){t=h("div"),y(t,"class","_toastBtn pe svelte-l65oht"),y(t,"role","button"),y(t,"tabindex","0")},m(l,s){N(l,t,s),n||(i=[x(t,"click",e[4]),x(t,"keydown",e[8])],n=!0)},p:j,d(l){l&&S(t),n=!1,W(i)}}}function Fl(e){let t,n,i,l,s,c,r,o,u,a;const d=[Dl,Ul],f=[];function _(b,v){return b[0].component?0:1}i=_(e),l=f[i]=d[i](e);let m=e[0].dismissable&&On(e);return{c(){t=h("div"),n=h("div"),l.c(),s=E(),m&&m.c(),c=E(),r=h("progress"),y(n,"role","status"),y(n,"class","_toastMsg svelte-l65oht"),tt(n,"pe",e[0].component),y(r,"class","_toastBar svelte-l65oht"),r.value=e[1],y(t,"class","_toastItem svelte-l65oht"),tt(t,"pe",e[0].pausable)},m(b,v){N(b,t,v),p(t,n),f[i].m(n,null),p(t,s),m&&m.m(t,null),p(t,c),p(t,r),o=!0,u||(a=[x(t,"mouseenter",e[9]),x(t,"mouseleave",e[6])],u=!0)},p(b,[v]){let k=i;i=_(b),i===k?f[i].p(b,v):(gt(),R(f[k],1,1,()=>{f[k]=null}),vt(),l=f[i],l?l.p(b,v):(l=f[i]=d[i](b),l.c()),I(l,1),l.m(n,null)),(!o||v&1)&&tt(n,"pe",b[0].component),b[0].dismissable?m?m.p(b,v):(m=On(b),m.c(),m.m(t,c)):m&&(m.d(1),m=null),(!o||v&2)&&(r.value=b[1]),(!o||v&1)&&tt(t,"pe",b[0].pausable)},i(b){o||(I(l),o=!0)},o(b){R(l),o=!1},d(b){b&&S(t),f[i].d(),m&&m.d(),u=!1,W(a)}}}function Hl(e,t,n){let i,{item:l}=t;const s=Ke(l.initial,{duration:l.duration,easing:bt});Y(e,s,g=>n(1,i=g));const c=()=>At.pop(l.id),r=()=>{(i===1||i===0)&&c()};let o=l.initial,u=o,a=!1;const d=()=>{!a&&i!==o&&(s.set(i,{duration:0}),a=!0)},f=()=>{if(a){const g=l.duration,$=g-g*((i-u)/(o-u));s.set(o,{duration:$}).then(r),a=!1}};let _={};const m=(g,$="undefined")=>typeof g===$;let b;wi((g=document)=>{if(m(g.hidden))return;const $=()=>g.hidden?d():f(),T="visibilitychange";g.addEventListener(T,$),b=()=>g.removeEventListener(T,$),$()}),$i(()=>{m(l.onpop,"function")&&l.onpop(l.id),b&&b()});const k=g=>{g instanceof KeyboardEvent&&["Enter"," "].includes(g.key)&&c()},w=()=>{l.pausable&&d()};return e.$$set=g=>{"item"in g&&n(0,l=g.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(m(l.progress)||n(0,l.next=l.progress,l)),e.$$.dirty&131&&o!==l.next&&(n(7,o=l.next),u=i,a=!1,s.set(o).then(r)),e.$$.dirty&1&&l.component){const{props:g={},sendIdTo:$}=l.component;n(2,_={...g,...$&&{[$]:l.id}})}},[l,i,_,s,c,d,f,o,k,w]}class ql extends z{constructor(t){super(),Z(this,t,Hl,Fl,Q,{item:0})}}function Ln(e,t,n){const i=e.slice();return i[5]=t[n],i}function Pn(e,t){let n,i,l,s,c,r,o,u,a=j,d;return i=new ql({props:{item:t[5]}}),{key:e,first:null,c(){n=h("li"),q(i.$$.fragment),l=E(),y(n,"class",s=be(t[5].classes.join(" "))+" svelte-yh90az"),y(n,"style",c=t[1](t[5].theme)),this.first=n},m(f,_){N(f,n,_),F(i,n,null),p(n,l),d=!0},p(f,_){t=f;const m={};_&1&&(m.item=t[5]),i.$set(m),(!d||_&1&&s!==(s=be(t[5].classes.join(" "))+" svelte-yh90az"))&&y(n,"class",s),(!d||_&1&&c!==(c=t[1](t[5].theme)))&&y(n,"style",c)},r(){u=n.getBoundingClientRect()},f(){ki(n),a(),Vn(n,u)},a(){a(),a=yi(n,u,Ol,{duration:200})},i(f){d||(I(i.$$.fragment,f),V(()=>{o&&o.end(1),r=ze(n,Ee,t[5].intro),r.start()}),d=!0)},o(f){R(i.$$.fragment,f),r&&r.invalidate(),o=Je(n,ti,{}),d=!1},d(f){f&&S(n),H(i),f&&o&&o.end()}}}function Bl(e){let t,n=[],i=new Map,l,s=e[0];const c=r=>r[5].id;for(let r=0;r<s.length;r+=1){let o=Ln(e,s,r),u=c(o);i.set(u,n[r]=Pn(u,o))}return{c(){t=h("ul");for(let r=0;r<n.length;r+=1)n[r].c();y(t,"class","_toastContainer svelte-yh90az")},m(r,o){N(r,t,o);for(let u=0;u<n.length;u+=1)n[u].m(t,null);l=!0},p(r,[o]){if(o&3){s=r[0],gt();for(let u=0;u<n.length;u+=1)n[u].r();n=Ni(n,o,c,1,r,s,i,t,Ti,Pn,null,Ln);for(let u=0;u<n.length;u+=1)n[u].a();vt()}},i(r){if(!l){for(let o=0;o<s.length;o+=1)I(n[o]);l=!0}},o(r){for(let o=0;o<n.length;o+=1)R(n[o]);l=!1},d(r){r&&S(t);for(let o=0;o<n.length;o+=1)n[o].d()}}}function Wl(e,t,n){let i;Y(e,At,o=>n(4,i=o));let{options:l={}}=t,{target:s="default"}=t,c;const r=o=>Object.keys(o).reduce((u,a)=>`${u}${a}:${o[a]};`,"");return e.$$set=o=>{"options"in o&&n(2,l=o.options),"target"in o&&n(3,s=o.target)},e.$$.update=()=>{e.$$.dirty&12&&At._init(s,l),e.$$.dirty&24&&n(0,c=i.filter(o=>o.target===s))},[c,r,l,s,i]}class Kl extends z{constructor(t){super(),Z(this,t,Wl,Bl,Q,{options:2,target:3})}}function Yl(e){let t,n,i,l,s,c;return n=new Kl({props:{options:e[2],target:e[1]}}),{c(){t=h("div"),q(n.$$.fragment),y(t,"class",i=be(`toast-wrapper-${e[0]}`)+" svelte-gbm9c2")},m(r,o){N(r,t,o),F(n,t,null),l=!0,s||(c=kt(e[3].call(null,t)),s=!0)},p(r,[o]){const u={};o&4&&(u.options=r[2]),o&2&&(u.target=r[1]),n.$set(u),(!l||o&1&&i!==(i=be(`toast-wrapper-${r[0]}`)+" svelte-gbm9c2"))&&y(t,"class",i)},i(r){l||(I(n.$$.fragment,r),l=!0)},o(r){R(n.$$.fragment,r),l=!1},d(r){r&&S(t),H(n),s=!1,c()}}}function Gl(e,t,n){const i={duration:1e3,initial:1,next:0,pausable:!0,dismissable:!1,reversed:!1,intro:{x:0},theme:{},classes:[]},l={duration:500,initial:1,next:0,pausable:!1,dismissable:!1,reversed:!0,intro:{y:20,duration:100},theme:{},classes:[]};let s;function c(u){r==1?n(2,s=i):r==2&&n(2,s=l)}let{type:r=1}=t,{target:o=void 0}=t;return e.$$set=u=>{"type"in u&&n(0,r=u.type),"target"in u&&n(1,o=u.target)},[r,o,s,c]}class Ye extends z{constructor(t){super(),Z(this,t,Gl,Yl,Q,{type:0,target:1})}}function ui(){let e="",t=Zn,n=B(t);t-=n;let i=B(t);t-=i;let l=t;n+=Pi,i+=Ui,l+=Di;let s=n,c=B(Fi),r=Math.ceil(xt(s+i+l)/2);return{name:e,hp:n,maxhp:s,str:i,dex:l,gp:c,xp:r,lvl:1}}function Xl(){qt.set(ui())}const qt=Kt(ui());function Vl(e){let t;return{c(){t=h("div")},m(n,i){N(n,t,i)},p:j,i:j,o:j,d(n){n&&S(t)}}}function Ql(e){let t,n,i,l;return{c(){t=h("span"),y(t,"class","icon map-u svelte-btrsmh"),tt(t,"rejoice",e[3])},m(s,c){N(s,t,c),l=!0},p(s,c){e=s,(!l||c&8)&&tt(t,"rejoice",e[3])},i(s){l||(V(()=>{i&&i.end(1),n=ze(t,Ee,e[1]),n.start()}),l=!0)},o(s){n&&n.invalidate(),i=Je(t,e[5],{}),l=!1},d(s){s&&S(t),s&&i&&i.end()}}}function Un(e){let t,n,i,l,s;return{c(){t=h("div"),n=h("span"),y(n,"class","icon dragon svelte-btrsmh"),tt(n,"rejoice",e[2]),y(t,"class","col enc img svelte-btrsmh")},m(c,r){N(c,t,r),p(t,n),s=!0},p(c,r){e=c,(!s||r&4)&&tt(n,"rejoice",e[2])},i(c){s||(V(()=>{l&&l.end(1),i=ze(n,Ee,e[4]),i.start()}),s=!0)},o(c){i&&i.invalidate(),l=Je(n,e[6],{}),s=!1},d(c){c&&S(t),c&&l&&l.end()}}}function Zl(e){let t,n,i,l,s,c,r,o,u,a,d,f,_,m;const b=[Ql,Vl],v=[];function k(g,$){return!g[2]&&!g[0]?0:1}l=k(e),s=v[l]=b[l](e),o=new Ye({props:{target:"user",type:2}}),f=new Ye({props:{target:"enc",type:2}});let w=!e[3]&&Un(e);return{c(){t=h("div"),n=h("div"),i=h("div"),s.c(),c=E(),r=h("div"),q(o.$$.fragment),u=E(),a=h("div"),d=h("div"),q(f.$$.fragment),_=E(),w&&w.c(),y(i,"class","col user img svelte-btrsmh"),y(r,"class","col toast"),y(n,"class","row"),y(d,"class","col toast"),y(a,"class","row"),y(t,"class","row imgs svelte-btrsmh")},m(g,$){N(g,t,$),p(t,n),p(n,i),v[l].m(i,null),p(n,c),p(n,r),F(o,r,null),p(t,u),p(t,a),p(a,d),F(f,d,null),p(a,_),w&&w.m(a,null),m=!0},p(g,[$]){let T=l;l=k(g),l===T?v[l].p(g,$):(gt(),R(v[T],1,1,()=>{v[T]=null}),vt(),s=v[l],s?s.p(g,$):(s=v[l]=b[l](g),s.c()),I(s,1),s.m(i,null)),g[3]?w&&(gt(),R(w,1,1,()=>{w=null}),vt()):w?(w.p(g,$),$&8&&I(w,1)):(w=Un(g),w.c(),I(w,1),w.m(a,null))},i(g){m||(I(s),I(o.$$.fragment,g),I(f.$$.fragment,g),I(w),m=!0)},o(g){R(s),R(o.$$.fragment,g),R(f.$$.fragment,g),R(w),m=!1},d(g){g&&S(t),v[l].d(),H(o),H(f),w&&w.d()}}}function zl(e,t,n){let i,l;Y(e,qt,_=>n(7,i=_)),Y(e,D,_=>n(8,l=_));const s={x:40,duration:200},c={x:-40,duration:200},r={amount:40,duration:Fe};function o(_){return a?In(_,r):(d||n(1,s.x*=-1,s),Ee(_,s))}function u(_){return d?In(_,r):void 0}let a,d,{ran:f}=t;return e.$$set=_=>{"ran"in _&&n(0,f=_.ran)},e.$$.update=()=>{e.$$.dirty&256&&n(2,a=l.hp<=0),e.$$.dirty&128&&n(3,d=i.hp<=0)},[f,s,a,d,c,o,u,i,l]}class Jl extends z{constructor(t){super(),Z(this,t,zl,Zl,Q,{ran:0})}}function ts(e){let t;return{c(){t=h("div")},m(n,i){N(n,t,i)},p:j,d(n){n&&S(t)}}}function es(e){let t;return{c(){t=h("progress"),t.value=e[3],y(t,"class","svelte-9px8le")},m(n,i){N(n,t,i)},p(n,i){i&8&&(t.value=n[3])},d(n){n&&S(t)}}}function ns(e){let t;return{c(){t=h("div")},m(n,i){N(n,t,i)},p:j,d(n){n&&S(t)}}}function is(e){let t;return{c(){t=h("progress"),t.value=e[4],y(t,"class","svelte-9px8le")},m(n,i){N(n,t,i)},p(n,i){i&16&&(t.value=n[4])},d(n){n&&S(t)}}}function ls(e){let t,n,i,l;function s(d,f){return d[2].hp>0&&!d[0]?es:ts}let c=s(e),r=c(e);function o(d,f){return d[1].hp>0?is:ns}let u=o(e),a=u(e);return{c(){t=h("div"),n=h("div"),r.c(),i=E(),l=h("div"),a.c(),y(n,"class","col user"),y(l,"class","col enc"),y(t,"class","row info svelte-9px8le")},m(d,f){N(d,t,f),p(t,n),r.m(n,null),p(t,i),p(t,l),a.m(l,null)},p(d,[f]){c===(c=s(d))&&r?r.p(d,f):(r.d(1),r=c(d),r&&(r.c(),r.m(n,null))),u===(u=o(d))&&a?a.p(d,f):(a.d(1),a=u(d),a&&(a.c(),a.m(l,null)))},i:j,o:j,d(d){d&&S(t),r.d(),a.d()}}}function ss(e,t,n){let i,l,s,c;Y(e,qt,a=>n(1,i=a)),Y(e,D,a=>n(2,l=a));const r=Ke(0,{duration:jn,easing:we});Y(e,r,a=>n(3,s=a));const o=Ke(0,{duration:jn,easing:we});Y(e,o,a=>n(4,c=a));let{ran:u}=t;return e.$$set=a=>{"ran"in a&&n(0,u=a.ran)},e.$$.update=()=>{e.$$.dirty&4&&l.hp&&r.set(l.hp/l.maxhp),e.$$.dirty&2&&i.hp&&o.set(i.hp/i.maxhp)},[u,i,l,s,c,r,o]}class rs extends z{constructor(t){super(),Z(this,t,ss,ls,Q,{ran:0})}}function Dn(e){let t,n,i,l,s,c,r,o;return{c(){t=h("div"),n=h("div"),i=h("div"),l=E(),s=h("div"),c=h("div"),y(i,"class","circle svelte-1uajhnl"),lt(i,"transform",`rotate(${Math.min(e[2],180)}deg)`),y(n,"class","wrapper wrapper1 svelte-1uajhnl"),y(c,"class","circle svelte-1uajhnl"),tt(c,"hidden",e[1]<=50),lt(c,"transform",`rotate(${e[2]}deg)`),y(s,"class","wrapper wrapper2 svelte-1uajhnl"),y(t,"class","progress-bar svelte-1uajhnl"),tt(t,"hidden",e[1]>=100)},m(u,a){N(u,t,a),p(t,n),p(n,i),p(t,l),p(t,s),p(s,c),r||(o=kt(e[3].call(null,t)),r=!0)},p(u,a){a&4&&lt(i,"transform",`rotate(${Math.min(u[2],180)}deg)`),a&2&&tt(c,"hidden",u[1]<=50),a&4&&lt(c,"transform",`rotate(${u[2]}deg)`),a&2&&tt(t,"hidden",u[1]>=100)},d(u){u&&S(t),r=!1,o()}}}function os(e){let t,n=e[0]&&Dn(e);return{c(){n&&n.c(),t=Xe()},m(i,l){n&&n.m(i,l),N(i,t,l)},p(i,[l]){i[0]?n?n.p(i,l):(n=Dn(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:j,o:j,d(i){n&&n.d(i),i&&S(t)}}}const Fn=100;function cs(e,t,n){let i;function l(){n(5,c+=Fn),r>=100&&clearInterval(o)}function s(d){n(5,c=0),o=setInterval(l,Fn)}let c,r,o,{duration:u=1e3}=t,{waiting:a=!1}=t;return e.$$set=d=>{"duration"in d&&n(4,u=d.duration),"waiting"in d&&n(0,a=d.waiting)},e.$$.update=()=>{e.$$.dirty&48&&n(1,r=c/u*100),e.$$.dirty&2&&n(2,i=r*3.6)},[a,r,i,s,u,c]}class us extends z{constructor(t){super(),Z(this,t,cs,os,Q,{duration:4,waiting:0})}}function Hn(e,t){let n;if(e.dex>t.dex?n=1-t.dex/e.dex:n=e.dex/t.dex,n=Math.ceil(n*100),B(100)<n*qi)return xt(e.str)}function fs(e,t){return Math.ceil(t/e*1e3*zn)}function as(){return Hi*zn}function ds(e,t=void 0){let n=t?{target:t}:void 0;At.push(e,n)}function ps(e,t=void 0){let n={initial:0,next:0};t&&(n.target=t),At.push(e,n)}function _s(){At.pop(0)}const ft={show:ds,persist:ps,clear:_s};function qn(e){let t,n,i,l,s,c,r,o,u,a,d,f,_,m,b;d=new us({props:{duration:e[0],waiting:e[6]}});function v(g,$){if(!g[3]&&!g[4]&&!g[5])return gs;if(g[3]&&g[2])return hs;if(g[4]&&g[2])return ms}let k=v(e),w=k&&k(e);return{c(){t=h("div"),n=h("div"),i=h("button"),l=U("Fight"),c=E(),r=h("button"),o=U("Block"),a=E(),q(d.$$.fragment),f=E(),w&&w.c(),i.disabled=s=!e[1],r.disabled=u=!e[1],y(t,"class","ctrls col")},m(g,$){N(g,t,$),p(t,n),p(n,i),p(i,l),p(n,c),p(n,r),p(r,o),p(n,a),F(d,n,null),p(t,f),w&&w.m(t,null),_=!0,m||(b=[x(i,"click",e[8]),x(r,"click",e[9])],m=!0)},p(g,$){(!_||$&2&&s!==(s=!g[1]))&&(i.disabled=s),(!_||$&2&&u!==(u=!g[1]))&&(r.disabled=u);const T={};$&1&&(T.duration=g[0]),$&64&&(T.waiting=g[6]),d.$set(T),k===(k=v(g))&&w?w.p(g,$):(w&&w.d(1),w=k&&k(g),w&&(w.c(),w.m(t,null)))},i(g){_||(I(d.$$.fragment,g),_=!0)},o(g){R(d.$$.fragment,g),_=!1},d(g){g&&S(t),H(d),w&&w.d(),m=!1,W(b)}}}function ms(e){let t,n,i;return{c(){t=h("button"),t.textContent="Reset"},m(l,s){N(l,t,s),n||(i=x(t,"click",Ce),n=!0)},p:j,d(l){l&&S(t),n=!1,i()}}}function hs(e){let t,n,i;return{c(){t=h("button"),t.textContent="Proceed"},m(l,s){N(l,t,s),n||(i=x(t,"click",ot),n=!0)},p:j,d(l){l&&S(t),n=!1,i()}}}function gs(e){let t,n,i;return{c(){t=h("button"),t.textContent="Run"},m(l,s){N(l,t,s),n||(i=x(t,"click",e[10]),n=!0)},p:j,d(l){l&&S(t),n=!1,i()}}}function vs(e){let t,n,i,l,s,c,r,o,u,a;i=new Jl({props:{ran:e[5]}}),s=new rs({props:{ran:e[5]}});let d=!e[5]&&qn(e);return{c(){t=h("div"),n=h("div"),q(i.$$.fragment),l=E(),q(s.$$.fragment),c=E(),d&&d.c(),y(n,"class","view field svelte-1tqkonl")},m(f,_){N(f,t,_),p(t,n),F(i,n,null),p(n,l),F(s,n,null),p(t,c),d&&d.m(t,null),o=!0,u||(a=[x(window,"keydown",e[7]),kt(e[11].call(null,n))],u=!0)},p(f,[_]){const m={};_&32&&(m.ran=f[5]),i.$set(m);const b={};_&32&&(b.ran=f[5]),s.$set(b),f[5]?d&&(gt(),R(d,1,1,()=>{d=null}),vt()):d?(d.p(f,_),_&32&&I(d,1)):(d=qn(f),d.c(),I(d,1),d.m(t,null))},i(f){o||(I(i.$$.fragment,f),I(s.$$.fragment,f),I(d),V(()=>{r||(r=rt(t,ct,{},!0)),r.run(1)}),o=!0)},o(f){R(i.$$.fragment,f),R(s.$$.fragment,f),R(d),r||(r=rt(t,ct,{},!1)),r.run(0),o=!1},d(f){f&&S(t),H(i),H(s),d&&d.d(),f&&r&&r.end(),u=!1,W(a)}}}function bs(e,t,n){let i,l;Y(e,D,C=>n(14,i=C)),Y(e,qt,C=>n(15,l=C));function s(C){switch(C.key){case"f":c();break;case"v":r();break;case"q":!g&&!$&&!T?f():g&&w?ot():$&&w&&Ce();break}}function c(){if(!k)return;n(1,k=!1);let C=Hn(i,l);dt(qt,l.hp-=C??0,l),ft.show(m(C),"enc"),l.hp<=0?u():d()}function r(){k&&(O=!0,n(1,k=!1),d())}function o(){if(!g&&!$&&!T){let C=Hn(l,i);O&&(C=Math.ceil(C/4)),dt(D,i.hp-=C??0,i),ft.show(m(C),"user"),i.hp<=0?a():ut(xt(b),o)}}function u(){n(3,g=!0),n(6,M=!1),n(1,k=!1),ut(Fe,()=>{n(2,w=!0),l.xp&&(dt(D,i.xp+=l.xp,i),ft.persist(`Gained ${l.xp} experience`,"enc")),i.xp>=i.next&&(sl(i),ft.persist("Level up!","enc")),l.gp&&(dt(D,i.gp+=l.gp,i),ft.persist(`Found ${l.gp} gold`,"enc"))})}function a(){n(4,$=!0),n(6,M=!1),n(1,k=!1),ut(Fe,()=>{n(2,w=!0),ft.persist("Game over")})}function d(){n(6,M=!0),n(0,v=xt(as())),ut(v,()=>{n(6,M=!1),!g&&!$&&(n(1,k=!0),O=!1)})}function f(){n(5,T=!0);var C=B(Math.min(i.gp/2,l.gp));dt(D,i.gp-=C,i),C&&ft.show(`Dropped ${C} gold`),ut(1e3,ot)}function _(C){Xl(),b=fs(l.dex,i.dex),n(0,v=0),n(6,M=!0),ut(B(b)+100,o),ut(v,()=>{n(6,M=!1),n(1,k=!0)})}const m=C=>C==null?"Miss":`${C}`;let b,v,k,w,g,$,T,M,O;return[v,k,w,g,$,T,M,s,c,r,f,_]}class ys extends z{constructor(t){super(),Z(this,t,bs,vs,Q,{})}}function Bn(e){let t,n,i,l=e[0].innCost+"",s,c;return{c(){t=h("p"),t.textContent="Inn",n=E(),i=h("p"),s=U(l),c=U(" gold per night")},m(r,o){N(r,t,o),N(r,n,o),N(r,i,o),p(i,s),p(i,c)},p(r,o){o&1&&l!==(l=r[0].innCost+"")&&nt(s,l)},d(r){r&&S(t),r&&S(n),r&&S(i)}}}function ks(e){let t,n,i,l,s,c,r,o,u,a,d,f=e[0]&&Bn(e);return{c(){t=h("div"),n=h("div"),f&&f.c(),i=E(),l=h("div"),s=h("button"),s.textContent="Rest",c=E(),r=h("button"),r.textContent="Leave",y(n,"class","view col"),y(l,"class","ctrls")},m(_,m){N(_,t,m),p(t,n),f&&f.m(n,null),p(t,i),p(t,l),p(l,s),p(l,c),p(l,r),u=!0,a||(d=[x(window,"keydown",e[1]),kt(e[3].call(null,n)),x(s,"click",e[2]),x(r,"click",ot)],a=!0)},p(_,[m]){_[0]?f?f.p(_,m):(f=Bn(_),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i(_){u||(V(()=>{o||(o=rt(t,ct,{},!0)),o.run(1)}),u=!0)},o(_){o||(o=rt(t,ct,{},!1)),o.run(0),u=!1},d(_){_&&S(t),f&&f.d(),_&&o&&o.end(),a=!1,W(d)}}}function ws(e,t,n){let i;Y(e,D,o=>n(4,i=o));function l(o){switch(o.key){case"q":ot();break;case"r":s();break}}function s(){i.gp>=r.innCost?(dt(D,i.gp-=r.innCost,i),dt(D,i.hp=i.maxhp,i),Ji(2e3,ot)):ft.show("Not enough gold")}function c(o){let u=pt.location().abs;n(0,r=Ml(u.x,u.y))}let r;return[r,l,s,c]}class $s extends z{constructor(t){super(),Z(this,t,ws,ks,Q,{})}}function Es(e){let t,n;return t=new $s({}),{c(){q(t.$$.fragment)},m(i,l){F(t,i,l),n=!0},i(i){n||(I(t.$$.fragment,i),n=!0)},o(i){R(t.$$.fragment,i),n=!1},d(i){H(t,i)}}}function Cs(e){let t,n;return t=new ys({}),{c(){q(t.$$.fragment)},m(i,l){F(t,i,l),n=!0},i(i){n||(I(t.$$.fragment,i),n=!0)},o(i){R(t.$$.fragment,i),n=!1},d(i){H(t,i)}}}function Ms(e){let t,n;return t=new Al({}),{c(){q(t.$$.fragment)},m(i,l){F(t,i,l),n=!0},i(i){n||(I(t.$$.fragment,i),n=!0)},o(i){R(t.$$.fragment,i),n=!1},d(i){H(t,i)}}}function Ss(e){let t,n;return t=new Il({}),{c(){q(t.$$.fragment)},m(i,l){F(t,i,l),n=!0},i(i){n||(I(t.$$.fragment,i),n=!0)},o(i){R(t.$$.fragment,i),n=!1},d(i){H(t,i)}}}function js(e){let t,n;return t=new ul({}),{c(){q(t.$$.fragment)},m(i,l){F(t,i,l),n=!0},i(i){n||(I(t.$$.fragment,i),n=!0)},o(i){R(t.$$.fragment,i),n=!1},d(i){H(t,i)}}}function Ts(e){let t,n,i,l,s,c,r,o;n=new Ye({});const u=[js,Ss,Ms,Cs,Es],a=[];function d(f,_){return f[0]==it.TITLE?0:f[0]==it.MAP?1:f[0]==it.MENU?2:f[0]==it.ENC?3:f[0]==it.CITY?4:-1}return~(l=d(e))&&(s=a[l]=u[l](e)),{c(){t=h("main"),q(n.$$.fragment),i=E(),s&&s.c()},m(f,_){N(f,t,_),F(n,t,null),p(t,i),~l&&a[l].m(t,null),c=!0,r||(o=kt(e[1].call(null,t)),r=!0)},p(f,[_]){let m=l;l=d(f),l!==m&&(s&&(gt(),R(a[m],1,1,()=>{a[m]=null}),vt()),~l?(s=a[l],s||(s=a[l]=u[l](f),s.c()),I(s,1),s.m(t,null)):s=null)},i(f){c||(I(n.$$.fragment,f),I(s),c=!0)},o(f){R(n.$$.fragment,f),R(s),c=!1},d(f){f&&S(t),H(n),~l&&a[l].d(),r=!1,o()}}}function Ns(e,t,n){function i(s){wt.subscribe(c=>{n(0,l=void 0),ft.clear(),ut(Jn,()=>{n(0,l=c)})})}let l;return[l,i]}class Is extends z{constructor(t){super(),Z(this,t,Ns,Ts,Q,{})}}new Is({target:document.getElementById("app")});
