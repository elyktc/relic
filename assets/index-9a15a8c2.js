(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function M(){}const vt=e=>e;function be(e,t){for(const n in t)e[n]=t[n];return e}function gn(e){return e()}function Xe(){return Object.create(null)}function V(e){e.forEach(gn)}function yt(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Un(e){return Object.keys(e).length===0}function xn(e,...t){if(e==null)return M;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function W(e,t,n){e.$$.on_destroy.push(xn(t,n))}function re(e){return e??""}function mt(e,t,n){return e.set(n),t}function bt(e){return e&&yt(e.destroy)?e.destroy:M}const vn=typeof window<"u";let Pt=vn?()=>window.performance.now():()=>Date.now(),Ne=vn?e=>requestAnimationFrame(e):M;const Tt=new Set;function yn(e){Tt.forEach(t=>{t.c(e)||(Tt.delete(t),t.f())}),Tt.size!==0&&Ne(yn)}function Dt(e){let t;return Tt.size===0&&Ne(yn),{promise:new Promise(n=>{Tt.add(t={c:e,f:n})}),abort(){Tt.delete(t)}}}function _(e,t){e.appendChild(t)}function bn(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ln(e){const t=g("style");return Pn(bn(e),t),t.sheet}function Pn(e,t){return _(e.head||e,t),t.sheet}function N(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e){return document.createElement(e)}function Dn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Q(e){return document.createTextNode(e)}function $(){return Q(" ")}function Ie(){return Q("")}function O(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Fn(e){return Array.from(e.childNodes)}function at(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Qe(e,t){e.value=t??""}function ot(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function J(e,t,n){e.classList[n?"add":"remove"](t)}function kn(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}class Hn{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=Dn(n.nodeName):this.e=g(n.nodeName),this.t=n,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)N(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(S)}}function Ze(e,t){return new e(t)}const se=new Map;let le=0;function Bn(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Wn(e,t){const n={stylesheet:Ln(t),rules:{}};return se.set(e,n),n}function jt(e,t,n,i,r,s,u,l=0){const o=16.666/i;let c=`{
`;for(let v=0;v<=1;v+=o){const y=t+(n-t)*s(v);c+=v*100+`%{${u(y,1-y)}}
`}const d=c+`100% {${u(n,1-n)}}
}`,a=`__svelte_${Bn(d)}_${l}`,f=bn(e),{stylesheet:p,rules:m}=se.get(f)||Wn(f,e);m[a]||(m[a]=!0,p.insertRule(`@keyframes ${a} ${d}`,p.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${a} ${i}ms linear ${r}ms 1 both`,le+=1,a}function Ut(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),r=n.length-i.length;r&&(e.style.animation=i.join(", "),le-=r,le||Kn())}function Kn(){Ne(()=>{le||(se.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&S(t)}),se.clear())})}function Yn(e,t,n,i){if(!t)return M;const r=e.getBoundingClientRect();if(t.left===r.left&&t.right===r.right&&t.top===r.top&&t.bottom===r.bottom)return M;const{delay:s=0,duration:u=300,easing:l=vt,start:o=Pt()+s,end:c=o+u,tick:d=M,css:a}=n(e,{from:t,to:r},i);let f=!0,p=!1,m;function h(){a&&(m=jt(e,0,1,u,s,l,a)),s||(p=!0)}function v(){a&&Ut(e,m),f=!1}return Dt(y=>{if(!p&&y>=o&&(p=!0),p&&y>=c&&(d(1,0),v()),!f)return!1;if(p){const I=y-o,k=0+1*l(I/u);d(k,1-k)}return!0}),h(),d(0,1),v}function Gn(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,r=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,wn(e,r)}}function wn(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),r=i.transform==="none"?"":i.transform;e.style.transform=`${r} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let xt;function qt(e){xt=e}function Re(){if(!xt)throw new Error("Function called outside component initialization");return xt}function Vn(e){Re().$$.on_mount.push(e)}function Xn(e){Re().$$.on_destroy.push(e)}function Qn(){const e=Re();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=kn(t,n,{cancelable:i});return r.slice().forEach(u=>{u.call(e,s)}),!s.defaultPrevented}return!0}}const Ot=[],ze=[],te=[],Je=[],Zn=Promise.resolve();let ke=!1;function zn(){ke||(ke=!0,Zn.then($n))}function G(e){te.push(e)}const ye=new Set;let zt=0;function $n(){const e=xt;do{for(;zt<Ot.length;){const t=Ot[zt];zt++,qt(t),Jn(t.$$)}for(qt(null),Ot.length=0,zt=0;ze.length;)ze.pop()();for(let t=0;t<te.length;t+=1){const n=te[t];ye.has(n)||(ye.add(n),n())}te.length=0}while(Ot.length);for(;Je.length;)Je.pop()();ke=!1,ye.clear(),qt(e)}function Jn(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(G)}}let At;function Ae(){return At||(At=Promise.resolve(),At.then(()=>{At=null})),At}function _t(e,t,n){e.dispatchEvent(kn(`${t?"intro":"outro"}${n}`))}const ee=new Set;let nt;function ht(){nt={r:0,c:[],p:nt}}function gt(){nt.r||V(nt.c),nt=nt.p}function R(e,t){e&&e.i&&(ee.delete(e),e.i(t))}function A(e,t,n,i){if(e&&e.o){if(ee.has(e))return;ee.add(e),nt.c.push(()=>{ee.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const Oe={duration:0};function qe(e,t,n){const i={direction:"in"};let r=t(e,n,i),s=!1,u,l,o=0;function c(){u&&Ut(e,u)}function d(){const{delay:f=0,duration:p=300,easing:m=vt,tick:h=M,css:v}=r||Oe;v&&(u=jt(e,0,1,p,f,m,v,o++)),h(0,1);const y=Pt()+f,I=y+p;l&&l.abort(),s=!0,G(()=>_t(e,!0,"start")),l=Dt(k=>{if(s){if(k>=I)return h(1,0),_t(e,!0,"end"),c(),s=!1;if(k>=y){const E=m((k-y)/p);h(E,1-E)}}return s})}let a=!1;return{start(){a||(a=!0,Ut(e),yt(r)?(r=r(i),Ae().then(d)):d())},invalidate(){a=!1},end(){s&&(c(),s=!1)}}}function je(e,t,n){const i={direction:"out"};let r=t(e,n,i),s=!0,u;const l=nt;l.r+=1;function o(){const{delay:c=0,duration:d=300,easing:a=vt,tick:f=M,css:p}=r||Oe;p&&(u=jt(e,1,0,d,c,a,p));const m=Pt()+c,h=m+d;G(()=>_t(e,!1,"start")),Dt(v=>{if(s){if(v>=h)return f(0,1),_t(e,!1,"end"),--l.r||V(l.c),!1;if(v>=m){const y=a((v-m)/d);f(1-y,y)}}return s})}return yt(r)?Ae().then(()=>{r=r(i),o()}):o(),{end(c){c&&r.tick&&r.tick(1,0),s&&(u&&Ut(e,u),s=!1)}}}function it(e,t,n,i){const r={direction:"both"};let s=t(e,n,r),u=i?0:1,l=null,o=null,c=null;function d(){c&&Ut(e,c)}function a(p,m){const h=p.b-u;return m*=Math.abs(h),{a:u,b:p.b,d:h,duration:m,start:p.start,end:p.start+m,group:p.group}}function f(p){const{delay:m=0,duration:h=300,easing:v=vt,tick:y=M,css:I}=s||Oe,k={start:Pt()+m,b:p};p||(k.group=nt,nt.r+=1),l||o?o=k:(I&&(d(),c=jt(e,u,p,h,m,v,I)),p&&y(0,1),l=a(k,h),G(()=>_t(e,p,"start")),Dt(E=>{if(o&&E>o.start&&(l=a(o,h),o=null,_t(e,l.b,"start"),I&&(d(),c=jt(e,u,l.b,l.duration,0,v,s.css))),l){if(E>=l.end)y(u=l.b,1-u),_t(e,l.b,"end"),o||(l.b?d():--l.group.r||V(l.group.c)),l=null;else if(E>=l.start){const C=E-l.start;u=l.a+l.d*v(C/l.duration),y(u,1-u)}}return!!(l||o)}))}return{run(p){yt(s)?Ae().then(()=>{s=s(r),f(p)}):f(p)},end(){d(),l=o=null}}}function ti(e,t){A(e,1,1,()=>{t.delete(e.key)})}function ei(e,t){e.f(),ti(e,t)}function ni(e,t,n,i,r,s,u,l,o,c,d,a){let f=e.length,p=s.length,m=f;const h={};for(;m--;)h[e[m].key]=m;const v=[],y=new Map,I=new Map;for(m=p;m--;){const T=a(r,s,m),U=n(T);let w=u.get(U);w?i&&w.p(T,t):(w=c(U,T),w.c()),y.set(U,v[m]=w),U in h&&I.set(U,Math.abs(m-h[U]))}const k=new Set,E=new Set;function C(T){R(T,1),T.m(l,d),u.set(T.key,T),d=T.first,p--}for(;f&&p;){const T=v[p-1],U=e[f-1],w=T.key,j=U.key;T===U?(d=T.first,f--,p--):y.has(j)?!u.has(w)||k.has(w)?C(T):E.has(j)?f--:I.get(w)>I.get(j)?(E.add(w),C(T)):(k.add(j),f--):(o(U,u),f--)}for(;f--;){const T=e[f];y.has(T.key)||o(T,u)}for(;p;)C(v[p-1]);return v}function ii(e,t){const n={},i={},r={$$scope:1};let s=e.length;for(;s--;){const u=e[s],l=t[s];if(l){for(const o in u)o in l||(i[o]=1);for(const o in l)r[o]||(n[o]=l[o],r[o]=1);e[s]=l}else for(const o in u)r[o]=1}for(const u in i)u in n||(n[u]=void 0);return n}function ri(e){return typeof e=="object"&&e!==null?e:{}}function D(e){e&&e.c()}function L(e,t,n,i){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),i||G(()=>{const u=e.$$.on_mount.map(gn).filter(yt);e.$$.on_destroy?e.$$.on_destroy.push(...u):V(u),e.$$.on_mount=[]}),s.forEach(G)}function P(e,t){const n=e.$$;n.fragment!==null&&(V(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function si(e,t){e.$$.dirty[0]===-1&&(Ot.push(e),zn(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Z(e,t,n,i,r,s,u,l=[-1]){const o=xt;qt(e);const c=e.$$={fragment:null,ctx:[],props:s,update:M,not_equal:r,bound:Xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:Xe(),dirty:l,skip_bound:!1,root:t.target||o.$$.root};u&&u(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},(a,f,...p)=>{const m=p.length?p[0]:f;return c.ctx&&r(c.ctx[a],c.ctx[a]=m)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](m),d&&si(e,a)),f}):[],c.update(),d=!0,V(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const a=Fn(t.target);c.fragment&&c.fragment.l(a),a.forEach(S)}else c.fragment&&c.fragment.c();t.intro&&R(e.$$.fragment),L(e,t.target,t.anchor,t.customElement),$n()}qt(o)}class z{$destroy(){P(this,1),this.$destroy=M}$on(t,n){if(!yt(n))return M;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!Un(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const En=20,li=50,oi=4,ci=4,ui=10,fi=2,ai=2,tn=200,we=500,Cn=5,di=1e3,pi=2,mi=7,_i=9,hi=2,gi=2,en=200,nn=10,Mn=200,vi=.1,yi=5,bi=100;function F(e,t){return e??(e=0),t??(t=0),Math.floor(Math.random()*(e-t))+t}function lt(e,t){setTimeout(t,e)}function oe(e,t){t??(t=vi);let n=Math.ceil(Math.abs(e*t));return F(e+n,e-n)}const St=[];function Ft(e,t=M){let n;const i=new Set;function r(l){if(X(e,l)&&(e=l,n)){const o=!St.length;for(const c of i)c[1](),St.push(c,e);if(o){for(let c=0;c<St.length;c+=2)St[c][0](St[c+1]);St.length=0}}}function s(l){r(l(e))}function u(l,o=M){const c=[l,o];return i.add(c),i.size===1&&(n=t(r)||M),l(e),()=>{i.delete(c),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:u}}function ki(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function ce(e){const t=e-1;return t*t*t+1}function rn(e,{delay:t=0,duration:n=400,easing:i=ki,amount:r=5,opacity:s=0}={}){const u=getComputedStyle(e),l=+u.opacity,o=u.filter==="none"?"":u.filter,c=l*(1-s);return{delay:t,duration:n,easing:i,css:(d,a)=>`opacity: ${l-c*a}; filter: ${o} blur(${a*r}px);`}}function Sn(e,{delay:t=0,duration:n=400,easing:i=vt}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*r}`}}function fe(e,{delay:t=0,duration:n=400,easing:i=ce,x:r=0,y:s=0,opacity:u=0}={}){const l=getComputedStyle(e),o=+l.opacity,c=l.transform==="none"?"":l.transform,d=o*(1-u);return{delay:t,duration:n,easing:i,css:(a,f)=>`
			transform: ${c} translate(${(1-a)*r}px, ${(1-a)*s}px);
			opacity: ${o-d*f}`}}const et={TITLE:0,MAP:1,MENU:2,ENC:3,CITY:4},kt=Ft(et.TITLE);function ct(){kt.set(et.MAP)}function Tn(){kt.set(et.MENU)}function wi(){kt.set(et.ENC)}function ae(){kt.set(et.TITLE)}function $i(){kt.set(et.CITY)}function Ei(e,t){kt.set(void 0),lt(e,t)}function rt(e){return Sn(e,{duration:Mn})}let Jt;const Ci=new Uint8Array(16);function Mi(){if(!Jt&&(Jt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Jt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jt(Ci)}const x=[];for(let e=0;e<256;++e)x.push((e+256).toString(16).slice(1));function Si(e,t=0){return(x[e[t+0]]+x[e[t+1]]+x[e[t+2]]+x[e[t+3]]+"-"+x[e[t+4]]+x[e[t+5]]+"-"+x[e[t+6]]+x[e[t+7]]+"-"+x[e[t+8]]+x[e[t+9]]+"-"+x[e[t+10]]+x[e[t+11]]+x[e[t+12]]+x[e[t+13]]+x[e[t+14]]+x[e[t+15]]).toLowerCase()}const Ti=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sn={randomUUID:Ti};function Ni(e,t,n){if(sn.randomUUID&&!t&&!e)return sn.randomUUID();e=e||{};const i=e.random||(e.rng||Mi)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let r=0;r<16;++r)t[n+r]=i[r];return t}return Si(i)}function Nn(){let e="",t=En,n=F(t);t-=n;let i=F(t);t-=i;let r=t;return n+=li,i+=oi,r+=ci,{name:e,hp:n,maxhp:n,str:i,dex:r,steps:0,gp:0}}const H=Ft(Nn());function Ii(){H.set(Nn())}function Ri(e){let t,n,i,r,s,u,l,o,c,d,a,f,p,m,h;return{c(){t=g("div"),n=g("div"),i=g("h1"),i.textContent="Relic",r=$(),s=g("p"),s.textContent="by elyktc",u=$(),l=g("div"),o=g("input"),c=$(),d=g("div"),a=g("button"),a.textContent="Start",ot(i,"margin-right","50px"),ot(s,"margin-left","100px"),b(o,"maxlength","8"),b(o,"class","svelte-evi9wy"),ot(o,"display","none"),b(l,"class","row"),b(n,"class","view col svelte-evi9wy"),b(d,"class","ctrls")},m(v,y){N(v,t,y),_(t,n),_(n,i),_(n,r),_(n,s),_(n,u),_(n,l),_(l,o),Qe(o,e[0].name),_(t,c),_(t,d),_(d,a),p=!0,m||(h=[O(o,"input",e[2]),bt(e[1].call(null,a)),O(a,"click",ct)],m=!0)},p(v,[y]){y&1&&o.value!==v[0].name&&Qe(o,v[0].name)},i(v){p||(G(()=>{f||(f=it(t,rt,{},!0)),f.run(1)}),p=!0)},o(v){f||(f=it(t,rt,{},!1)),f.run(0),p=!1},d(v){v&&S(t),v&&f&&f.end(),m=!1,V(h)}}}function Ai(e,t,n){let i;W(e,H,u=>n(0,i=u));function r(u){Ii(),u.focus()}function s(){i.name=this.value,H.set(i)}return[i,r,s]}class Oi extends z{constructor(t){super(),Z(this,t,Ai,Ri,X,{})}}function qi(e){let t,n,i,r,s,u,l,o,c,d,a,f,p,m,h,v,y,I,k,E,C,T,U;return{c(){t=g("div"),n=g("div"),i=g("button"),i.textContent="NW",r=$(),s=g("button"),s.textContent="N",u=$(),l=g("button"),l.textContent="NE",o=$(),c=g("div"),d=g("button"),d.textContent="W",a=$(),f=g("button"),f.textContent="Menu",p=$(),m=g("button"),m.textContent="E",h=$(),v=g("div"),y=g("button"),y.textContent="SW",I=$(),k=g("button"),k.textContent="S",E=$(),C=g("button"),C.textContent="SE",b(t,"class","ctrls")},m(w,j){N(w,t,j),_(t,n),_(n,i),_(n,r),_(n,s),_(n,u),_(n,l),_(t,o),_(t,c),_(c,d),_(c,a),_(c,f),_(c,p),_(c,m),_(t,h),_(t,v),_(v,y),_(v,I),_(v,k),_(v,E),_(v,C),T||(U=[O(window,"keydown",e[8]),O(i,"click",e[0]),O(s,"click",e[1]),O(l,"click",e[2]),O(d,"click",e[3]),O(f,"click",Tn),O(m,"click",e[4]),O(y,"click",e[5]),O(k,"click",e[6]),O(C,"click",e[7])],T=!0)},p:M,i:M,o:M,d(w){w&&S(t),T=!1,V(U)}}}function ji(e){const t=Qn(),n=()=>t("move",{x:-1,y:-1}),i=()=>t("move",{x:-1,y:0}),r=()=>t("move",{x:-1,y:1}),s=()=>t("move",{x:0,y:-1}),u=()=>t("move",{x:0,y:1}),l=()=>t("move",{x:1,y:-1}),o=()=>t("move",{x:1,y:0}),c=()=>t("move",{x:1,y:1});function d(a){switch(a.key){case"Escape":Tn();break;case"q":n();break;case"w":i();break;case"e":r();break;case"a":s();break;case"d":u();break;case"z":l();break;case"s":o();break;case"c":c();break}}return[n,i,r,s,u,l,o,c,d]}class Ui extends z{constructor(t){super(),Z(this,t,ji,qi,X,{})}}let q,K,Y,de,pe,Nt=!0,Ue=_i,ln=hi,$e=0,xe=0;const xi="u",Le="f",ne="p",Pe="t",In="w",ue="c";function Rn(e,t,n){e=Math.max(e,1),q=Nt?[]:q??[];let i=t??Math.floor(e/2),r=n??Math.floor(e/2);K=i,Y=r,Nt&&(de=K,pe=Y,$e=0,xe=0),Ee(i,r,Ce.CITY);for(let s=1;s<e;s++){let u=s%2==0?s:-s;i+=u,r+=u,Ee(i,r)}q=An(!0,e,t,n)}function Li(e,t,n,i){if(!e)return e;i??(i=Ue);let r=Math.floor(i/2);t??(t=r),n??(n=r);let s=[];for(let u=0;u<i;u++)for(let l=0;l<i;l++){let o=t-r+u,c=n-r+l,d=(e[o]&&e[o][c])??Le;s[u]??(s[u]=[]),s[u][l]=d}return s[r][r]=xi,s}function Pi(){let e=On();if(K<e&&(q.splice(0,0,[]),de++,K=e),Y<e){let t=qn();for(let n=0;n<t;n++)q[n].splice(0,0,void 0);pe++,Y=e}}function Di(e){return[...e.map(t=>[...t])]}function An(e,t,n,i){var a;if(!q)return q;t=t??Ue,n=n??K,i=i??Y;let r=Di(q),s=qn(),u=Hi(),l=Math.min(t??s,s),o=Math.min(t??u,u),c=Math.max((n??0)-Math.floor(l/2),0),d=Math.max((i??0)-Math.floor(o/2),0);for(let f=0;f<l;f++)for(let p=0;p<o;p++){let m=c+f,h=d+p;r[m]??(r[m]=[]);let v=e?me(m,h):Le;(a=r[m])[h]??(a[h]=v)}return r}function Ee(e,t,n){var i;return e??(e=K),t??(t=Y),q??(q=[]),q[e]??(q[e]=[]),(i=q[e])[t]??(i[t]=n??me(e,t)),n}function me(e,t){if(e??(e=K),t??(t=Y),q&&q[e]&&q[e][t])return q[e][t];let n;if(F(en)==1&&F(en)<$e++)n=ue,$e=0;else{let i=Fi(e,t),r=F(i.length+1);if(r>=i.length){let s=[ne,Pe];r=F(s.length+gi),n=r>=s.length?ne:s[r]}else n=i[r]}return Nt&&(n==ue||n==In)&&(n=ne),Nt||xe++,n}function Fi(e,t){let n=[];for(let i=e-1;i<=e+1;i++)for(let r=t-1;r<=t+1;r++)q[i]&&q[i][r]&&q[i][r]!=ue&&n.push(q[i][r]);return n}function On(){return me()==Pe?Math.floor(ln/2):ln}function qn(e){return e??(e=q??[]),e.length}function Hi(e){e??(e=q??[]);let t=e.map(n=>n.length).sort((n,i)=>n-i);return t[t.length-1]}function Bi(e){if(K+=e.x,Y+=e.y,Pi(),Ee()==In)return K-=e.x,Y-=e.y,!1;{let n=On();n>0&&Rn(n*2+1,K,Y)}return!0}function Wi(){let e=An(!1);return Li(e,K,Y,Ue)}function Ki(){let e=Math.abs(K-de),t=Math.abs(Y-pe);return Math.ceil(Math.hypot(e,t))}function Yi(){return xe}function Gi(){return{x:K,y:Y,abs:{x:K-de,y:Y-pe},terrain:me(),distance:Ki()}}function Vi(){Nt=!0,Rn(mi),Nt=!1}const Ce={FOG:Le,PLAIN:ne,FOREST:Pe,CITY:ue},dt={miniMap:Wi,location:Gi,move:Bi,getExplored:Yi};let ie=new Map;function Xi(){let e=Ni().substring(0,8),t=F(yi,bi);return{name:e,innCost:t}}function Qi(e,t){let n=`${e}.${t}`;return ie.has(n)||ie.set(n,Xi()),ie.get(n)}function Zi(){ie.clear()}function zi(e){let t,n,i,r,s,u,l,o;return r=new Ui({}),r.$on("move",e[3]),{c(){t=g("div"),n=g("div"),i=$(),D(r.$$.fragment),b(n,"class","view field svelte-1f1cfey")},m(c,d){N(c,t,d),_(t,n),n.innerHTML=e[0],_(t,i),L(r,t,null),u=!0,l||(o=bt(e[2].call(null,n)),l=!0)},p(c,[d]){(!u||d&1)&&(n.innerHTML=c[0])},i(c){u||(R(r.$$.fragment,c),G(()=>{s||(s=it(t,rt,{},!0)),s.run(1)}),u=!0)},o(c){A(r.$$.fragment,c),s||(s=it(t,rt,{},!1)),s.run(0),u=!1},d(c){c&&S(t),P(r),c&&s&&s.end(),l=!1,o()}}}function Ji(e){return`<span class="icon map-${e}"></span>`}function tr(e,t,n){let i;W(e,H,d=>n(4,i=d));function r(d){n(0,o=d.map(a=>a.map(Ji).join("")).join("<br/>"))}function s(){return dt.location().terrain==Ce.FOREST?Math.ceil(nn/2):nn}function u(d){dt.move(d)&&(mt(H,i.steps++,i),r(dt.miniMap()),dt.location().terrain==Ce.CITY?$i():F(s())==1&&wi())}function l(d){i.steps||(Vi(),Zi()),r(dt.miniMap())}let o="";return[o,u,l,d=>u(d.detail)]}let er=class extends z{constructor(t){super(),Z(this,t,tr,zi,X,{})}};function nr(e){let t,n,i,r=e[0].name+"",s,u,l,o,c,d,a=e[0].hp+"",f,p,m=e[0].maxhp+"",h,v,y,I,k,E,C=e[0].str+"",T,U,w,j,wt,ut,Ht=e[0].dex+"",_e,De,$t,Bt,Fe,Wt,Kt=e[0].gp+"",he,He,Et,Yt,Be,Gt,Vt=new Intl.NumberFormat().format(e[0].steps)+"",ge,We,Ct,Xt,Ke,Qt,Ye,Mt,Rt,Ge,Zt,ft,tt,ve,Ve;return{c(){t=g("div"),n=g("div"),i=g("h1"),s=Q(r),u=$(),l=g("div"),o=g("div"),o.textContent="Health",c=$(),d=g("div"),f=Q(a),p=Q(" / "),h=Q(m),v=$(),y=g("div"),I=g("div"),I.textContent="Strength",k=$(),E=g("div"),T=Q(C),U=$(),w=g("div"),j=g("div"),j.textContent="Dexterity",wt=$(),ut=g("div"),_e=Q(Ht),De=$(),$t=g("div"),Bt=g("div"),Bt.textContent="Gold",Fe=$(),Wt=g("div"),he=Q(Kt),He=$(),Et=g("div"),Yt=g("div"),Yt.textContent="Steps",Be=$(),Gt=g("div"),ge=Q(Vt),We=$(),Ct=g("div"),Xt=g("div"),Xt.textContent="Explored",Ke=$(),Qt=g("div"),Qt.textContent=`${new Intl.NumberFormat().format(dt.getExplored())}`,Ye=$(),Mt=g("div"),Rt=g("button"),Rt.textContent="Reset",Ge=$(),Zt=g("button"),Zt.textContent="Back",ot(i,"display","none"),b(o,"class","col label svelte-qam9kv"),b(d,"class","col value svelte-qam9kv"),b(l,"class","row svelte-qam9kv"),b(I,"class","col label svelte-qam9kv"),b(E,"class","col value svelte-qam9kv"),b(y,"class","row svelte-qam9kv"),b(j,"class","col label svelte-qam9kv"),b(ut,"class","col value svelte-qam9kv"),b(w,"class","row svelte-qam9kv"),b(Bt,"class","col label svelte-qam9kv"),b(Wt,"class","col value svelte-qam9kv"),b($t,"class","row svelte-qam9kv"),b(Yt,"class","col label svelte-qam9kv"),b(Gt,"class","col value svelte-qam9kv"),b(Et,"class","row svelte-qam9kv"),b(Xt,"class","col label svelte-qam9kv"),b(Qt,"class","col value svelte-qam9kv"),b(Ct,"class","row svelte-qam9kv"),b(n,"class","view col svelte-qam9kv"),ot(Rt,"background-color","maroon"),b(Mt,"class","ctrls")},m(B,st){N(B,t,st),_(t,n),_(n,i),_(i,s),_(n,u),_(n,l),_(l,o),_(l,c),_(l,d),_(d,f),_(d,p),_(d,h),_(n,v),_(n,y),_(y,I),_(y,k),_(y,E),_(E,T),_(n,U),_(n,w),_(w,j),_(w,wt),_(w,ut),_(ut,_e),_(n,De),_(n,$t),_($t,Bt),_($t,Fe),_($t,Wt),_(Wt,he),_(n,He),_(n,Et),_(Et,Yt),_(Et,Be),_(Et,Gt),_(Gt,ge),_(n,We),_(n,Ct),_(Ct,Xt),_(Ct,Ke),_(Ct,Qt),_(t,Ye),_(t,Mt),_(Mt,Rt),_(Mt,Ge),_(Mt,Zt),tt=!0,ve||(Ve=[O(window,"keydown",e[1]),O(Rt,"click",ae),O(Zt,"click",ct)],ve=!0)},p(B,[st]){(!tt||st&1)&&r!==(r=B[0].name+"")&&at(s,r),(!tt||st&1)&&a!==(a=B[0].hp+"")&&at(f,a),(!tt||st&1)&&m!==(m=B[0].maxhp+"")&&at(h,m),(!tt||st&1)&&C!==(C=B[0].str+"")&&at(T,C),(!tt||st&1)&&Ht!==(Ht=B[0].dex+"")&&at(_e,Ht),(!tt||st&1)&&Kt!==(Kt=B[0].gp+"")&&at(he,Kt),(!tt||st&1)&&Vt!==(Vt=new Intl.NumberFormat().format(B[0].steps)+"")&&at(ge,Vt)},i(B){tt||(G(()=>{ft||(ft=it(t,rt,{},!0)),ft.run(1)}),tt=!0)},o(B){ft||(ft=it(t,rt,{},!1)),ft.run(0),tt=!1},d(B){B&&S(t),B&&ft&&ft.end(),ve=!1,V(Ve)}}}function ir(e,t,n){let i;W(e,H,s=>n(0,i=s));function r(s){switch(s.key){case"q":ct();break;case"Escape":ae();break}}return[i,r]}class rr extends z{constructor(t){super(),Z(this,t,ir,nr,X,{})}}function sr(e,{from:t,to:n},i={}){const r=getComputedStyle(e),s=r.transform==="none"?"":r.transform,[u,l]=r.transformOrigin.split(" ").map(parseFloat),o=t.left+t.width*u/n.width-(n.left+u),c=t.top+t.height*l/n.height-(n.top+l),{delay:d=0,duration:a=p=>Math.sqrt(p)*120,easing:f=ce}=i;return{delay:d,duration:yt(a)?a(Math.sqrt(o*o+c*c)):a,easing:f,css:(p,m)=>{const h=m*o,v=m*c,y=p+m*t.width/n.width,I=p+m*t.height/n.height;return`transform: ${s} translate(${h}px, ${v}px) scale(${y}, ${I});`}}}const lr={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},or=()=>{const{subscribe:e,update:t}=Ft([]);let n=0;const i={},r=c=>c instanceof Object;return{subscribe:e,push:(c,d={})=>{const a={target:"default",...r(c)?c:{...d,msg:c}},f=i[a.target]||{},p={...lr,...f,...a,theme:{...f.theme,...a.theme},classes:[...f.classes||[],...a.classes||[]],id:++n};return t(m=>p.reversed?[...m,p]:[p,...m]),n},pop:c=>{t(d=>{if(!d.length||c===0)return[];if(r(c))return d.filter(f=>c(f));const a=c||Math.max(...d.map(f=>f.id));return d.filter(f=>f.id!==a)})},set:(c,d={})=>{const a=r(c)?{...c}:{...d,id:c};t(f=>{const p=f.findIndex(m=>m.id===a.id);return p>-1&&(f[p]={...f[p],...a}),f})},_init:(c="default",d={})=>(i[c]=d,i)}},It=or();function on(e){return Object.prototype.toString.call(e)==="[object Date]"}function Me(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((r,s)=>Me(e[s],r));return r=>i.map(s=>s(r))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(on(e)&&on(t)){e=e.getTime(),t=t.getTime();const s=t-e;return u=>new Date(e+u*s)}const i=Object.keys(t),r={};return i.forEach(s=>{r[s]=Me(e[s],t[s])}),s=>{const u={};return i.forEach(l=>{u[l]=r[l](s)}),u}}if(n==="number"){const i=t-e;return r=>e+r*i}throw new Error(`Cannot interpolate ${n} values`)}function Se(e,t={}){const n=Ft(e);let i,r=e;function s(u,l){if(e==null)return n.set(e=u),Promise.resolve();r=u;let o=i,c=!1,{delay:d=0,duration:a=400,easing:f=vt,interpolate:p=Me}=be(be({},t),l);if(a===0)return o&&(o.abort(),o=null),n.set(e=r),Promise.resolve();const m=Pt()+d;let h;return i=Dt(v=>{if(v<m)return!0;c||(h=p(e,u),typeof a=="function"&&(a=a(e,u)),c=!0),o&&(o.abort(),o=null);const y=v-m;return y>a?(n.set(e=u),!1):(n.set(e=h(f(y/a))),!0)}),i.promise}return{set:s,update:(u,l)=>s(u(r,e),l),subscribe:n.subscribe}}function cr(e){let t,n=e[0].msg+"",i;return{c(){t=new Hn(!1),i=Ie(),t.a=i},m(r,s){t.m(n,r,s),N(r,i,s)},p(r,s){s&1&&n!==(n=r[0].msg+"")&&t.p(n)},i:M,o:M,d(r){r&&S(i),r&&t.d()}}}function ur(e){let t,n,i;const r=[e[2]];var s=e[0].component.src;function u(l){let o={};for(let c=0;c<r.length;c+=1)o=be(o,r[c]);return{props:o}}return s&&(t=Ze(s,u())),{c(){t&&D(t.$$.fragment),n=Ie()},m(l,o){t&&L(t,l,o),N(l,n,o),i=!0},p(l,o){const c=o&4?ii(r,[ri(l[2])]):{};if(s!==(s=l[0].component.src)){if(t){ht();const d=t;A(d.$$.fragment,1,0,()=>{P(d,1)}),gt()}s?(t=Ze(s,u()),D(t.$$.fragment),R(t.$$.fragment,1),L(t,n.parentNode,n)):t=null}else s&&t.$set(c)},i(l){i||(t&&R(t.$$.fragment,l),i=!0)},o(l){t&&A(t.$$.fragment,l),i=!1},d(l){l&&S(n),t&&P(t,l)}}}function cn(e){let t,n,i;return{c(){t=g("div"),b(t,"class","_toastBtn pe svelte-l65oht"),b(t,"role","button"),b(t,"tabindex","0")},m(r,s){N(r,t,s),n||(i=[O(t,"click",e[4]),O(t,"keydown",e[8])],n=!0)},p:M,d(r){r&&S(t),n=!1,V(i)}}}function fr(e){let t,n,i,r,s,u,l,o,c,d;const a=[ur,cr],f=[];function p(h,v){return h[0].component?0:1}i=p(e),r=f[i]=a[i](e);let m=e[0].dismissable&&cn(e);return{c(){t=g("div"),n=g("div"),r.c(),s=$(),m&&m.c(),u=$(),l=g("progress"),b(n,"role","status"),b(n,"class","_toastMsg svelte-l65oht"),J(n,"pe",e[0].component),b(l,"class","_toastBar svelte-l65oht"),l.value=e[1],b(t,"class","_toastItem svelte-l65oht"),J(t,"pe",e[0].pausable)},m(h,v){N(h,t,v),_(t,n),f[i].m(n,null),_(t,s),m&&m.m(t,null),_(t,u),_(t,l),o=!0,c||(d=[O(t,"mouseenter",e[9]),O(t,"mouseleave",e[6])],c=!0)},p(h,[v]){let y=i;i=p(h),i===y?f[i].p(h,v):(ht(),A(f[y],1,1,()=>{f[y]=null}),gt(),r=f[i],r?r.p(h,v):(r=f[i]=a[i](h),r.c()),R(r,1),r.m(n,null)),(!o||v&1)&&J(n,"pe",h[0].component),h[0].dismissable?m?m.p(h,v):(m=cn(h),m.c(),m.m(t,u)):m&&(m.d(1),m=null),(!o||v&2)&&(l.value=h[1]),(!o||v&1)&&J(t,"pe",h[0].pausable)},i(h){o||(R(r),o=!0)},o(h){A(r),o=!1},d(h){h&&S(t),f[i].d(),m&&m.d(),c=!1,V(d)}}}function ar(e,t,n){let i,{item:r}=t;const s=Se(r.initial,{duration:r.duration,easing:vt});W(e,s,k=>n(1,i=k));const u=()=>It.pop(r.id),l=()=>{(i===1||i===0)&&u()};let o=r.initial,c=o,d=!1;const a=()=>{!d&&i!==o&&(s.set(i,{duration:0}),d=!0)},f=()=>{if(d){const k=r.duration,E=k-k*((i-c)/(o-c));s.set(o,{duration:E}).then(l),d=!1}};let p={};const m=(k,E="undefined")=>typeof k===E;let h;Vn((k=document)=>{if(m(k.hidden))return;const E=()=>k.hidden?a():f(),C="visibilitychange";k.addEventListener(C,E),h=()=>k.removeEventListener(C,E),E()}),Xn(()=>{m(r.onpop,"function")&&r.onpop(r.id),h&&h()});const y=k=>{k instanceof KeyboardEvent&&["Enter"," "].includes(k.key)&&u()},I=()=>{r.pausable&&a()};return e.$$set=k=>{"item"in k&&n(0,r=k.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(m(r.progress)||n(0,r.next=r.progress,r)),e.$$.dirty&131&&o!==r.next&&(n(7,o=r.next),c=i,d=!1,s.set(o).then(l)),e.$$.dirty&1&&r.component){const{props:k={},sendIdTo:E}=r.component;n(2,p={...k,...E&&{[E]:r.id}})}},[r,i,p,s,u,a,f,o,y,I]}class dr extends z{constructor(t){super(),Z(this,t,ar,fr,X,{item:0})}}function un(e,t,n){const i=e.slice();return i[5]=t[n],i}function fn(e,t){let n,i,r,s,u,l,o,c,d=M,a;return i=new dr({props:{item:t[5]}}),{key:e,first:null,c(){n=g("li"),D(i.$$.fragment),r=$(),b(n,"class",s=re(t[5].classes.join(" "))+" svelte-yh90az"),b(n,"style",u=t[1](t[5].theme)),this.first=n},m(f,p){N(f,n,p),L(i,n,null),_(n,r),a=!0},p(f,p){t=f;const m={};p&1&&(m.item=t[5]),i.$set(m),(!a||p&1&&s!==(s=re(t[5].classes.join(" "))+" svelte-yh90az"))&&b(n,"class",s),(!a||p&1&&u!==(u=t[1](t[5].theme)))&&b(n,"style",u)},r(){c=n.getBoundingClientRect()},f(){Gn(n),d(),wn(n,c)},a(){d(),d=Yn(n,c,sr,{duration:200})},i(f){a||(R(i.$$.fragment,f),G(()=>{o&&o.end(1),l=qe(n,fe,t[5].intro),l.start()}),a=!0)},o(f){A(i.$$.fragment,f),l&&l.invalidate(),o=je(n,Sn,{}),a=!1},d(f){f&&S(n),P(i),f&&o&&o.end()}}}function pr(e){let t,n=[],i=new Map,r,s=e[0];const u=l=>l[5].id;for(let l=0;l<s.length;l+=1){let o=un(e,s,l),c=u(o);i.set(c,n[l]=fn(c,o))}return{c(){t=g("ul");for(let l=0;l<n.length;l+=1)n[l].c();b(t,"class","_toastContainer svelte-yh90az")},m(l,o){N(l,t,o);for(let c=0;c<n.length;c+=1)n[c].m(t,null);r=!0},p(l,[o]){if(o&3){s=l[0],ht();for(let c=0;c<n.length;c+=1)n[c].r();n=ni(n,o,u,1,l,s,i,t,ei,fn,null,un);for(let c=0;c<n.length;c+=1)n[c].a();gt()}},i(l){if(!r){for(let o=0;o<s.length;o+=1)R(n[o]);r=!0}},o(l){for(let o=0;o<n.length;o+=1)A(n[o]);r=!1},d(l){l&&S(t);for(let o=0;o<n.length;o+=1)n[o].d()}}}function mr(e,t,n){let i;W(e,It,o=>n(4,i=o));let{options:r={}}=t,{target:s="default"}=t,u;const l=o=>Object.keys(o).reduce((c,d)=>`${c}${d}:${o[d]};`,"");return e.$$set=o=>{"options"in o&&n(2,r=o.options),"target"in o&&n(3,s=o.target)},e.$$.update=()=>{e.$$.dirty&12&&It._init(s,r),e.$$.dirty&24&&n(0,u=i.filter(o=>o.target===s))},[u,l,r,s,i]}class _r extends z{constructor(t){super(),Z(this,t,mr,pr,X,{options:2,target:3})}}function hr(e){let t,n,i,r,s,u;return n=new _r({props:{options:e[2],target:e[1]}}),{c(){t=g("div"),D(n.$$.fragment),b(t,"class",i=re(`toast-wrapper-${e[0]}`)+" svelte-83kuhx")},m(l,o){N(l,t,o),L(n,t,null),r=!0,s||(u=bt(e[3].call(null,t)),s=!0)},p(l,[o]){const c={};o&4&&(c.options=l[2]),o&2&&(c.target=l[1]),n.$set(c),(!r||o&1&&i!==(i=re(`toast-wrapper-${l[0]}`)+" svelte-83kuhx"))&&b(t,"class",i)},i(l){r||(R(n.$$.fragment,l),r=!0)},o(l){A(n.$$.fragment,l),r=!1},d(l){l&&S(t),P(n),s=!1,u()}}}function gr(e,t,n){const i={duration:1e3,initial:1,next:0,pausable:!0,dismissable:!1,reversed:!1,intro:{x:0},theme:{},classes:[]},r={duration:500,initial:1,next:0,pausable:!1,dismissable:!1,reversed:!0,intro:{y:20,duration:100},theme:{},classes:[]};let s;function u(c){l==1?n(2,s=i):l==2&&n(2,s=r)}let{type:l=1}=t,{target:o=void 0}=t;return e.$$set=c=>{"type"in c&&n(0,l=c.type),"target"in c&&n(1,o=c.target)},[l,o,s,u]}class Te extends z{constructor(t){super(),Z(this,t,gr,hr,X,{type:0,target:1})}}function jn(){let e="",t=En,n=F(t);t-=n;let i=F(t);t-=i;let r=t;n+=ui,i+=fi,r+=ai;let s=n,u=Math.ceil(oe(s+i)/2);return{name:e,hp:n,maxhp:s,str:i,dex:r,gp:u}}const Lt=Ft(jn());function vr(){Lt.set(jn())}function yr(e){let t;return{c(){t=g("div")},m(n,i){N(n,t,i)},p:M,i:M,o:M,d(n){n&&S(t)}}}function br(e){let t,n,i,r;return{c(){t=g("span"),b(t,"class","icon map-u svelte-btrsmh"),J(t,"rejoice",e[3])},m(s,u){N(s,t,u),r=!0},p(s,u){e=s,(!r||u&8)&&J(t,"rejoice",e[3])},i(s){r||(G(()=>{i&&i.end(1),n=qe(t,fe,e[1]),n.start()}),r=!0)},o(s){n&&n.invalidate(),i=je(t,e[5],{}),r=!1},d(s){s&&S(t),s&&i&&i.end()}}}function kr(e){let t;return{c(){t=g("div")},m(n,i){N(n,t,i)},p:M,i:M,o:M,d(n){n&&S(t)}}}function wr(e){let t,n,i,r;return{c(){t=g("span"),b(t,"class","icon dragon svelte-btrsmh"),J(t,"rejoice",e[2])},m(s,u){N(s,t,u),r=!0},p(s,u){e=s,(!r||u&4)&&J(t,"rejoice",e[2])},i(s){r||(G(()=>{i&&i.end(1),n=qe(t,fe,e[4]),n.start()}),r=!0)},o(s){n&&n.invalidate(),i=je(t,e[6],{}),r=!1},d(s){s&&S(t),s&&i&&i.end()}}}function $r(e){let t,n,i,r,s,u,l,o,c,d,a,f,p,m,h,v,y;const I=[br,yr],k=[];function E(w,j){return!w[2]&&!w[0]?0:1}r=E(e),s=k[r]=I[r](e),o=new Te({props:{target:"user",type:2}}),f=new Te({props:{target:"enc",type:2}});const C=[wr,kr],T=[];function U(w,j){return w[3]?1:0}return h=U(e),v=T[h]=C[h](e),{c(){t=g("div"),n=g("div"),i=g("div"),s.c(),u=$(),l=g("div"),D(o.$$.fragment),c=$(),d=g("div"),a=g("div"),D(f.$$.fragment),p=$(),m=g("div"),v.c(),b(i,"class","col user img svelte-btrsmh"),b(l,"class","col toast"),b(n,"class","row"),b(a,"class","col toast"),b(m,"class","col enc img svelte-btrsmh"),b(d,"class","row"),b(t,"class","row imgs svelte-btrsmh")},m(w,j){N(w,t,j),_(t,n),_(n,i),k[r].m(i,null),_(n,u),_(n,l),L(o,l,null),_(t,c),_(t,d),_(d,a),L(f,a,null),_(d,p),_(d,m),T[h].m(m,null),y=!0},p(w,[j]){let wt=r;r=E(w),r===wt?k[r].p(w,j):(ht(),A(k[wt],1,1,()=>{k[wt]=null}),gt(),s=k[r],s?s.p(w,j):(s=k[r]=I[r](w),s.c()),R(s,1),s.m(i,null));let ut=h;h=U(w),h===ut?T[h].p(w,j):(ht(),A(T[ut],1,1,()=>{T[ut]=null}),gt(),v=T[h],v?v.p(w,j):(v=T[h]=C[h](w),v.c()),R(v,1),v.m(m,null))},i(w){y||(R(s),R(o.$$.fragment,w),R(f.$$.fragment,w),R(v),y=!0)},o(w){A(s),A(o.$$.fragment,w),A(f.$$.fragment,w),A(v),y=!1},d(w){w&&S(t),k[r].d(),P(o),P(f),T[h].d()}}}function Er(e,t,n){let i,r;W(e,Lt,p=>n(7,i=p)),W(e,H,p=>n(8,r=p));const s={x:40,duration:200},u={x:-40,duration:200},l={amount:40,duration:we};function o(p){return d?rn(p,l):(a||n(1,s.x*=-1,s),fe(p,s))}function c(p){return a?rn(p,l):void 0}let d,a,{ran:f}=t;return e.$$set=p=>{"ran"in p&&n(0,f=p.ran)},e.$$.update=()=>{e.$$.dirty&256&&n(2,d=r.hp<=0),e.$$.dirty&128&&n(3,a=i.hp<=0)},[f,s,d,a,u,o,c,i,r]}class Cr extends z{constructor(t){super(),Z(this,t,Er,$r,X,{ran:0})}}function Mr(e){let t;return{c(){t=g("div")},m(n,i){N(n,t,i)},p:M,d(n){n&&S(t)}}}function Sr(e){let t;return{c(){t=g("progress"),t.value=e[2],b(t,"class","svelte-1xfyygy")},m(n,i){N(n,t,i)},p(n,i){i&4&&(t.value=n[2])},d(n){n&&S(t)}}}function Tr(e){let t;return{c(){t=g("div")},m(n,i){N(n,t,i)},p:M,d(n){n&&S(t)}}}function Nr(e){let t;return{c(){t=g("progress"),t.value=e[3],b(t,"class","svelte-1xfyygy")},m(n,i){N(n,t,i)},p(n,i){i&8&&(t.value=n[3])},d(n){n&&S(t)}}}function Ir(e){let t,n,i,r;function s(a,f){return a[1].hp>0?Sr:Mr}let u=s(e),l=u(e);function o(a,f){return a[0].hp>0?Nr:Tr}let c=o(e),d=c(e);return{c(){t=g("div"),n=g("div"),l.c(),i=$(),r=g("div"),d.c(),b(n,"class","col user"),b(r,"class","col enc"),b(t,"class","row info svelte-1xfyygy")},m(a,f){N(a,t,f),_(t,n),l.m(n,null),_(t,i),_(t,r),d.m(r,null)},p(a,[f]){u===(u=s(a))&&l?l.p(a,f):(l.d(1),l=u(a),l&&(l.c(),l.m(n,null))),c===(c=o(a))&&d?d.p(a,f):(d.d(1),d=c(a),d&&(d.c(),d.m(r,null)))},i:M,o:M,d(a){a&&S(t),l.d(),d.d()}}}function Rr(e,t,n){let i,r,s,u;W(e,Lt,c=>n(0,i=c)),W(e,H,c=>n(1,r=c));const l=Se(0,{duration:tn,easing:ce});W(e,l,c=>n(2,s=c));const o=Se(0,{duration:tn,easing:ce});return W(e,o,c=>n(3,u=c)),e.$$.update=()=>{e.$$.dirty&2&&r.hp&&l.set(r.hp/r.maxhp),e.$$.dirty&1&&i.hp&&o.set(i.hp/i.maxhp)},[i,r,s,u,l,o]}class Ar extends z{constructor(t){super(),Z(this,t,Rr,Ir,X,{})}}function an(e){let t,n,i,r,s,u,l,o;return{c(){t=g("div"),n=g("div"),i=g("div"),r=$(),s=g("div"),u=g("div"),b(i,"class","circle svelte-usw2cb"),ot(i,"transform",`rotate(${Math.min(e[2],180)}deg)`),b(n,"class","wrapper wrapper1 svelte-usw2cb"),b(u,"class","circle svelte-usw2cb"),J(u,"hidden",e[1]<=50),ot(u,"transform",`rotate(${e[2]}deg)`),b(s,"class","wrapper wrapper2 svelte-usw2cb"),b(t,"class","progress-bar svelte-usw2cb"),J(t,"hidden",e[1]>=100)},m(c,d){N(c,t,d),_(t,n),_(n,i),_(t,r),_(t,s),_(s,u),l||(o=bt(e[3].call(null,t)),l=!0)},p(c,d){d&4&&ot(i,"transform",`rotate(${Math.min(c[2],180)}deg)`),d&2&&J(u,"hidden",c[1]<=50),d&4&&ot(u,"transform",`rotate(${c[2]}deg)`),d&2&&J(t,"hidden",c[1]>=100)},d(c){c&&S(t),l=!1,o()}}}function Or(e){let t,n=e[0]&&an(e);return{c(){n&&n.c(),t=Ie()},m(i,r){n&&n.m(i,r),N(i,t,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=an(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:M,o:M,d(i){n&&n.d(i),i&&S(t)}}}const dn=100;function qr(e,t,n){let i;function r(){n(5,u+=dn),l>=100&&clearInterval(o)}function s(a){n(5,u=0),o=setInterval(r,dn)}let u,l,o,{duration:c=1e3}=t,{waiting:d=!1}=t;return e.$$set=a=>{"duration"in a&&n(4,c=a.duration),"waiting"in a&&n(0,d=a.waiting)},e.$$.update=()=>{e.$$.dirty&48&&n(1,l=u/c*100),e.$$.dirty&2&&n(2,i=l*3.6)},[d,l,i,s,c,u]}class jr extends z{constructor(t){super(),Z(this,t,qr,Or,X,{duration:4,waiting:0})}}function pn(e,t){let n;if(e.dex>t.dex?n=1-t.dex/e.dex:n=e.dex/t.dex,n=Math.ceil(n*100),F(100)<n*pi)return oe(e.str)}function Ur(e,t){return Math.ceil(t/e*1e3*Cn)}function mn(){return di*Cn}function xr(e,t=void 0){let n=t?{target:t}:void 0;It.push(e,n)}function Lr(e,t=void 0){let n={initial:0,next:0};t&&(n.target=t),It.push(e,n)}function Pr(){It.pop(0)}const pt={show:xr,persist:Lr,clear:Pr};function _n(e){let t,n,i,r,s,u,l,o,c,d,a;l=new jr({props:{duration:e[0],waiting:e[6]}});function f(h,v){if(!h[3]&&!h[4]&&!h[5])return Hr;if(h[3]&&h[2])return Fr;if(h[4]&&h[2])return Dr}let p=f(e),m=p&&p(e);return{c(){t=g("div"),n=g("div"),i=g("button"),r=Q("Fight"),u=$(),D(l.$$.fragment),o=$(),m&&m.c(),i.disabled=s=!e[1],b(t,"class","ctrls col")},m(h,v){N(h,t,v),_(t,n),_(n,i),_(i,r),_(n,u),L(l,n,null),_(t,o),m&&m.m(t,null),c=!0,d||(a=O(i,"click",e[8]),d=!0)},p(h,v){(!c||v&2&&s!==(s=!h[1]))&&(i.disabled=s);const y={};v&1&&(y.duration=h[0]),v&64&&(y.waiting=h[6]),l.$set(y),p===(p=f(h))&&m?m.p(h,v):(m&&m.d(1),m=p&&p(h),m&&(m.c(),m.m(t,null)))},i(h){c||(R(l.$$.fragment,h),c=!0)},o(h){A(l.$$.fragment,h),c=!1},d(h){h&&S(t),P(l),m&&m.d(),d=!1,a()}}}function Dr(e){let t,n,i;return{c(){t=g("button"),t.textContent="Reset"},m(r,s){N(r,t,s),n||(i=O(t,"click",ae),n=!0)},p:M,d(r){r&&S(t),n=!1,i()}}}function Fr(e){let t,n,i;return{c(){t=g("button"),t.textContent="Carry on"},m(r,s){N(r,t,s),n||(i=O(t,"click",ct),n=!0)},p:M,d(r){r&&S(t),n=!1,i()}}}function Hr(e){let t,n,i;return{c(){t=g("button"),t.textContent="Run"},m(r,s){N(r,t,s),n||(i=O(t,"click",e[9]),n=!0)},p:M,d(r){r&&S(t),n=!1,i()}}}function Br(e){let t,n,i,r,s,u,l,o,c,d;i=new Cr({props:{ran:e[5]}}),s=new Ar({});let a=!e[5]&&_n(e);return{c(){t=g("div"),n=g("div"),D(i.$$.fragment),r=$(),D(s.$$.fragment),u=$(),a&&a.c(),b(n,"class","view field svelte-jp3mm3")},m(f,p){N(f,t,p),_(t,n),L(i,n,null),_(n,r),L(s,n,null),_(t,u),a&&a.m(t,null),o=!0,c||(d=[O(window,"keydown",e[7]),bt(e[10].call(null,n))],c=!0)},p(f,[p]){const m={};p&32&&(m.ran=f[5]),i.$set(m),f[5]?a&&(ht(),A(a,1,1,()=>{a=null}),gt()):a?(a.p(f,p),p&32&&R(a,1)):(a=_n(f),a.c(),R(a,1),a.m(t,null))},i(f){o||(R(i.$$.fragment,f),R(s.$$.fragment,f),R(a),G(()=>{l||(l=it(t,rt,{},!0)),l.run(1)}),o=!0)},o(f){A(i.$$.fragment,f),A(s.$$.fragment,f),A(a),l||(l=it(t,rt,{},!1)),l.run(0),o=!1},d(f){f&&S(t),P(i),P(s),a&&a.d(),f&&l&&l.end(),c=!1,V(d)}}}function Wr(e,t,n){let i,r;W(e,H,C=>n(12,i=C)),W(e,Lt,C=>n(13,r=C));function s(C){switch(C.key){case"f":u();break;case"q":!y&&!I&&!k?d():y&&v?ct():I&&v&&ae();break}}function u(){if(!h)return;n(1,h=!1);let C=pn(i,r);mt(Lt,r.hp-=C??0,r),pt.show(f(C),"enc"),r.hp<=0?o():(n(6,E=!0),n(0,m=oe(mn())),lt(m,()=>{n(6,E=!1),!y&&!I&&n(1,h=!0)}))}function l(){if(!y&&!I&&!k){let C=pn(r,i);mt(H,i.hp-=C??0,i),pt.show(f(C),"user"),i.hp<=0?c():lt(oe(p),l)}}function o(){n(3,y=!0),n(6,E=!1),n(1,h=!1),lt(we,()=>{n(2,v=!0),mt(H,i.gp+=r.gp,i),pt.persist(`Got ${r.gp} gold!`)})}function c(){n(4,I=!0),n(6,E=!1),n(1,h=!1),lt(we,()=>{n(2,v=!0),pt.persist("Game over")})}function d(){n(5,k=!0);var C=F(Math.min(i.gp/2,r.gp));mt(H,i.gp-=C,i),pt.show(`Dropped ${C} gold`),lt(1e3,ct)}function a(C){vr(),p=Ur(r.dex,i.dex),n(0,m=F(mn()+100)),n(6,E=!0),lt(F(p)+100,l),lt(m,()=>{n(6,E=!1),n(1,h=!0)})}const f=C=>C==null?"Miss":`${C}`;let p,m,h,v,y,I,k,E;return[m,h,v,y,I,k,E,s,u,d,a]}class Kr extends z{constructor(t){super(),Z(this,t,Wr,Br,X,{})}}function hn(e){let t,n,i,r=e[0].innCost+"",s,u;return{c(){t=g("p"),t.textContent="Inn",n=$(),i=g("p"),s=Q(r),u=Q(" gold per night")},m(l,o){N(l,t,o),N(l,n,o),N(l,i,o),_(i,s),_(i,u)},p(l,o){o&1&&r!==(r=l[0].innCost+"")&&at(s,r)},d(l){l&&S(t),l&&S(n),l&&S(i)}}}function Yr(e){let t,n,i,r,s,u,l,o,c,d,a,f=e[0]&&hn(e);return{c(){t=g("div"),n=g("div"),f&&f.c(),i=$(),r=g("div"),s=g("button"),s.textContent="Rest",u=$(),l=g("button"),l.textContent="Leave",b(n,"class","view col"),b(r,"class","ctrls")},m(p,m){N(p,t,m),_(t,n),f&&f.m(n,null),_(t,i),_(t,r),_(r,s),_(r,u),_(r,l),c=!0,d||(a=[O(window,"keydown",e[1]),bt(e[3].call(null,n)),O(s,"click",e[2]),O(l,"click",ct)],d=!0)},p(p,[m]){p[0]?f?f.p(p,m):(f=hn(p),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i(p){c||(G(()=>{o||(o=it(t,rt,{},!0)),o.run(1)}),c=!0)},o(p){o||(o=it(t,rt,{},!1)),o.run(0),c=!1},d(p){p&&S(t),f&&f.d(),p&&o&&o.end(),d=!1,V(a)}}}function Gr(e,t,n){let i;W(e,H,o=>n(4,i=o));function r(o){switch(o.key){case"q":ct();break;case"r":s();break}}function s(){i.gp>=l.innCost?(mt(H,i.gp-=l.innCost,i),mt(H,i.hp=i.maxhp,i),Ei(2e3,ct)):pt.show("Not enough gold")}function u(o){let c=dt.location().abs;n(0,l=Qi(c.x,c.y))}let l;return[l,r,s,u]}class Vr extends z{constructor(t){super(),Z(this,t,Gr,Yr,X,{})}}function Xr(e){let t,n;return t=new Vr({}),{c(){D(t.$$.fragment)},m(i,r){L(t,i,r),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){P(t,i)}}}function Qr(e){let t,n;return t=new Kr({}),{c(){D(t.$$.fragment)},m(i,r){L(t,i,r),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){P(t,i)}}}function Zr(e){let t,n;return t=new rr({}),{c(){D(t.$$.fragment)},m(i,r){L(t,i,r),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){P(t,i)}}}function zr(e){let t,n;return t=new er({}),{c(){D(t.$$.fragment)},m(i,r){L(t,i,r),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){P(t,i)}}}function Jr(e){let t,n;return t=new Oi({}),{c(){D(t.$$.fragment)},m(i,r){L(t,i,r),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){A(t.$$.fragment,i),n=!1},d(i){P(t,i)}}}function ts(e){let t,n,i,r,s,u,l,o;n=new Te({});const c=[Jr,zr,Zr,Qr,Xr],d=[];function a(f,p){return f[0]==et.TITLE?0:f[0]==et.MAP?1:f[0]==et.MENU?2:f[0]==et.ENC?3:f[0]==et.CITY?4:-1}return~(r=a(e))&&(s=d[r]=c[r](e)),{c(){t=g("main"),D(n.$$.fragment),i=$(),s&&s.c()},m(f,p){N(f,t,p),L(n,t,null),_(t,i),~r&&d[r].m(t,null),u=!0,l||(o=bt(e[1].call(null,t)),l=!0)},p(f,[p]){let m=r;r=a(f),r!==m&&(s&&(ht(),A(d[m],1,1,()=>{d[m]=null}),gt()),~r?(s=d[r],s||(s=d[r]=c[r](f),s.c()),R(s,1),s.m(t,null)):s=null)},i(f){u||(R(n.$$.fragment,f),R(s),u=!0)},o(f){A(n.$$.fragment,f),A(s),u=!1},d(f){f&&S(t),P(n),~r&&d[r].d(),l=!1,o()}}}function es(e,t,n){function i(s){kt.subscribe(u=>{n(0,r=void 0),pt.clear(),lt(Mn,()=>{n(0,r=u)})})}let r;return[r,i]}class ns extends z{constructor(t){super(),Z(this,t,es,ts,X,{})}}new ns({target:document.getElementById("app")});
