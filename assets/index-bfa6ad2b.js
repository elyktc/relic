var ki=Object.defineProperty;var yi=(e,t,n)=>t in e?ki(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ve=(e,t,n)=>(yi(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function T(){}const Et=e=>e;function Ge(e,t){for(const n in t)e[n]=t[n];return e}function zn(e){return e()}function In(){return Object.create(null)}function Q(e){e.forEach(zn)}function Dt(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function $i(e){return Object.keys(e).length===0}function Jn(e,...t){if(e==null)return T;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function V(e){let t;return Jn(e,n=>t=n)(),t}function Y(e,t,n){e.$$.on_destroy.push(Jn(t,n))}function Me(e){return e??""}function Pt(e,t,n){return e.set(n),t}const Qn=typeof window<"u";let Wt=Qn?()=>window.performance.now():()=>Date.now(),ln=Qn?e=>requestAnimationFrame(e):T;const At=new Set;function Zn(e){At.forEach(t=>{t.c(e)||(At.delete(t),t.f())}),At.size!==0&&ln(Zn)}function Vt(e){let t;return At.size===0&&ln(Zn),{promise:new Promise(n=>{At.add(t={c:e,f:n})}),abort(){At.delete(t)}}}function d(e,t){e.appendChild(t)}function ti(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function wi(e){const t=m("style");return Ei(ti(e),t),t.sheet}function Ei(e,t){return d(e.head||e,t),t.sheet}function x(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}function m(e){return document.createElement(e)}function Mi(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function B(e){return document.createTextNode(e)}function M(){return B(" ")}function ei(){return B("")}function R(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ci(e){return Array.from(e.childNodes)}function ut(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ft(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function lt(e,t,n){e.classList[n?"add":"remove"](t)}function ni(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,i,t),l}class Si{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=Mi(n.nodeName):this.e=m(n.nodeName),this.t=n,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)x(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(j)}}function Rn(e,t){return new e(t)}const Ce=new Map;let Se=0;function Ti(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function ji(e,t){const n={stylesheet:wi(t),rules:{}};return Ce.set(e,n),n}function Yt(e,t,n,i,l,s,o,r=0){const c=16.666/i;let u=`{
`;for(let y=0;y<=1;y+=c){const E=t+(n-t)*s(y);u+=y*100+`%{${o(E,1-E)}}
`}const f=u+`100% {${o(n,1-n)}}
}`,a=`__svelte_${Ti(f)}_${r}`,p=ti(e),{stylesheet:_,rules:h}=Ce.get(p)||ji(p,e);h[a]||(h[a]=!0,_.insertRule(`@keyframes ${a} ${f}`,_.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${a} ${i}ms linear ${l}ms 1 both`,Se+=1,a}function Kt(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),l=n.length-i.length;l&&(e.style.animation=i.join(", "),Se-=l,Se||Ni())}function Ni(){ln(()=>{Se||(Ce.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&j(t)}),Ce.clear())})}function xi(e,t,n,i){if(!t)return T;const l=e.getBoundingClientRect();if(t.left===l.left&&t.right===l.right&&t.top===l.top&&t.bottom===l.bottom)return T;const{delay:s=0,duration:o=300,easing:r=Et,start:c=Wt()+s,end:u=c+o,tick:f=T,css:a}=n(e,{from:t,to:l},i);let p=!0,_=!1,h;function g(){a&&(h=Yt(e,0,1,o,s,r,a)),s||(_=!0)}function y(){a&&Kt(e,h),p=!1}return Vt(E=>{if(!_&&E>=c&&(_=!0),_&&E>=u&&(f(1,0),y()),!p)return!1;if(_){const $=E-c,v=0+1*r($/o);f(v,1-v)}return!0}),g(),f(0,1),y}function Ii(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,l=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,ii(e,l)}}function ii(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),l=i.transform==="none"?"":i.transform;e.style.transform=`${l} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Gt;function Bt(e){Gt=e}function sn(){if(!Gt)throw new Error("Function called outside component initialization");return Gt}function yt(e){sn().$$.on_mount.push(e)}function li(e){sn().$$.on_destroy.push(e)}function si(){const e=sn();return(t,n,{cancelable:i=!1}={})=>{const l=e.$$.callbacks[t];if(l){const s=ni(t,n,{cancelable:i});return l.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}const qt=[],Xe=[],ke=[],An=[],Ri=Promise.resolve();let We=!1;function Ai(){We||(We=!0,Ri.then(ri))}function G(e){ke.push(e)}const Ke=new Set;let ge=0;function ri(){const e=Gt;do{for(;ge<qt.length;){const t=qt[ge];ge++,Bt(t),Oi(t.$$)}for(Bt(null),qt.length=0,ge=0;Xe.length;)Xe.pop()();for(let t=0;t<ke.length;t+=1){const n=ke[t];Ke.has(n)||(Ke.add(n),n())}ke.length=0}while(qt.length);for(;An.length;)An.pop()();We=!1,Ke.clear(),Bt(e)}function Oi(e){if(e.fragment!==null){e.update(),Q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(G)}}let Ht;function rn(){return Ht||(Ht=Promise.resolve(),Ht.then(()=>{Ht=null})),Ht}function wt(e,t,n){e.dispatchEvent(ni(`${t?"intro":"outro"}${n}`))}const ye=new Set;let at;function dt(){at={r:0,c:[],p:at}}function pt(){at.r||Q(at.c),at=at.p}function S(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function N(e,t,n,i){if(e&&e.o){if(ye.has(e))return;ye.add(e),at.c.push(()=>{ye.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const on={duration:0};function cn(e,t,n){const i={direction:"in"};let l=t(e,n,i),s=!1,o,r,c=0;function u(){o&&Kt(e,o)}function f(){const{delay:p=0,duration:_=300,easing:h=Et,tick:g=T,css:y}=l||on;y&&(o=Yt(e,0,1,_,p,h,y,c++)),g(0,1);const E=Wt()+p,$=E+_;r&&r.abort(),s=!0,G(()=>wt(e,!0,"start")),r=Vt(v=>{if(s){if(v>=$)return g(1,0),wt(e,!0,"end"),u(),s=!1;if(v>=E){const k=h((v-E)/_);g(k,1-k)}}return s})}let a=!1;return{start(){a||(a=!0,Kt(e),Dt(l)?(l=l(i),rn().then(f)):f())},invalidate(){a=!1},end(){s&&(u(),s=!1)}}}function zt(e,t,n){const i={direction:"out"};let l=t(e,n,i),s=!0,o;const r=at;r.r+=1;function c(){const{delay:u=0,duration:f=300,easing:a=Et,tick:p=T,css:_}=l||on;_&&(o=Yt(e,1,0,f,u,a,_));const h=Wt()+u,g=h+f;G(()=>wt(e,!1,"start")),Vt(y=>{if(s){if(y>=g)return p(0,1),wt(e,!1,"end"),--r.r||Q(r.c),!1;if(y>=h){const E=a((y-h)/f);p(1-E,E)}}return s})}return Dt(l)?rn().then(()=>{l=l(i),c()}):c(),{end(u){u&&l.tick&&l.tick(1,0),s&&(o&&Kt(e,o),s=!1)}}}function st(e,t,n,i){const l={direction:"both"};let s=t(e,n,l),o=i?0:1,r=null,c=null,u=null;function f(){u&&Kt(e,u)}function a(_,h){const g=_.b-o;return h*=Math.abs(g),{a:o,b:_.b,d:g,duration:h,start:_.start,end:_.start+h,group:_.group}}function p(_){const{delay:h=0,duration:g=300,easing:y=Et,tick:E=T,css:$}=s||on,v={start:Wt()+h,b:_};_||(v.group=at,at.r+=1),r||c?c=v:($&&(f(),u=Yt(e,o,_,g,h,y,$)),_&&E(0,1),r=a(v,g),G(()=>wt(e,_,"start")),Vt(k=>{if(c&&k>c.start&&(r=a(c,g),c=null,wt(e,r.b,"start"),$&&(f(),u=Yt(e,o,r.b,r.duration,0,y,s.css))),r){if(k>=r.end)E(o=r.b,1-o),wt(e,r.b,"end"),c||(r.b?f():--r.group.r||Q(r.group.c)),r=null;else if(k>=r.start){const w=k-r.start;o=r.a+r.d*y(w/r.duration),E(o,1-o)}}return!!(r||c)}))}return{run(_){Dt(s)?rn().then(()=>{s=s(l),p(_)}):p(_)},end(){f(),r=c=null}}}function Pi(e,t){N(e,1,1,()=>{t.delete(e.key)})}function Li(e,t){e.f(),Pi(e,t)}function Ui(e,t,n,i,l,s,o,r,c,u,f,a){let p=e.length,_=s.length,h=p;const g={};for(;h--;)g[e[h].key]=h;const y=[],E=new Map,$=new Map;for(h=_;h--;){const C=a(l,s,h),A=n(C);let I=o.get(A);I?i&&I.p(C,t):(I=u(A,C),I.c()),E.set(A,y[h]=I),A in g&&$.set(A,Math.abs(h-g[A]))}const v=new Set,k=new Set;function w(C){S(C,1),C.m(r,f),o.set(C.key,C),f=C.first,_--}for(;p&&_;){const C=y[_-1],A=e[p-1],I=C.key,et=A.key;C===A?(f=C.first,p--,_--):E.has(et)?!o.has(I)||v.has(I)?w(C):k.has(et)?p--:$.get(I)>$.get(et)?(k.add(I),w(C)):(v.add(et),p--):(c(A,o),p--)}for(;p--;){const C=e[p];E.has(C.key)||c(C,o)}for(;_;)w(y[_-1]);return y}function Di(e,t){const n={},i={},l={$$scope:1};let s=e.length;for(;s--;){const o=e[s],r=t[s];if(r){for(const c in o)c in r||(i[c]=1);for(const c in r)l[c]||(n[c]=r[c],l[c]=1);e[s]=r}else for(const c in o)l[c]=1}for(const o in i)o in n||(n[o]=void 0);return n}function Fi(e){return typeof e=="object"&&e!==null?e:{}}function H(e){e&&e.c()}function L(e,t,n,i){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),i||G(()=>{const o=e.$$.on_mount.map(zn).filter(Dt);e.$$.on_destroy?e.$$.on_destroy.push(...o):Q(o),e.$$.on_mount=[]}),s.forEach(G)}function U(e,t){const n=e.$$;n.fragment!==null&&(Q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Hi(e,t){e.$$.dirty[0]===-1&&(qt.push(e),Ai(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Z(e,t,n,i,l,s,o,r=[-1]){const c=Gt;Bt(e);const u=e.$$={fragment:null,ctx:[],props:s,update:T,not_equal:l,bound:In(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:In(),dirty:r,skip_bound:!1,root:t.target||c.$$.root};o&&o(u.root);let f=!1;if(u.ctx=n?n(e,t.props||{},(a,p,..._)=>{const h=_.length?_[0]:p;return u.ctx&&l(u.ctx[a],u.ctx[a]=h)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](h),f&&Hi(e,a)),p}):[],u.update(),f=!0,Q(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const a=Ci(t.target);u.fragment&&u.fragment.l(a),a.forEach(j)}else u.fragment&&u.fragment.c();t.intro&&S(e.$$.fragment),L(e,t.target,t.anchor,t.customElement),ri()}Bt(c)}class tt{$destroy(){U(this,1),this.$destroy=T}$on(t,n){if(!Dt(n))return T;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(t){this.$$set&&!$i(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const oi=10,qi=80,Bi=6,Yi=6,Ki=20,Gi=2,Xi=2,Wi=50,On=200,Ve=500,ze=200,ci=1,Vi=1e3,zi=1,Ji=7,Qi=9,Zi=2,tl=2,Pn=200,Ln=10,ui=200,el=.1,nl=5,il=50,It=[];function _t(e,t=T){let n;const i=new Set;function l(r){if(X(e,r)&&(e=r,n)){const c=!It.length;for(const u of i)u[1](),It.push(u,e);if(c){for(let u=0;u<It.length;u+=2)It[u][0](It[u+1]);It.length=0}}}function s(r){l(r(e))}function o(r,c=T){const u=[r,c];return i.add(u),i.size===1&&(n=t(l)||T),r(e),()=>{i.delete(u),i.size===0&&(n(),n=null)}}return{set:l,update:s,subscribe:o}}function W(e,t){return e??(e=0),t??(t=0),Math.floor(Math.random()*(e-t+1))+t}function kt(e,t){setTimeout(t,e)}function Ot(e,t){t??(t=el);let n=Math.ceil(Math.abs(e*t));return W(e+n,e-n)}function Rt(e){return new Intl.NumberFormat().format(e)}function Te(e){e.set(V(e)+1)}function ll(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function je(e){const t=e-1;return t*t*t+1}function sl(e,{delay:t=0,duration:n=400,easing:i=ll,amount:l=5,opacity:s=0}={}){const o=getComputedStyle(e),r=+o.opacity,c=o.filter==="none"?"":o.filter,u=r*(1-s);return{delay:t,duration:n,easing:i,css:(f,a)=>`opacity: ${r-u*a}; filter: ${c} blur(${a*l}px);`}}function Re(e,{delay:t=0,duration:n=400,easing:i=Et}={}){const l=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*l}`}}function Ae(e,{delay:t=0,duration:n=400,easing:i=je,x:l=0,y:s=0,opacity:o=0}={}){const r=getComputedStyle(e),c=+r.opacity,u=r.transform==="none"?"":r.transform,f=c*(1-o);return{delay:t,duration:n,easing:i,css:(a,p)=>`
			transform: ${u} translate(${(1-a)*l}px, ${(1-a)*s}px);
			opacity: ${c-f*p}`}}const it={TITLE:0,MAP:1,MENU:2,ENC:3,CITY:4,SLEEP:5},Mt=_t(it.TITLE);function gt(){Mt.set(it.MAP)}function fi(){Mt.set(it.MENU)}function rl(){Mt.set(it.ENC)}function un(){Mt.set(it.TITLE)}function ol(){Mt.set(it.CITY)}function cl(){Mt.set(it.SLEEP)}function rt(e){return Re(e,{duration:ui})}class ai{constructor(t,n,i,l,s,o,r){ve(this,"evading",()=>this.status.evading);ve(this,"fleeing",()=>this.status.fleeing);ve(this,"ko",()=>this.hp<=0);this.name=t,this.lvl=n,this.hpbase=i,this.strbase=l,this.dexbase=s,this.hp=i,this.str=l,this.dex=s,this.xp=o,this.gp=r,this.status={evading:!1,fleeing:!1}}}function fn(e,t,n){e??(e=10),t??(t=1),n??(n=1);let i=Math.round(e*t/(t+n)),l=Math.round(e*n/(t+n)),s=Math.min(Math.max(i-l,0),i-1),o=Math.min(Math.max(l-i,0),l-1),r=W(i,s);e-=r;let c=W(l,o);return e-=c,{hp:Math.max(e,0),str:r,dex:c}}let be;const ul=new Uint8Array(16);function fl(){if(!be&&(be=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!be))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return be(ul)}const F=[];for(let e=0;e<256;++e)F.push((e+256).toString(16).slice(1));function al(e,t=0){return(F[e[t+0]]+F[e[t+1]]+F[e[t+2]]+F[e[t+3]]+"-"+F[e[t+4]]+F[e[t+5]]+"-"+F[e[t+6]]+F[e[t+7]]+"-"+F[e[t+8]]+F[e[t+9]]+"-"+F[e[t+10]]+F[e[t+11]]+F[e[t+12]]+F[e[t+13]]+F[e[t+14]]+F[e[t+15]]).toLowerCase()}const dl=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Un={randomUUID:dl};function pl(e,t,n){if(Un.randomUUID&&!t&&!e)return Un.randomUUID();e=e||{};const i=e.random||(e.rng||fl)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let l=0;l<16;++l)t[n+l]=i[l];return t}return al(i)}function _l(){let e="user",t=1;var n=fn();let i=n.hp+qi,l=n.str+Bi,s=n.dex+Yi,o=0,r=0;return new ai(e,t,i,l,s,r,o)}function an(e){return e??(e=V(O)),Math.pow(e.lvl,3)+e.lvl*200-1}function ml(){let e=V(O),t=V(Ne),n=V(xe);for(;e.xp>an(e);){e.lvl++;let i=Math.round(oi/2),l=fn(i,t,n);e.hpbase+=l.hp+i,e.strbase=Math.max(e.strbase+l.str,1),e.dexbase=Math.max(e.dexbase+l.dex,1),t=void 0,n=void 0}e.hp=e.hpbase,e.str=e.strbase,e.dex=e.dexbase,O.set(e),Ne.set(0),xe.set(0)}function hl(){let e=_l();console.log(JSON.stringify(e)),O.set(e),Ne.set(0),xe.set(0),di.set(0)}const Ne=_t(0),xe=_t(0),di=_t(0),O=_t();let P,z,J,Oe,Pe,Lt=!0,dn=Qi,Dn=Zi,Je=0,pn=0;const vl="u",_n="f",$e="p",mn="t",pi="w",Ie="c";function _i(e,t,n){e=Math.max(e,1),P=Lt?[]:P??[];let i=t??Math.floor(e/2),l=n??Math.floor(e/2);z=i,J=l,Lt&&(Oe=z,Pe=J,Je=0,pn=0),Qe(i,l,Ze.CITY);for(let s=1;s<e;s++){let o=s%2==0?s:-s;i+=o,l+=o,Qe(i,l)}P=mi(!0,e,t,n)}function gl(e,t,n,i){if(!e)return e;i??(i=dn);let l=Math.floor(i/2);t??(t=l),n??(n=l);let s=[];for(let o=0;o<i;o++)for(let r=0;r<i;r++){let c=t-l+o,u=n-l+r,f=(e[c]&&e[c][u])??_n;s[o]??(s[o]=[]),s[o][r]=f}return s[l][l]=vl,s}function bl(){let e=hi();if(z<e&&(P.splice(0,0,[]),Oe++,z=e),J<e){let t=vi();for(let n=0;n<t;n++)P[n].splice(0,0,void 0);Pe++,J=e}}function kl(e){return[...e.map(t=>[...t])]}function mi(e,t,n,i){var a;if(!P)return P;t=t??dn,n=n??z,i=i??J;let l=kl(P),s=vi(),o=$l(),r=Math.min(t??s,s),c=Math.min(t??o,o),u=Math.max((n??0)-Math.floor(r/2),0),f=Math.max((i??0)-Math.floor(c/2),0);for(let p=0;p<r;p++)for(let _=0;_<c;_++){let h=u+p,g=f+_;l[h]??(l[h]=[]);let y=e?Le(h,g):_n;(a=l[h])[g]??(a[g]=y)}return l}function Qe(e,t,n){var i;return e??(e=z),t??(t=J),P??(P=[]),P[e]??(P[e]=[]),(i=P[e])[t]??(i[t]=n??Le(e,t)),n}function Le(e,t){if(e??(e=z),t??(t=J),P&&P[e]&&P[e][t])return P[e][t];let n;if(W(Pn)==1&&W(Pn)<Je++)n=Ie,Je=0;else{let i=yl(e,t),l=W(i.length+1);if(l>=i.length){let s=[$e,mn];l=W(s.length+tl),n=l>=s.length?$e:s[l]}else n=i[l]}return Lt&&(n==Ie||n==pi)&&(n=$e),Lt||pn++,n}function yl(e,t){let n=[];for(let i=e-1;i<=e+1;i++)for(let l=t-1;l<=t+1;l++)P[i]&&P[i][l]&&P[i][l]!=Ie&&n.push(P[i][l]);return n}function hi(){return Le()==mn?Math.floor(Dn/2):Dn}function vi(e){return e??(e=P??[]),e.length}function $l(e){e??(e=P??[]);let t=e.map(n=>n.length).sort((n,i)=>n-i);return t[t.length-1]}function wl(e){if(z+=e.x,J+=e.y,bl(),Qe()==pi)return z-=e.x,J-=e.y,!1;{let n=hi();n>0&&_i(n*2+1,z,J)}return!0}function El(){let e=mi(!1);return gl(e,z,J,dn)}function Ml(){let e=Math.abs(z-Oe),t=Math.abs(J-Pe);return Math.ceil(Math.hypot(e,t))}function Cl(){return pn}function Sl(){return{x:z,y:J,abs:{x:z-Oe,y:J-Pe},terrain:Le(),distance:Ml()}}function Tl(){Lt=!0,_i(Ji),Lt=!1}const Ze={FOG:_n,PLAIN:$e,FOREST:mn,CITY:Ie},Xt=_t(0),ht={miniMap:El,location:Sl,move:wl,getExplored:Cl};function jl(e){let t,n,i,l,s,o,r,c,u,f,a,p;return{c(){t=m("div"),n=m("div"),i=m("h1"),i.textContent="Relic",l=M(),s=m("p"),s.textContent="by elyktc",o=M(),r=m("div"),c=m("button"),c.textContent="Start",b(i,"class","svelte-19wnq64"),ft(i,"margin-right","50px"),ft(s,"margin-left","100px"),b(n,"class","view col svelte-19wnq64"),b(r,"class","ctrls")},m(_,h){x(_,t,h),d(t,n),d(n,i),d(n,l),d(n,s),d(t,o),d(t,r),d(r,c),f=!0,a||(p=[R(window,"keydown",e[0]),R(c,"click",gt)],a=!0)},p:T,i(_){f||(G(()=>{u||(u=st(t,rt,{},!0)),u.run(1)}),f=!0)},o(_){u||(u=st(t,rt,{},!1)),u.run(0),f=!1},d(_){_&&j(t),_&&u&&u.end(),a=!1,Q(p)}}}function Nl(e,t,n){let i;Y(e,Xt,s=>n(1,i=s));function l(s){switch(s.key){case" ":gt();break}}return yt(()=>{hl(),Pt(Xt,i=0,i)}),[l]}class xl extends tt{constructor(t){super(),Z(this,t,Nl,jl,X,{})}}function Il(e){let t,n,i,l,s,o,r,c,u,f,a,p,_,h,g,y,E,$,v,k,w,C,A;return{c(){t=m("div"),n=m("div"),i=m("button"),i.textContent="NW",l=M(),s=m("button"),s.textContent="N",o=M(),r=m("button"),r.textContent="NE",c=M(),u=m("div"),f=m("button"),f.textContent="W",a=M(),p=m("button"),p.textContent="Menu",_=M(),h=m("button"),h.textContent="E",g=M(),y=m("div"),E=m("button"),E.textContent="SW",$=M(),v=m("button"),v.textContent="S",k=M(),w=m("button"),w.textContent="SE",b(t,"class","ctrls")},m(I,et){x(I,t,et),d(t,n),d(n,i),d(n,l),d(n,s),d(n,o),d(n,r),d(t,c),d(t,u),d(u,f),d(u,a),d(u,p),d(u,_),d(u,h),d(t,g),d(t,y),d(y,E),d(y,$),d(y,v),d(y,k),d(y,w),C||(A=[R(window,"keydown",e[8]),R(i,"click",e[0]),R(s,"click",e[1]),R(r,"click",e[2]),R(f,"click",e[3]),R(p,"click",fi),R(h,"click",e[4]),R(E,"click",e[5]),R(v,"click",e[6]),R(w,"click",e[7])],C=!0)},p:T,i:T,o:T,d(I){I&&j(t),C=!1,Q(A)}}}function Rl(e){const t=si(),n=()=>t("move",{x:-1,y:-1}),i=()=>t("move",{x:-1,y:0}),l=()=>t("move",{x:-1,y:1}),s=()=>t("move",{x:0,y:-1}),o=()=>t("move",{x:0,y:1}),r=()=>t("move",{x:1,y:-1}),c=()=>t("move",{x:1,y:0}),u=()=>t("move",{x:1,y:1});function f(a){switch(a.key){case"x":fi();break;case"q":n();break;case"w":i();break;case"e":l();break;case"a":s();break;case"d":o();break;case"z":r();break;case"s":c();break;case"c":u();break}}return[n,i,l,s,o,r,c,u,f]}class Al extends tt{constructor(t){super(),Z(this,t,Rl,Il,X,{})}}let we=new Map;function Ol(e,t){this.name=e,this.innCost=t}function Pl(){let e=pl().substring(0,8),t=W(nl,il);return new Ol(e,t)}function Ll(e,t){let n=`${e}.${t}`;return we.has(n)||we.set(n,Pl()),we.get(n)}function Ul(){we.clear()}function Dl(e){let t,n,i,l,s,o;return l=new Al({}),l.$on("move",e[2]),{c(){t=m("div"),n=m("div"),i=M(),H(l.$$.fragment),b(n,"class","view field svelte-z27jc")},m(r,c){x(r,t,c),d(t,n),n.innerHTML=e[0],d(t,i),L(l,t,null),o=!0},p(r,[c]){(!o||c&1)&&(n.innerHTML=r[0])},i(r){o||(S(l.$$.fragment,r),G(()=>{s||(s=st(t,rt,{},!0)),s.run(1)}),o=!0)},o(r){N(l.$$.fragment,r),s||(s=st(t,rt,{},!1)),s.run(0),o=!1},d(r){r&&j(t),U(l),r&&s&&s.end()}}}function Fl(e,t,n){let i;Y(e,Xt,u=>n(3,i=u));function l(u){let f=p=>p.map(_=>`<div class="icon map-${_}"></div>`),a=u.map(p=>f(p).join(""));n(0,r=`<div class="row">${a.join('</div><div class="row">')}</div>`)}function s(){return ht.location().terrain==Ze.FOREST?Math.ceil(Ln/2):Ln}function o(u){ht.move(u)&&(Pt(Xt,i++,i),l(ht.miniMap()),ht.location().terrain==Ze.CITY?ol():W(s())==1&&rl())}yt(()=>{i||(Tl(),Ul()),l(ht.miniMap())});let r="";return[r,o,u=>o(u.detail)]}let Hl=class extends tt{constructor(t){super(),Z(this,t,Fl,Dl,X,{})}};function ql(e){let t,n,i,l=e[0].name+"",s,o,r,c,u,f,a=e[0].lvl+"",p,_,h,g,y,E,$=e[0].xp+"",v,k,w,C,A,I,et,mt,K,Jt,D,Qt=e[0].hp+"",Ue,hn,Zt=e[0].hpbase+"",De,vn,Ct,te,gn,ee,ne=e[0].str+"",Fe,bn,St,ie,kn,le,se=e[0].dex+"",He,yn,$t,re,$n,oe,ce=Rt(e[0].gp)+"",qe,wn,Tt,ue,En,fe,ae=Rt(e[1])+"",Be,Mn,jt,de,Cn,pe,Sn,Nt,_e,Tn,me,jn,xt,Ft,Nn,he,bt,nt,Ye,xn;return{c(){t=m("div"),n=m("div"),i=m("h1"),s=B(l),o=M(),r=m("div"),c=m("div"),c.textContent="Level",u=M(),f=m("div"),p=B(a),_=M(),h=m("div"),g=m("div"),g.textContent="Experience",y=M(),E=m("div"),v=B($),k=M(),w=m("div"),C=m("div"),C.textContent="Next level at",A=M(),I=m("div"),I.textContent=`${an()}`,et=M(),mt=m("div"),K=m("div"),K.textContent="Health",Jt=M(),D=m("div"),Ue=B(Qt),hn=B(" / "),De=B(Zt),vn=M(),Ct=m("div"),te=m("div"),te.textContent="Strength",gn=M(),ee=m("div"),Fe=B(ne),bn=M(),St=m("div"),ie=m("div"),ie.textContent="Dexterity",kn=M(),le=m("div"),He=B(se),yn=M(),$t=m("div"),re=m("div"),re.textContent="Gold",$n=M(),oe=m("div"),qe=B(ce),wn=M(),Tt=m("div"),ue=m("div"),ue.textContent="Steps",En=M(),fe=m("div"),Be=B(ae),Mn=M(),jt=m("div"),de=m("div"),de.textContent="Explored",Cn=M(),pe=m("div"),pe.textContent=`${Rt(ht.getExplored())}`,Sn=M(),Nt=m("div"),_e=m("div"),_e.textContent="Distance traveled",Tn=M(),me=m("div"),me.textContent=`${Rt(ht.location().distance)}`,jn=M(),xt=m("div"),Ft=m("button"),Ft.textContent="Reset",Nn=M(),he=m("button"),he.textContent="Back",ft(i,"display","none"),b(c,"class","col label svelte-hfjk0k"),b(f,"class","col value svelte-hfjk0k"),b(r,"class","row svelte-hfjk0k"),b(g,"class","col label svelte-hfjk0k"),b(E,"class","col value svelte-hfjk0k"),b(h,"class","row svelte-hfjk0k"),b(C,"class","col label svelte-hfjk0k"),b(I,"class","col value svelte-hfjk0k"),b(w,"class","row svelte-hfjk0k"),b(K,"class","col label svelte-hfjk0k"),b(D,"class","col value svelte-hfjk0k"),b(mt,"class","row svelte-hfjk0k"),ft(mt,"margin-top","20px"),b(te,"class","col label svelte-hfjk0k"),b(ee,"class","col value svelte-hfjk0k"),b(Ct,"class","row svelte-hfjk0k"),b(ie,"class","col label svelte-hfjk0k"),b(le,"class","col value svelte-hfjk0k"),b(St,"class","row svelte-hfjk0k"),b(re,"class","col label svelte-hfjk0k"),b(oe,"class","col value svelte-hfjk0k"),b($t,"class","row svelte-hfjk0k"),ft($t,"margin","10px 0"),b(ue,"class","col label svelte-hfjk0k"),b(fe,"class","col value svelte-hfjk0k"),b(Tt,"class","row svelte-hfjk0k"),b(de,"class","col label svelte-hfjk0k"),b(pe,"class","col value svelte-hfjk0k"),b(jt,"class","row svelte-hfjk0k"),b(_e,"class","col label svelte-hfjk0k"),b(me,"class","col value svelte-hfjk0k"),b(Nt,"class","row svelte-hfjk0k"),b(n,"class","view col svelte-hfjk0k"),b(Ft,"class","danger svelte-hfjk0k"),b(xt,"class","ctrls")},m(q,ot){x(q,t,ot),d(t,n),d(n,i),d(i,s),d(n,o),d(n,r),d(r,c),d(r,u),d(r,f),d(f,p),d(n,_),d(n,h),d(h,g),d(h,y),d(h,E),d(E,v),d(n,k),d(n,w),d(w,C),d(w,A),d(w,I),d(n,et),d(n,mt),d(mt,K),d(mt,Jt),d(mt,D),d(D,Ue),d(D,hn),d(D,De),d(n,vn),d(n,Ct),d(Ct,te),d(Ct,gn),d(Ct,ee),d(ee,Fe),d(n,bn),d(n,St),d(St,ie),d(St,kn),d(St,le),d(le,He),d(n,yn),d(n,$t),d($t,re),d($t,$n),d($t,oe),d(oe,qe),d(n,wn),d(n,Tt),d(Tt,ue),d(Tt,En),d(Tt,fe),d(fe,Be),d(n,Mn),d(n,jt),d(jt,de),d(jt,Cn),d(jt,pe),d(n,Sn),d(n,Nt),d(Nt,_e),d(Nt,Tn),d(Nt,me),d(t,jn),d(t,xt),d(xt,Ft),d(xt,Nn),d(xt,he),nt=!0,Ye||(xn=[R(window,"keydown",e[2]),R(Ft,"click",un),R(he,"click",gt)],Ye=!0)},p(q,[ot]){(!nt||ot&1)&&l!==(l=q[0].name+"")&&ut(s,l),(!nt||ot&1)&&a!==(a=q[0].lvl+"")&&ut(p,a),(!nt||ot&1)&&$!==($=q[0].xp+"")&&ut(v,$),(!nt||ot&1)&&Qt!==(Qt=q[0].hp+"")&&ut(Ue,Qt),(!nt||ot&1)&&Zt!==(Zt=q[0].hpbase+"")&&ut(De,Zt),(!nt||ot&1)&&ne!==(ne=q[0].str+"")&&ut(Fe,ne),(!nt||ot&1)&&se!==(se=q[0].dex+"")&&ut(He,se),(!nt||ot&1)&&ce!==(ce=Rt(q[0].gp)+"")&&ut(qe,ce),(!nt||ot&2)&&ae!==(ae=Rt(q[1])+"")&&ut(Be,ae)},i(q){nt||(G(()=>{bt||(bt=st(t,rt,{},!0)),bt.run(1)}),nt=!0)},o(q){bt||(bt=st(t,rt,{},!1)),bt.run(0),nt=!1},d(q){q&&j(t),q&&bt&&bt.end(),Ye=!1,Q(xn)}}}function Bl(e,t,n){let i,l;Y(e,O,o=>n(0,i=o)),Y(e,Xt,o=>n(1,l=o));function s(o){switch(o.key){case"q":gt();break;case"Escape":un();break}}return[i,l,s]}class Yl extends tt{constructor(t){super(),Z(this,t,Bl,ql,X,{})}}function Kl(e,{from:t,to:n},i={}){const l=getComputedStyle(e),s=l.transform==="none"?"":l.transform,[o,r]=l.transformOrigin.split(" ").map(parseFloat),c=t.left+t.width*o/n.width-(n.left+o),u=t.top+t.height*r/n.height-(n.top+r),{delay:f=0,duration:a=_=>Math.sqrt(_)*120,easing:p=je}=i;return{delay:f,duration:Dt(a)?a(Math.sqrt(c*c+u*u)):a,easing:p,css:(_,h)=>{const g=h*c,y=h*u,E=_+h*t.width/n.width,$=_+h*t.height/n.height;return`transform: ${s} translate(${g}px, ${y}px) scale(${E}, ${$});`}}}const Gl={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},Xl=()=>{const{subscribe:e,update:t}=_t([]);let n=0;const i={},l=u=>u instanceof Object;return{subscribe:e,push:(u,f={})=>{const a={target:"default",...l(u)?u:{...f,msg:u}},p=i[a.target]||{},_={...Gl,...p,...a,theme:{...p.theme,...a.theme},classes:[...p.classes||[],...a.classes||[]],id:++n};return t(h=>_.reversed?[...h,_]:[_,...h]),n},pop:u=>{t(f=>{if(!f.length||u===0)return[];if(l(u))return f.filter(p=>u(p));const a=u||Math.max(...f.map(p=>p.id));return f.filter(p=>p.id!==a)})},set:(u,f={})=>{const a=l(u)?{...u}:{...f,id:u};t(p=>{const _=p.findIndex(h=>h.id===a.id);return _>-1&&(p[_]={...p[_],...a}),p})},_init:(u="default",f={})=>(i[u]=f,i)}},Ut=Xl();function Fn(e){return Object.prototype.toString.call(e)==="[object Date]"}function tn(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((l,s)=>tn(e[s],l));return l=>i.map(s=>s(l))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Fn(e)&&Fn(t)){e=e.getTime(),t=t.getTime();const s=t-e;return o=>new Date(e+o*s)}const i=Object.keys(t),l={};return i.forEach(s=>{l[s]=tn(e[s],t[s])}),s=>{const o={};return i.forEach(r=>{o[r]=l[r](s)}),o}}if(n==="number"){const i=t-e;return l=>e+l*i}throw new Error(`Cannot interpolate ${n} values`)}function en(e,t={}){const n=_t(e);let i,l=e;function s(o,r){if(e==null)return n.set(e=o),Promise.resolve();l=o;let c=i,u=!1,{delay:f=0,duration:a=400,easing:p=Et,interpolate:_=tn}=Ge(Ge({},t),r);if(a===0)return c&&(c.abort(),c=null),n.set(e=l),Promise.resolve();const h=Wt()+f;let g;return i=Vt(y=>{if(y<h)return!0;u||(g=_(e,o),typeof a=="function"&&(a=a(e,o)),u=!0),c&&(c.abort(),c=null);const E=y-h;return E>a?(n.set(e=o),!1):(n.set(e=g(p(E/a))),!0)}),i.promise}return{set:s,update:(o,r)=>s(o(l,e),r),subscribe:n.subscribe}}function Wl(e){let t,n=e[0].msg+"",i;return{c(){t=new Si(!1),i=ei(),t.a=i},m(l,s){t.m(n,l,s),x(l,i,s)},p(l,s){s&1&&n!==(n=l[0].msg+"")&&t.p(n)},i:T,o:T,d(l){l&&j(i),l&&t.d()}}}function Vl(e){let t,n,i;const l=[e[2]];var s=e[0].component.src;function o(r){let c={};for(let u=0;u<l.length;u+=1)c=Ge(c,l[u]);return{props:c}}return s&&(t=Rn(s,o())),{c(){t&&H(t.$$.fragment),n=ei()},m(r,c){t&&L(t,r,c),x(r,n,c),i=!0},p(r,c){const u=c&4?Di(l,[Fi(r[2])]):{};if(s!==(s=r[0].component.src)){if(t){dt();const f=t;N(f.$$.fragment,1,0,()=>{U(f,1)}),pt()}s?(t=Rn(s,o()),H(t.$$.fragment),S(t.$$.fragment,1),L(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(r){i||(t&&S(t.$$.fragment,r),i=!0)},o(r){t&&N(t.$$.fragment,r),i=!1},d(r){r&&j(n),t&&U(t,r)}}}function Hn(e){let t,n,i;return{c(){t=m("div"),b(t,"class","_toastBtn pe svelte-l65oht"),b(t,"role","button"),b(t,"tabindex","0")},m(l,s){x(l,t,s),n||(i=[R(t,"click",e[4]),R(t,"keydown",e[8])],n=!0)},p:T,d(l){l&&j(t),n=!1,Q(i)}}}function zl(e){let t,n,i,l,s,o,r,c,u,f;const a=[Vl,Wl],p=[];function _(g,y){return g[0].component?0:1}i=_(e),l=p[i]=a[i](e);let h=e[0].dismissable&&Hn(e);return{c(){t=m("div"),n=m("div"),l.c(),s=M(),h&&h.c(),o=M(),r=m("progress"),b(n,"role","status"),b(n,"class","_toastMsg svelte-l65oht"),lt(n,"pe",e[0].component),b(r,"class","_toastBar svelte-l65oht"),r.value=e[1],b(t,"class","_toastItem svelte-l65oht"),lt(t,"pe",e[0].pausable)},m(g,y){x(g,t,y),d(t,n),p[i].m(n,null),d(t,s),h&&h.m(t,null),d(t,o),d(t,r),c=!0,u||(f=[R(t,"mouseenter",e[9]),R(t,"mouseleave",e[6])],u=!0)},p(g,[y]){let E=i;i=_(g),i===E?p[i].p(g,y):(dt(),N(p[E],1,1,()=>{p[E]=null}),pt(),l=p[i],l?l.p(g,y):(l=p[i]=a[i](g),l.c()),S(l,1),l.m(n,null)),(!c||y&1)&&lt(n,"pe",g[0].component),g[0].dismissable?h?h.p(g,y):(h=Hn(g),h.c(),h.m(t,o)):h&&(h.d(1),h=null),(!c||y&2)&&(r.value=g[1]),(!c||y&1)&&lt(t,"pe",g[0].pausable)},i(g){c||(S(l),c=!0)},o(g){N(l),c=!1},d(g){g&&j(t),p[i].d(),h&&h.d(),u=!1,Q(f)}}}function Jl(e,t,n){let i,{item:l}=t;const s=en(l.initial,{duration:l.duration,easing:Et});Y(e,s,v=>n(1,i=v));const o=()=>Ut.pop(l.id),r=()=>{(i===1||i===0)&&o()};let c=l.initial,u=c,f=!1;const a=()=>{!f&&i!==c&&(s.set(i,{duration:0}),f=!0)},p=()=>{if(f){const v=l.duration,k=v-v*((i-u)/(c-u));s.set(c,{duration:k}).then(r),f=!1}};let _={};const h=(v,k="undefined")=>typeof v===k;let g;yt((v=document)=>{if(h(v.hidden))return;const k=()=>v.hidden?a():p(),w="visibilitychange";v.addEventListener(w,k),g=()=>v.removeEventListener(w,k),k()}),li(()=>{h(l.onpop,"function")&&l.onpop(l.id),g&&g()});const E=v=>{v instanceof KeyboardEvent&&["Enter"," "].includes(v.key)&&o()},$=()=>{l.pausable&&a()};return e.$$set=v=>{"item"in v&&n(0,l=v.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(h(l.progress)||n(0,l.next=l.progress,l)),e.$$.dirty&131&&c!==l.next&&(n(7,c=l.next),u=i,f=!1,s.set(c).then(r)),e.$$.dirty&1&&l.component){const{props:v={},sendIdTo:k}=l.component;n(2,_={...v,...k&&{[k]:l.id}})}},[l,i,_,s,o,a,p,c,E,$]}class Ql extends tt{constructor(t){super(),Z(this,t,Jl,zl,X,{item:0})}}function qn(e,t,n){const i=e.slice();return i[5]=t[n],i}function Bn(e,t){let n,i,l,s,o,r,c,u,f=T,a;return i=new Ql({props:{item:t[5]}}),{key:e,first:null,c(){n=m("li"),H(i.$$.fragment),l=M(),b(n,"class",s=Me(t[5].classes.join(" "))+" svelte-yh90az"),b(n,"style",o=t[1](t[5].theme)),this.first=n},m(p,_){x(p,n,_),L(i,n,null),d(n,l),a=!0},p(p,_){t=p;const h={};_&1&&(h.item=t[5]),i.$set(h),(!a||_&1&&s!==(s=Me(t[5].classes.join(" "))+" svelte-yh90az"))&&b(n,"class",s),(!a||_&1&&o!==(o=t[1](t[5].theme)))&&b(n,"style",o)},r(){u=n.getBoundingClientRect()},f(){Ii(n),f(),ii(n,u)},a(){f(),f=xi(n,u,Kl,{duration:200})},i(p){a||(S(i.$$.fragment,p),G(()=>{c&&c.end(1),r=cn(n,Ae,t[5].intro),r.start()}),a=!0)},o(p){N(i.$$.fragment,p),r&&r.invalidate(),c=zt(n,Re,{}),a=!1},d(p){p&&j(n),U(i),p&&c&&c.end()}}}function Zl(e){let t,n=[],i=new Map,l,s=e[0];const o=r=>r[5].id;for(let r=0;r<s.length;r+=1){let c=qn(e,s,r),u=o(c);i.set(u,n[r]=Bn(u,c))}return{c(){t=m("ul");for(let r=0;r<n.length;r+=1)n[r].c();b(t,"class","_toastContainer svelte-yh90az")},m(r,c){x(r,t,c);for(let u=0;u<n.length;u+=1)n[u].m(t,null);l=!0},p(r,[c]){if(c&3){s=r[0],dt();for(let u=0;u<n.length;u+=1)n[u].r();n=Ui(n,c,o,1,r,s,i,t,Li,Bn,null,qn);for(let u=0;u<n.length;u+=1)n[u].a();pt()}},i(r){if(!l){for(let c=0;c<s.length;c+=1)S(n[c]);l=!0}},o(r){for(let c=0;c<n.length;c+=1)N(n[c]);l=!1},d(r){r&&j(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function ts(e,t,n){let i;Y(e,Ut,c=>n(4,i=c));let{options:l={}}=t,{target:s="default"}=t,o;const r=c=>Object.keys(c).reduce((u,f)=>`${u}${f}:${c[f]};`,"");return e.$$set=c=>{"options"in c&&n(2,l=c.options),"target"in c&&n(3,s=c.target)},e.$$.update=()=>{e.$$.dirty&12&&Ut._init(s,l),e.$$.dirty&24&&n(0,o=i.filter(c=>c.target===s))},[o,r,l,s,i]}class es extends tt{constructor(t){super(),Z(this,t,ts,Zl,X,{options:2,target:3})}}function ns(e){let t,n,i,l;return n=new es({props:{options:e[2],target:e[1]}}),{c(){t=m("div"),H(n.$$.fragment),b(t,"class",i=Me(`toast-wrapper-${e[0]}`)+" svelte-gbm9c2")},m(s,o){x(s,t,o),L(n,t,null),l=!0},p(s,[o]){const r={};o&4&&(r.options=s[2]),o&2&&(r.target=s[1]),n.$set(r),(!l||o&1&&i!==(i=Me(`toast-wrapper-${s[0]}`)+" svelte-gbm9c2"))&&b(t,"class",i)},i(s){l||(S(n.$$.fragment,s),l=!0)},o(s){N(n.$$.fragment,s),l=!1},d(s){s&&j(t),U(n)}}}function is(e,t,n){const i={duration:1e3,initial:1,next:0,pausable:!0,dismissable:!1,reversed:!1,intro:{x:0},theme:{},classes:[]},l={duration:500,initial:1,next:0,pausable:!1,dismissable:!1,reversed:!0,intro:{y:20,duration:100},theme:{},classes:[]};let s;yt(()=>{o==1?n(2,s=i):o==2&&n(2,s=l)});let{type:o=1}=t,{target:r=void 0}=t;return e.$$set=c=>{"type"in c&&n(0,o=c.type),"target"in c&&n(1,r=c.target)},[o,r,s]}class nn extends tt{constructor(t){super(),Z(this,t,is,ns,X,{type:0,target:1})}}function ls(){let e="enc",t=Math.max(1,Math.ceil(Ot(ht.location().distance,.1)/Ot(50,.25))),n=fn(oi*t),i=n.hp+Ki,l=n.str+Gi,s=n.dex+Xi,o=W(Wi),r=Math.ceil(Ot(i+l+s)/2);return new ai(e,t,i,l,s,r,o)}function ss(){let e=ls();console.log(JSON.stringify(e)),ct.set(e),Ee.set(0)}const Ee=_t(0),ct=_t();function rs(e){let t;return{c(){t=m("div")},m(n,i){x(n,t,i)},p:T,i:T,o:T,d(n){n&&j(t)}}}function os(e){let t,n,i,l;return{c(){t=m("div"),b(t,"class","icon map-u svelte-btrsmh"),lt(t,"rejoice",e[1].ko())},m(s,o){x(s,t,o),l=!0},p(s,o){e=s,(!l||o&2)&&lt(t,"rejoice",e[1].ko())},i(s){l||(G(()=>{i&&i.end(1),n=cn(t,Ae,e[2]),n.start()}),l=!0)},o(s){n&&n.invalidate(),i=zt(t,e[4],{}),l=!1},d(s){s&&j(t),s&&i&&i.end()}}}function Yn(e){let t,n,i,l,s;return{c(){t=m("div"),n=m("div"),b(n,"class","icon dragon svelte-btrsmh"),lt(n,"rejoice",e[0].ko()),b(t,"class","col enc img svelte-btrsmh")},m(o,r){x(o,t,r),d(t,n),s=!0},p(o,r){e=o,(!s||r&1)&&lt(n,"rejoice",e[0].ko())},i(o){s||(G(()=>{l&&l.end(1),i=cn(n,Ae,e[3]),i.start()}),s=!0)},o(o){i&&i.invalidate(),l=zt(n,e[5],{}),s=!1},d(o){o&&j(t),o&&l&&l.end()}}}function cs(e){let t,n,i,l,s,o,r,c,u,f,a,p,_,h,g=!e[1].ko()&&!e[1].fleeing(),y;const E=[os,rs],$=[];function v(w,C){return C&1&&(l=null),l==null&&(l=!w[0].ko()&&!w[0].fleeing()),l?0:1}s=v(e,-1),o=$[s]=E[s](e),u=new nn({props:{target:"user",type:2}}),_=new nn({props:{target:"enc",type:2}});let k=g&&Yn(e);return{c(){t=m("div"),n=m("div"),i=m("div"),o.c(),r=M(),c=m("div"),H(u.$$.fragment),f=M(),a=m("div"),p=m("div"),H(_.$$.fragment),h=M(),k&&k.c(),b(i,"class","col user img svelte-btrsmh"),b(c,"class","col toast"),b(n,"class","row"),b(p,"class","col toast"),b(a,"class","row"),b(t,"class","row imgs svelte-btrsmh")},m(w,C){x(w,t,C),d(t,n),d(n,i),$[s].m(i,null),d(n,r),d(n,c),L(u,c,null),d(t,f),d(t,a),d(a,p),L(_,p,null),d(a,h),k&&k.m(a,null),y=!0},p(w,[C]){let A=s;s=v(w,C),s===A?$[s].p(w,C):(dt(),N($[A],1,1,()=>{$[A]=null}),pt(),o=$[s],o?o.p(w,C):(o=$[s]=E[s](w),o.c()),S(o,1),o.m(i,null)),C&2&&(g=!w[1].ko()&&!w[1].fleeing()),g?k?(k.p(w,C),C&2&&S(k,1)):(k=Yn(w),k.c(),S(k,1),k.m(a,null)):k&&(dt(),N(k,1,1,()=>{k=null}),pt())},i(w){y||(S(o),S(u.$$.fragment,w),S(_.$$.fragment,w),S(k),y=!0)},o(w){N(o),N(u.$$.fragment,w),N(_.$$.fragment,w),N(k),y=!1},d(w){w&&j(t),$[s].d(),U(u),U(_),k&&k.d()}}}function us(e,t,n){let i,l;Y(e,O,a=>n(0,i=a)),Y(e,ct,a=>n(1,l=a));const s={x:40,duration:ze},o={x:-40,duration:ze},r={amount:40,duration:Ve};function c(a,p,_,h,g){if(!g){if(_)return sl(a,r);{let y=h;return p||(y.x*=-1),Ae(a,y)}}}function u(a){return c(a,l.ko(),i.ko(),s)}function f(a){return c(a,i.ko(),l.ko(),o,i.ko()||i.fleeing())}return[i,l,s,o,u,f]}class fs extends tt{constructor(t){super(),Z(this,t,us,cs,X,{})}}function as(e){let t;return{c(){t=m("div")},m(n,i){x(n,t,i)},p:T,i:T,o:T,d(n){n&&j(t)}}}function ds(e){let t,n,i;return{c(){t=m("progress"),t.value=e[2],b(t,"class","svelte-9px8le")},m(l,s){x(l,t,s),i=!0},p(l,s){(!i||s&4)&&(t.value=l[2])},i(l){i||(n&&n.end(1),i=!0)},o(l){n=zt(t,Re,{duration:100}),i=!1},d(l){l&&j(t),l&&n&&n.end()}}}function ps(e){let t;return{c(){t=m("div")},m(n,i){x(n,t,i)},p:T,i:T,o:T,d(n){n&&j(t)}}}function _s(e){let t,n,i;return{c(){t=m("progress"),t.value=e[3],b(t,"class","svelte-9px8le")},m(l,s){x(l,t,s),i=!0},p(l,s){(!i||s&8)&&(t.value=l[3])},i(l){i||(n&&n.end(1),i=!0)},o(l){n=zt(t,Re,{duration:100}),i=!1},d(l){l&&j(t),l&&n&&n.end()}}}function ms(e){let t,n,i,l,s,o,r,c,u,f,a;const p=[ds,as],_=[];function h($,v){return v&2&&(i=null),i==null&&(i=!$[1].ko()&&!$[1].fleeing()),i?0:1}l=h(e,-1),s=_[l]=p[l](e);const g=[_s,ps],y=[];function E($,v){return v&1&&(c=null),c==null&&(c=!$[0].ko()&&!$[0].fleeing()),c?0:1}return u=E(e,-1),f=y[u]=g[u](e),{c(){t=m("div"),n=m("div"),s.c(),o=M(),r=m("div"),f.c(),b(n,"class","col user"),b(r,"class","col enc"),b(t,"class","row info svelte-9px8le")},m($,v){x($,t,v),d(t,n),_[l].m(n,null),d(t,o),d(t,r),y[u].m(r,null),a=!0},p($,[v]){let k=l;l=h($,v),l===k?_[l].p($,v):(dt(),N(_[k],1,1,()=>{_[k]=null}),pt(),s=_[l],s?s.p($,v):(s=_[l]=p[l]($),s.c()),S(s,1),s.m(n,null));let w=u;u=E($,v),u===w?y[u].p($,v):(dt(),N(y[w],1,1,()=>{y[w]=null}),pt(),f=y[u],f?f.p($,v):(f=y[u]=g[u]($),f.c()),S(f,1),f.m(r,null))},i($){a||(S(s),S(f),a=!0)},o($){N(s),N(f),a=!1},d($){$&&j(t),_[l].d(),y[u].d()}}}function hs(e,t,n){let i,l,s,o;Y(e,ct,u=>n(0,i=u)),Y(e,O,u=>n(1,l=u));const r=en(0,{duration:On,easing:je});Y(e,r,u=>n(2,s=u));const c=en(0,{duration:On,easing:je});return Y(e,c,u=>n(3,o=u)),e.$$.update=()=>{e.$$.dirty&2&&l.hp&&r.set(l.hp/l.hpbase),e.$$.dirty&1&&i.hp&&c.set(i.hp/i.hpbase)},[i,l,s,o,r,c]}class vs extends tt{constructor(t){super(),Z(this,t,hs,ms,X,{})}}function gs(e){let t,n,i,l,s,o;return{c(){t=m("div"),n=m("div"),i=m("div"),l=M(),s=m("div"),o=m("div"),b(i,"class","circle svelte-1uajhnl"),ft(i,"transform",`rotate(${Math.min(e[1],180)}deg)`),b(n,"class","wrapper wrapper1 svelte-1uajhnl"),b(o,"class","circle svelte-1uajhnl"),lt(o,"hidden",e[0]<=50),ft(o,"transform",`rotate(${e[1]}deg)`),b(s,"class","wrapper wrapper2 svelte-1uajhnl"),b(t,"class","progress-bar svelte-1uajhnl"),lt(t,"hidden",e[0]>=100)},m(r,c){x(r,t,c),d(t,n),d(n,i),d(t,l),d(t,s),d(s,o)},p(r,[c]){c&2&&ft(i,"transform",`rotate(${Math.min(r[1],180)}deg)`),c&1&&lt(o,"hidden",r[0]<=50),c&2&&ft(o,"transform",`rotate(${r[1]}deg)`),c&1&&lt(t,"hidden",r[0]>=100)},i:T,o:T,d(r){r&&j(t)}}}const Kn=100;function bs(e,t,n){let i;const l=si();function s(){n(5,u+=Kn),f>=100&&(clearInterval(a),l("ready"))}function o(p){a&&clearInterval(a),n(4,c=p),n(5,u=0),a=setInterval(s,Kn)}function r(){n(5,u=c)}let c=1e3,u,f,a;return e.$$.update=()=>{e.$$.dirty&48&&n(0,f=u/c*100),e.$$.dirty&1&&n(1,i=f*3.6)},[f,i,o,r,c,u]}class ks extends tt{constructor(t){super(),Z(this,t,bs,gs,X,{start:2,cancel:3})}get start(){return this.$$.ctx[2]}get cancel(){return this.$$.ctx[3]}}function ys(e,t=void 0){let n=t?{target:t}:void 0;Ut.push(e,n)}function $s(e,t=void 0){let n={initial:0,next:0};t&&(n.target=t),Ut.push(e,n)}function ws(){Ut.pop(0)}const vt={show:ys,persist:$s,clear:ws};function gi(e,t){let n=e.dex/(e.dex+t.dex);if(t.evading()&&(n=n/4),n=Math.ceil(n*100),W(100)*zi<n)return Ot(e.str)}function Es(){let e=V(O);e.evading()&&(e.status.evading=!1,O.set(e));let t=V(ct),n=gi(e,t);n&&(t.hp-=n,ct.set(t),Te(Ne),t.ko()&&Te(di)),vt.show(bi(n),"enc")}function Ms(){let e=V(O);e.status.evading=!0,O.set(e)}function Cs(){let e=V(O);e.status.fleeing=!0;var t=W(Math.floor(e.gp/2));e.gp-=t,t&&vt.show(`Dropped ${t} gold`),O.set(e)}function Ss(){let e=V(ct);if(V(Ee)>3&&W(1)==1)e.status.fleeing=!0,ct.set(e);else{let t=V(O),n=gi(e,t);n?(t.hp-=n,O.set(t),Ee.set(0)):n===void 0&&(Te(Ee),t.evading()&&Te(xe)),vt.show(bi(n),"user")}}function Ts(e,t){return Math.ceil(t/e*1e3*ci)}function Gn(){return Vi*ci}function js(){let e=V(O),t=V(ct),n=t.xp,i=an();t.fleeing()&&(n*=1-t.hp/t.hpbase,n=Math.floor(Math.min(n,i-e.xp-1))),n=Math.ceil(n*t.lvl/e.lvl),n&&(e.xp+=n,vt.persist(`Gained ${n} experience`,"enc")),t.gp&&!t.fleeing()&&(e.gp+=t.gp,vt.persist(`Found ${t.gp} gold`,"enc")),O.set(e),e.xp>=i&&(ml(),vt.persist("Level up!","enc"))}const bi=e=>e===void 0?"Miss":`${e}`;function Xn(e){let t,n,i,l;return t=new fs({}),i=new vs({}),{c(){H(t.$$.fragment),n=M(),H(i.$$.fragment)},m(s,o){L(t,s,o),x(s,n,o),L(i,s,o),l=!0},i(s){l||(S(t.$$.fragment,s),S(i.$$.fragment,s),l=!0)},o(s){N(t.$$.fragment,s),N(i.$$.fragment,s),l=!1},d(s){U(t,s),s&&j(n),U(i,s)}}}function Wn(e){let t,n,i,l,s,o,r,c,u,f,a,p,_,h,g,y={};a=new ks({props:y}),e[16](a),a.$on("ready",e[10]);function E(k,w){if(k[8])return Is;if(k[0]&&k[5])return xs;if(k[1]&&k[5])return Ns}let $=E(e),v=$&&$(e);return{c(){t=m("div"),n=m("div"),i=m("button"),l=B("Strike"),o=M(),r=m("button"),c=B("Evade"),f=M(),H(a.$$.fragment),p=M(),v&&v.c(),i.disabled=s=!e[4],r.disabled=u=!e[4],b(t,"class","ctrls col")},m(k,w){x(k,t,w),d(t,n),d(n,i),d(i,l),d(n,o),d(n,r),d(r,c),d(n,f),L(a,n,null),d(t,p),v&&v.m(t,null),_=!0,h||(g=[R(i,"click",e[11]),R(r,"click",e[12])],h=!0)},p(k,w){(!_||w&16&&s!==(s=!k[4]))&&(i.disabled=s),(!_||w&16&&u!==(u=!k[4]))&&(r.disabled=u);const C={};a.$set(C),$===($=E(k))&&v?v.p(k,w):(v&&v.d(1),v=$&&$(k),v&&(v.c(),v.m(t,null)))},i(k){_||(S(a.$$.fragment,k),_=!0)},o(k){N(a.$$.fragment,k),_=!1},d(k){k&&j(t),e[16](null),U(a),v&&v.d(),h=!1,Q(g)}}}function Ns(e){let t,n,i;return{c(){t=m("button"),t.textContent="Reset"},m(l,s){x(l,t,s),n||(i=R(t,"click",e[15]),n=!0)},p:T,d(l){l&&j(t),n=!1,i()}}}function xs(e){let t,n,i;return{c(){t=m("button"),t.textContent="Proceed"},m(l,s){x(l,t,s),n||(i=R(t,"click",e[14]),n=!0)},p:T,d(l){l&&j(t),n=!1,i()}}}function Is(e){let t,n,i;return{c(){t=m("button"),t.textContent="Flee"},m(l,s){x(l,t,s),n||(i=R(t,"click",e[13]),n=!0)},p:T,d(l){l&&j(t),n=!1,i()}}}function Rs(e){let t,n,i,l=!e[3].fleeing(),s,o,r,c,u=e[2]&&!e[6]&&Xn(),f=l&&Wn(e);return{c(){t=m("div"),n=m("div"),u&&u.c(),i=M(),f&&f.c(),b(n,"class","view field svelte-1tqkonl")},m(a,p){x(a,t,p),d(t,n),u&&u.m(n,null),d(t,i),f&&f.m(t,null),o=!0,r||(c=R(window,"keydown",e[9]),r=!0)},p(a,[p]){a[2]&&!a[6]?u?p&68&&S(u,1):(u=Xn(),u.c(),S(u,1),u.m(n,null)):u&&(dt(),N(u,1,1,()=>{u=null}),pt()),p&8&&(l=!a[3].fleeing()),l?f?(f.p(a,p),p&8&&S(f,1)):(f=Wn(a),f.c(),S(f,1),f.m(t,null)):f&&(dt(),N(f,1,1,()=>{f=null}),pt())},i(a){o||(S(u),S(f),G(()=>{s||(s=st(t,rt,{},!0)),s.run(1)}),o=!0)},o(a){N(u),N(f),s||(s=st(t,rt,{},!1)),s.run(0),o=!1},d(a){a&&j(t),u&&u.d(),f&&f.d(),a&&s&&s.end(),r=!1,c()}}}function As(e,t,n){let i,l,s;Y(e,ct,K=>n(2,l=K)),Y(e,O,K=>n(3,s=K));function o(K){switch(K.key){case"f":u();break;case"v":f();break;case"q":i?a():C&&k?g():A&&k&&y();break}}function r(){i&&($=Ot(Gn()),I.start($))}function c(){i&&n(4,v=!0)}function u(){v&&(n(4,v=!1),Es(),setTimeout(r,1))}function f(){v&&(n(4,v=!1),Ms(),setTimeout(r,1))}function a(){I.cancel(),Cs(),kt(1e3,gt)}function p(){i&&(Ss(),et=kt(Ot(E),p))}function _(){n(0,C=!0),I.cancel(),n(4,v=!1),kt(Ve,()=>{js(),n(5,k=!0)})}function h(){n(1,A=!0),I.cancel(),n(4,v=!1),kt(Ve,()=>{vt.persist("Game over"),n(5,k=!0)})}function g(){n(6,w=!0),kt(ze,gt)}function y(){un()}yt(()=>{ss(),E=Ts(l.dex,s.dex),$=Gn();const K=O.subscribe(D=>{D!=null&&D.ko()&&h()}),Jt=ct.subscribe(D=>{(D!=null&&D.ko()||D!=null&&D.fleeing())&&_()});return et=kt(W(E),p),I.start($),()=>{I==null||I.cancel(),clearTimeout(et),Jt(),K(),Pt(O,s.status.fleeing=!1,s),Pt(ct,l=null,l)}});let E,$,v,k,w,C,A,I,et;function mt(K){Xe[K?"unshift":"push"](()=>{I=K,n(7,I)})}return e.$$.update=()=>{e.$$.dirty&15&&n(8,i=!C&&!A&&!s.fleeing()&&!(l!=null&&l.fleeing()))},[C,A,l,s,v,k,w,I,i,o,c,u,f,a,g,y,mt]}class Os extends tt{constructor(t){super(),Z(this,t,As,Rs,X,{})}}function Vn(e){let t,n,i,l=e[0].innCost+"",s,o;return{c(){t=m("p"),t.textContent="Inn",n=M(),i=m("p"),s=B(l),o=B(" gold per night")},m(r,c){x(r,t,c),x(r,n,c),x(r,i,c),d(i,s),d(i,o)},p(r,c){c&1&&l!==(l=r[0].innCost+"")&&ut(s,l)},d(r){r&&j(t),r&&j(n),r&&j(i)}}}function Ps(e){let t,n,i,l,s,o,r,c,u,f,a,p=e[0]&&Vn(e);return{c(){t=m("div"),n=m("div"),p&&p.c(),i=M(),l=m("div"),s=m("button"),s.textContent="Rest",o=M(),r=m("button"),r.textContent="Leave",b(n,"class","view col"),b(l,"class","ctrls")},m(_,h){x(_,t,h),d(t,n),p&&p.m(n,null),d(t,i),d(t,l),d(l,s),d(l,o),d(l,r),u=!0,f||(a=[R(window,"keydown",e[1]),R(s,"click",e[2]),R(r,"click",gt)],f=!0)},p(_,[h]){_[0]?p?p.p(_,h):(p=Vn(_),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},i(_){u||(G(()=>{c||(c=st(t,rt,{},!0)),c.run(1)}),u=!0)},o(_){c||(c=st(t,rt,{},!1)),c.run(0),u=!1},d(_){_&&j(t),p&&p.d(),_&&c&&c.end(),f=!1,Q(a)}}}function Ls(e,t,n){let i;Y(e,O,r=>n(3,i=r));function l(r){switch(r.key){case"q":gt();break;case"r":s();break}}function s(){i.gp>=o.innCost?(Pt(O,i.gp-=o.innCost,i),cl()):vt.show("Not enough gold")}yt(()=>{let r=ht.location().abs;n(0,o=Ll(r.x,r.y))});let o;return[o,l,s]}class Us extends tt{constructor(t){super(),Z(this,t,Ls,Ps,X,{})}}function Ds(e){let t,n,i,l,s;return{c(){t=m("div"),n=m("div"),i=m("div"),b(i,"class","icon moon"),ft(i,"margin-top","80px"),b(n,"class","view")},m(o,r){x(o,t,r),d(t,n),d(n,i),s=!0},p:T,i(o){s||(G(()=>{l||(l=st(t,rt,{},!0)),l.run(1)}),s=!0)},o(o){l||(l=st(t,rt,{},!1)),l.run(0),s=!1},d(o){o&&j(t),o&&l&&l.end()}}}function Fs(e,t,n){let i;return Y(e,O,l=>n(0,i=l)),yt(()=>{Pt(O,i.hp=i.hpbase,i),kt(2e3,gt)}),[]}class Hs extends tt{constructor(t){super(),Z(this,t,Fs,Ds,X,{})}}function qs(e){let t,n;return t=new Hs({}),{c(){H(t.$$.fragment)},m(i,l){L(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){U(t,i)}}}function Bs(e){let t,n;return t=new Us({}),{c(){H(t.$$.fragment)},m(i,l){L(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){U(t,i)}}}function Ys(e){let t,n;return t=new Os({}),{c(){H(t.$$.fragment)},m(i,l){L(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){U(t,i)}}}function Ks(e){let t,n;return t=new Yl({}),{c(){H(t.$$.fragment)},m(i,l){L(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){U(t,i)}}}function Gs(e){let t,n;return t=new Hl({}),{c(){H(t.$$.fragment)},m(i,l){L(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){U(t,i)}}}function Xs(e){let t,n;return t=new xl({}),{c(){H(t.$$.fragment)},m(i,l){L(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){U(t,i)}}}function Ws(e){let t,n,i,l,s,o;n=new nn({});const r=[Xs,Gs,Ks,Ys,Bs,qs],c=[];function u(f,a){return f[0]==it.TITLE?0:f[0]==it.MAP?1:f[0]==it.MENU?2:f[0]==it.ENC?3:f[0]==it.CITY?4:f[0]==it.SLEEP?5:-1}return~(l=u(e))&&(s=c[l]=r[l](e)),{c(){t=m("main"),H(n.$$.fragment),i=M(),s&&s.c()},m(f,a){x(f,t,a),L(n,t,null),d(t,i),~l&&c[l].m(t,null),o=!0},p(f,[a]){let p=l;l=u(f),l!==p&&(s&&(dt(),N(c[p],1,1,()=>{c[p]=null}),pt()),~l?(s=c[l],s||(s=c[l]=r[l](f),s.c()),S(s,1),s.m(t,null)):s=null)},i(f){o||(S(n.$$.fragment,f),S(s),o=!0)},o(f){N(n.$$.fragment,f),N(s),o=!1},d(f){f&&j(t),U(n),~l&&c[l].d()}}}function Vs(e,t,n){let i;yt(()=>{i=Mt.subscribe(s=>{n(0,l=void 0),vt.clear(),kt(ui,()=>{n(0,l=s)})})}),li(i);let l;return[l]}class zs extends tt{constructor(t){super(),Z(this,t,Vs,Ws,X,{})}}new zs({target:document.getElementById("app")});
