var _i=Object.defineProperty;var mi=(e,t,n)=>t in e?_i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Rt=(e,t,n)=>(mi(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function j(){}const wt=e=>e;function He(e,t){for(const n in t)e[n]=t[n];return e}function Bn(e){return e()}function Mn(){return Object.create(null)}function Q(e){e.forEach(Bn)}function Ut(e){return typeof e=="function"}function G(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function hi(e){return Object.keys(e).length===0}function Yn(e,...t){if(e==null)return j;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function yt(e){let t;return Yn(e,n=>t=n)(),t}function B(e,t,n){e.$$.on_destroy.push(Yn(t,n))}function $e(e){return e??""}function ut(e,t,n){return e.set(n),t}const Kn=typeof window<"u";let Gt=Kn?()=>window.performance.now():()=>Date.now(),Qe=Kn?e=>requestAnimationFrame(e):j;const Ot=new Set;function Gn(e){Ot.forEach(t=>{t.c(e)||(Ot.delete(t),t.f())}),Ot.size!==0&&Qe(Gn)}function Xt(e){let t;return Ot.size===0&&Qe(Gn),{promise:new Promise(n=>{Ot.add(t={c:e,f:n})}),abort(){Ot.delete(t)}}}function p(e,t){e.appendChild(t)}function Xn(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function vi(e){const t=h("style");return gi(Xn(e),t),t.sheet}function gi(e,t){return p(e.head||e,t),t.sheet}function x(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e){return document.createElement(e)}function bi(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function W(e){return document.createTextNode(e)}function C(){return W(" ")}function Vn(){return W("")}function R(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function v(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ki(e){return Array.from(e.childNodes)}function ct(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ft(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function it(e,t,n){e.classList[n?"add":"remove"](t)}function zn(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,i,t),l}class yi{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=bi(n.nodeName):this.e=h(n.nodeName),this.t=n,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)x(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(S)}}function Sn(e,t){return new e(t)}const we=new Map;let Ee=0;function $i(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function wi(e,t){const n={stylesheet:vi(t),rules:{}};return we.set(e,n),n}function Wt(e,t,n,i,l,s,o,r=0){const c=16.666/i;let u=`{
`;for(let k=0;k<=1;k+=c){const w=t+(n-t)*s(k);u+=k*100+`%{${o(w,1-w)}}
`}const a=u+`100% {${o(n,1-n)}}
}`,f=`__svelte_${$i(a)}_${r}`,d=Xn(e),{stylesheet:_,rules:m}=we.get(d)||wi(d,e);m[f]||(m[f]=!0,_.insertRule(`@keyframes ${f} ${a}`,_.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${f} ${i}ms linear ${l}ms 1 both`,Ee+=1,f}function Bt(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),l=n.length-i.length;l&&(e.style.animation=i.join(", "),Ee-=l,Ee||Ei())}function Ei(){Qe(()=>{Ee||(we.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&S(t)}),we.clear())})}function Ci(e,t,n,i){if(!t)return j;const l=e.getBoundingClientRect();if(t.left===l.left&&t.right===l.right&&t.top===l.top&&t.bottom===l.bottom)return j;const{delay:s=0,duration:o=300,easing:r=wt,start:c=Gt()+s,end:u=c+o,tick:a=j,css:f}=n(e,{from:t,to:l},i);let d=!0,_=!1,m;function g(){f&&(m=Wt(e,0,1,o,s,r,f)),s||(_=!0)}function k(){f&&Bt(e,m),d=!1}return Xt(w=>{if(!_&&w>=c&&(_=!0),_&&w>=u&&(a(1,0),k()),!d)return!1;if(_){const M=w-c,y=0+1*r(M/o);a(y,1-y)}return!0}),g(),a(0,1),k}function Mi(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,l=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,Qn(e,l)}}function Qn(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),l=i.transform==="none"?"":i.transform;e.style.transform=`${l} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Yt;function qt(e){Yt=e}function Ze(){if(!Yt)throw new Error("Function called outside component initialization");return Yt}function gt(e){Ze().$$.on_mount.push(e)}function Zn(e){Ze().$$.on_destroy.push(e)}function Jn(){const e=Ze();return(t,n,{cancelable:i=!1}={})=>{const l=e.$$.callbacks[t];if(l){const s=zn(t,n,{cancelable:i});return l.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}const Ht=[],qe=[],ve=[],Tn=[],Si=Promise.resolve();let We=!1;function Ti(){We||(We=!0,Si.then(ti))}function K(e){ve.push(e)}const Fe=new Set;let _e=0;function ti(){const e=Yt;do{for(;_e<Ht.length;){const t=Ht[_e];_e++,qt(t),ji(t.$$)}for(qt(null),Ht.length=0,_e=0;qe.length;)qe.pop()();for(let t=0;t<ve.length;t+=1){const n=ve[t];Fe.has(n)||(Fe.add(n),n())}ve.length=0}while(Ht.length);for(;Tn.length;)Tn.pop()();We=!1,Fe.clear(),qt(e)}function ji(e){if(e.fragment!==null){e.update(),Q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(K)}}let Ft;function Je(){return Ft||(Ft=Promise.resolve(),Ft.then(()=>{Ft=null})),Ft}function $t(e,t,n){e.dispatchEvent(zn(`${t?"intro":"outro"}${n}`))}const ge=new Set;let at;function ht(){at={r:0,c:[],p:at}}function vt(){at.r||Q(at.c),at=at.p}function T(e,t){e&&e.i&&(ge.delete(e),e.i(t))}function I(e,t,n,i){if(e&&e.o){if(ge.has(e))return;ge.add(e),at.c.push(()=>{ge.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const tn={duration:0};function en(e,t,n){const i={direction:"in"};let l=t(e,n,i),s=!1,o,r,c=0;function u(){o&&Bt(e,o)}function a(){const{delay:d=0,duration:_=300,easing:m=wt,tick:g=j,css:k}=l||tn;k&&(o=Wt(e,0,1,_,d,m,k,c++)),g(0,1);const w=Gt()+d,M=w+_;r&&r.abort(),s=!0,K(()=>$t(e,!0,"start")),r=Xt(y=>{if(s){if(y>=M)return g(1,0),$t(e,!0,"end"),u(),s=!1;if(y>=w){const b=m((y-w)/_);g(b,1-b)}}return s})}let f=!1;return{start(){f||(f=!0,Bt(e),Ut(l)?(l=l(i),Je().then(a)):a())},invalidate(){f=!1},end(){s&&(u(),s=!1)}}}function nn(e,t,n){const i={direction:"out"};let l=t(e,n,i),s=!0,o;const r=at;r.r+=1;function c(){const{delay:u=0,duration:a=300,easing:f=wt,tick:d=j,css:_}=l||tn;_&&(o=Wt(e,1,0,a,u,f,_));const m=Gt()+u,g=m+a;K(()=>$t(e,!1,"start")),Xt(k=>{if(s){if(k>=g)return d(0,1),$t(e,!1,"end"),--r.r||Q(r.c),!1;if(k>=m){const w=f((k-m)/a);d(1-w,w)}}return s})}return Ut(l)?Je().then(()=>{l=l(i),c()}):c(),{end(u){u&&l.tick&&l.tick(1,0),s&&(o&&Bt(e,o),s=!1)}}}function lt(e,t,n,i){const l={direction:"both"};let s=t(e,n,l),o=i?0:1,r=null,c=null,u=null;function a(){u&&Bt(e,u)}function f(_,m){const g=_.b-o;return m*=Math.abs(g),{a:o,b:_.b,d:g,duration:m,start:_.start,end:_.start+m,group:_.group}}function d(_){const{delay:m=0,duration:g=300,easing:k=wt,tick:w=j,css:M}=s||tn,y={start:Gt()+m,b:_};_||(y.group=at,at.r+=1),r||c?c=y:(M&&(a(),u=Wt(e,o,_,g,m,k,M)),_&&w(0,1),r=f(y,g),K(()=>$t(e,_,"start")),Xt(b=>{if(c&&b>c.start&&(r=f(c,g),c=null,$t(e,r.b,"start"),M&&(a(),u=Wt(e,o,r.b,r.duration,0,k,s.css))),r){if(b>=r.end)w(o=r.b,1-o),$t(e,r.b,"end"),c||(r.b?a():--r.group.r||Q(r.group.c)),r=null;else if(b>=r.start){const $=b-r.start;o=r.a+r.d*k($/r.duration),w(o,1-o)}}return!!(r||c)}))}return{run(_){Ut(s)?Je().then(()=>{s=s(l),d(_)}):d(_)},end(){a(),r=c=null}}}function xi(e,t){I(e,1,1,()=>{t.delete(e.key)})}function Ni(e,t){e.f(),xi(e,t)}function Ii(e,t,n,i,l,s,o,r,c,u,a,f){let d=e.length,_=s.length,m=d;const g={};for(;m--;)g[e[m].key]=m;const k=[],w=new Map,M=new Map;for(m=_;m--;){const E=f(l,s,m),A=n(E);let L=o.get(A);L?i&&L.p(E,t):(L=u(A,E),L.c()),w.set(A,k[m]=L),A in g&&M.set(A,Math.abs(m-g[A]))}const y=new Set,b=new Set;function $(E){T(E,1),E.m(r,a),o.set(E.key,E),a=E.first,_--}for(;d&&_;){const E=k[_-1],A=e[d-1],L=E.key,N=A.key;E===A?(a=E.first,d--,_--):w.has(N)?!o.has(L)||y.has(L)?$(E):b.has(N)?d--:M.get(L)>M.get(N)?(b.add(L),$(E)):(y.add(N),d--):(c(A,o),d--)}for(;d--;){const E=e[d];w.has(E.key)||c(E,o)}for(;_;)$(k[_-1]);return k}function Ri(e,t){const n={},i={},l={$$scope:1};let s=e.length;for(;s--;){const o=e[s],r=t[s];if(r){for(const c in o)c in r||(i[c]=1);for(const c in r)l[c]||(n[c]=r[c],l[c]=1);e[s]=r}else for(const c in o)l[c]=1}for(const o in i)o in n||(n[o]=void 0);return n}function Ai(e){return typeof e=="object"&&e!==null?e:{}}function H(e){e&&e.c()}function U(e,t,n,i){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),i||K(()=>{const o=e.$$.on_mount.map(Bn).filter(Ut);e.$$.on_destroy?e.$$.on_destroy.push(...o):Q(o),e.$$.on_mount=[]}),s.forEach(K)}function D(e,t){const n=e.$$;n.fragment!==null&&(Q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Oi(e,t){e.$$.dirty[0]===-1&&(Ht.push(e),Ti(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Z(e,t,n,i,l,s,o,r=[-1]){const c=Yt;qt(e);const u=e.$$={fragment:null,ctx:[],props:s,update:j,not_equal:l,bound:Mn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Mn(),dirty:r,skip_bound:!1,root:t.target||c.$$.root};o&&o(u.root);let a=!1;if(u.ctx=n?n(e,t.props||{},(f,d,..._)=>{const m=_.length?_[0]:d;return u.ctx&&l(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),a&&Oi(e,f)),d}):[],u.update(),a=!0,Q(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const f=ki(t.target);u.fragment&&u.fragment.l(f),f.forEach(S)}else u.fragment&&u.fragment.c();t.intro&&T(e.$$.fragment),U(e,t.target,t.anchor,t.customElement),ti()}qt(c)}class J{$destroy(){D(this,1),this.$destroy=j}$on(t,n){if(!Ut(n))return j;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(t){this.$$set&&!hi(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pi=20,Li=50,Ui=4,Di=4,Fi=10,Hi=2,qi=2,Wi=50,jn=200,Be=500,ei=1,Bi=1e3,Yi=1,Ki=7,Gi=9,Xi=2,Vi=2,xn=200,Nn=10,ni=200,zi=.1,Qi=5,Zi=50;function X(e,t){return e??(e=0),t??(t=0),Math.floor(Math.random()*(e-t+1))+t}function kt(e,t){setTimeout(t,e)}function Ce(e,t){t??(t=zi);let n=Math.ceil(Math.abs(e*t));return X(e+n,e-n)}function me(e){return new Intl.NumberFormat().format(e)}const At=[];function Et(e,t=j){let n;const i=new Set;function l(r){if(G(e,r)&&(e=r,n)){const c=!At.length;for(const u of i)u[1](),At.push(u,e);if(c){for(let u=0;u<At.length;u+=2)At[u][0](At[u+1]);At.length=0}}}function s(r){l(r(e))}function o(r,c=j){const u=[r,c];return i.add(u),i.size===1&&(n=t(l)||j),r(e),()=>{i.delete(u),i.size===0&&(n(),n=null)}}return{set:l,update:s,subscribe:o}}function Ji(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function Me(e){const t=e-1;return t*t*t+1}function tl(e,{delay:t=0,duration:n=400,easing:i=Ji,amount:l=5,opacity:s=0}={}){const o=getComputedStyle(e),r=+o.opacity,c=o.filter==="none"?"":o.filter,u=r*(1-s);return{delay:t,duration:n,easing:i,css:(a,f)=>`opacity: ${r-u*f}; filter: ${c} blur(${f*l}px);`}}function ii(e,{delay:t=0,duration:n=400,easing:i=wt}={}){const l=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*l}`}}function Te(e,{delay:t=0,duration:n=400,easing:i=Me,x:l=0,y:s=0,opacity:o=0}={}){const r=getComputedStyle(e),c=+r.opacity,u=r.transform==="none"?"":r.transform,a=c*(1-o);return{delay:t,duration:n,easing:i,css:(f,d)=>`
			transform: ${u} translate(${(1-f)*l}px, ${(1-f)*s}px);
			opacity: ${c-a*d}`}}const et={TITLE:0,MAP:1,MENU:2,ENC:3,CITY:4,SLEEP:5},Ct=Et(et.TITLE);function dt(){Ct.set(et.MAP)}function li(){Ct.set(et.MENU)}function el(){Ct.set(et.ENC)}function je(){Ct.set(et.TITLE)}function nl(){Ct.set(et.CITY)}function il(){Ct.set(et.SLEEP)}function st(e){return ii(e,{duration:ni})}class si{constructor(t,n,i,l,s,o,r){Rt(this,"block",()=>this.status.blocking=!0);Rt(this,"flee",()=>this.status.fleeing=!0);Rt(this,"blocking",()=>this.status.blocking);Rt(this,"fleeing",()=>this.status.fleeing);Rt(this,"ko",()=>this.hp<=0);this.name=t,this.lvl=n,this.maxhp=i,this.hp=i,this.str=l,this.dex=s,this.xp=o,this.gp=r,this.status={blocking:!1,fleeing:!1}}}function ln(){let e=Pi,t=X(e);e-=t;let n=X(e);return e-=n,{hp:t,str:n,dex:e}}let he;const ll=new Uint8Array(16);function sl(){if(!he&&(he=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!he))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return he(ll)}const F=[];for(let e=0;e<256;++e)F.push((e+256).toString(16).slice(1));function rl(e,t=0){return(F[e[t+0]]+F[e[t+1]]+F[e[t+2]]+F[e[t+3]]+"-"+F[e[t+4]]+F[e[t+5]]+"-"+F[e[t+6]]+F[e[t+7]]+"-"+F[e[t+8]]+F[e[t+9]]+"-"+F[e[t+10]]+F[e[t+11]]+F[e[t+12]]+F[e[t+13]]+F[e[t+14]]+F[e[t+15]]).toLowerCase()}const ol=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),In={randomUUID:ol};function cl(e,t,n){if(In.randomUUID&&!t&&!e)return In.randomUUID();e=e||{};const i=e.random||(e.rng||sl)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let l=0;l<16;++l)t[n+l]=i[l];return t}return rl(i)}function ul(){let e="",t=1;var n=ln();let i=n.hp+Li,l=n.str+Ui,s=n.dex+Di,o=0,r=0;return new si(e,t,i,l,s,r,o)}function ri(){let e=yt(P);return Math.pow(e.lvl,3)+e.lvl*200+-1}function fl(){let e=yt(P);e.lvl++;let t=ln();e.maxhp+=t.hp,e.hp=e.maxhp,e.str+=t.str,e.dex+=t.dex,P.set(e)}function al(){P.set(ul())}const P=Et();let O,V,z,xe,Ne,Pt=!0,sn=Gi,Rn=Xi,Ye=0,rn=0;const dl="u",on="f",be="p",cn="t",oi="w",Se="c";function ci(e,t,n){e=Math.max(e,1),O=Pt?[]:O??[];let i=t??Math.floor(e/2),l=n??Math.floor(e/2);V=i,z=l,Pt&&(xe=V,Ne=z,Ye=0,rn=0),Ke(i,l,Ge.CITY);for(let s=1;s<e;s++){let o=s%2==0?s:-s;i+=o,l+=o,Ke(i,l)}O=ui(!0,e,t,n)}function pl(e,t,n,i){if(!e)return e;i??(i=sn);let l=Math.floor(i/2);t??(t=l),n??(n=l);let s=[];for(let o=0;o<i;o++)for(let r=0;r<i;r++){let c=t-l+o,u=n-l+r,a=(e[c]&&e[c][u])??on;s[o]??(s[o]=[]),s[o][r]=a}return s[l][l]=dl,s}function _l(){let e=fi();if(V<e&&(O.splice(0,0,[]),xe++,V=e),z<e){let t=ai();for(let n=0;n<t;n++)O[n].splice(0,0,void 0);Ne++,z=e}}function ml(e){return[...e.map(t=>[...t])]}function ui(e,t,n,i){var f;if(!O)return O;t=t??sn,n=n??V,i=i??z;let l=ml(O),s=ai(),o=vl(),r=Math.min(t??s,s),c=Math.min(t??o,o),u=Math.max((n??0)-Math.floor(r/2),0),a=Math.max((i??0)-Math.floor(c/2),0);for(let d=0;d<r;d++)for(let _=0;_<c;_++){let m=u+d,g=a+_;l[m]??(l[m]=[]);let k=e?Ie(m,g):on;(f=l[m])[g]??(f[g]=k)}return l}function Ke(e,t,n){var i;return e??(e=V),t??(t=z),O??(O=[]),O[e]??(O[e]=[]),(i=O[e])[t]??(i[t]=n??Ie(e,t)),n}function Ie(e,t){if(e??(e=V),t??(t=z),O&&O[e]&&O[e][t])return O[e][t];let n;if(X(xn)==1&&X(xn)<Ye++)n=Se,Ye=0;else{let i=hl(e,t),l=X(i.length+1);if(l>=i.length){let s=[be,cn];l=X(s.length+Vi),n=l>=s.length?be:s[l]}else n=i[l]}return Pt&&(n==Se||n==oi)&&(n=be),Pt||rn++,n}function hl(e,t){let n=[];for(let i=e-1;i<=e+1;i++)for(let l=t-1;l<=t+1;l++)O[i]&&O[i][l]&&O[i][l]!=Se&&n.push(O[i][l]);return n}function fi(){return Ie()==cn?Math.floor(Rn/2):Rn}function ai(e){return e??(e=O??[]),e.length}function vl(e){e??(e=O??[]);let t=e.map(n=>n.length).sort((n,i)=>n-i);return t[t.length-1]}function gl(e){if(V+=e.x,z+=e.y,_l(),Ke()==oi)return V-=e.x,z-=e.y,!1;{let n=fi();n>0&&ci(n*2+1,V,z)}return!0}function bl(){let e=ui(!1);return pl(e,V,z,sn)}function kl(){let e=Math.abs(V-xe),t=Math.abs(z-Ne);return Math.ceil(Math.hypot(e,t))}function yl(){return rn}function $l(){return{x:V,y:z,abs:{x:V-xe,y:z-Ne},terrain:Ie(),distance:kl()}}function wl(){Pt=!0,ci(Ki),Pt=!1}const Ge={FOG:on,PLAIN:be,FOREST:cn,CITY:Se},Kt=Et(0),mt={miniMap:bl,location:$l,move:gl,getExplored:yl};function El(e){let t,n,i,l,s,o,r,c,u,a,f,d;return{c(){t=h("div"),n=h("div"),i=h("h1"),i.textContent="Relic",l=C(),s=h("p"),s.textContent="by elyktc",o=C(),r=h("div"),c=h("button"),c.textContent="Start",v(i,"class","svelte-19wnq64"),ft(i,"margin-right","50px"),ft(s,"margin-left","100px"),v(n,"class","view col svelte-19wnq64"),v(r,"class","ctrls")},m(_,m){x(_,t,m),p(t,n),p(n,i),p(n,l),p(n,s),p(t,o),p(t,r),p(r,c),a=!0,f||(d=[R(window,"keydown",e[0]),R(c,"click",dt)],f=!0)},p:j,i(_){a||(K(()=>{u||(u=lt(t,st,{},!0)),u.run(1)}),a=!0)},o(_){u||(u=lt(t,st,{},!1)),u.run(0),a=!1},d(_){_&&S(t),_&&u&&u.end(),f=!1,Q(d)}}}function Cl(e,t,n){let i;B(e,Kt,s=>n(1,i=s));function l(s){switch(s.key){case" ":dt();break}}return gt(()=>{al(),ut(Kt,i=0,i)}),[l]}class Ml extends J{constructor(t){super(),Z(this,t,Cl,El,G,{})}}function Sl(e){let t,n,i,l,s,o,r,c,u,a,f,d,_,m,g,k,w,M,y,b,$,E,A;return{c(){t=h("div"),n=h("div"),i=h("button"),i.textContent="NW",l=C(),s=h("button"),s.textContent="N",o=C(),r=h("button"),r.textContent="NE",c=C(),u=h("div"),a=h("button"),a.textContent="W",f=C(),d=h("button"),d.textContent="Menu",_=C(),m=h("button"),m.textContent="E",g=C(),k=h("div"),w=h("button"),w.textContent="SW",M=C(),y=h("button"),y.textContent="S",b=C(),$=h("button"),$.textContent="SE",v(t,"class","ctrls")},m(L,N){x(L,t,N),p(t,n),p(n,i),p(n,l),p(n,s),p(n,o),p(n,r),p(t,c),p(t,u),p(u,a),p(u,f),p(u,d),p(u,_),p(u,m),p(t,g),p(t,k),p(k,w),p(k,M),p(k,y),p(k,b),p(k,$),E||(A=[R(window,"keydown",e[8]),R(i,"click",e[0]),R(s,"click",e[1]),R(r,"click",e[2]),R(a,"click",e[3]),R(d,"click",li),R(m,"click",e[4]),R(w,"click",e[5]),R(y,"click",e[6]),R($,"click",e[7])],E=!0)},p:j,i:j,o:j,d(L){L&&S(t),E=!1,Q(A)}}}function Tl(e){const t=Jn(),n=()=>t("move",{x:-1,y:-1}),i=()=>t("move",{x:-1,y:0}),l=()=>t("move",{x:-1,y:1}),s=()=>t("move",{x:0,y:-1}),o=()=>t("move",{x:0,y:1}),r=()=>t("move",{x:1,y:-1}),c=()=>t("move",{x:1,y:0}),u=()=>t("move",{x:1,y:1});function a(f){switch(f.key){case"x":li();break;case"q":n();break;case"w":i();break;case"e":l();break;case"a":s();break;case"d":o();break;case"z":r();break;case"s":c();break;case"c":u();break}}return[n,i,l,s,o,r,c,u,a]}class jl extends J{constructor(t){super(),Z(this,t,Tl,Sl,G,{})}}let ke=new Map;function xl(e,t){this.name=e,this.innCost=t}function Nl(){let e=cl().substring(0,8),t=X(Qi,Zi);return new xl(e,t)}function Il(e,t){let n=`${e}.${t}`;return ke.has(n)||ke.set(n,Nl()),ke.get(n)}function Rl(){ke.clear()}function Al(e){let t,n,i,l,s,o;return l=new jl({}),l.$on("move",e[2]),{c(){t=h("div"),n=h("div"),i=C(),H(l.$$.fragment),v(n,"class","view field svelte-z27jc")},m(r,c){x(r,t,c),p(t,n),n.innerHTML=e[0],p(t,i),U(l,t,null),o=!0},p(r,[c]){(!o||c&1)&&(n.innerHTML=r[0])},i(r){o||(T(l.$$.fragment,r),K(()=>{s||(s=lt(t,st,{},!0)),s.run(1)}),o=!0)},o(r){I(l.$$.fragment,r),s||(s=lt(t,st,{},!1)),s.run(0),o=!1},d(r){r&&S(t),D(l),r&&s&&s.end()}}}function Ol(e,t,n){let i;B(e,Kt,u=>n(3,i=u));function l(u){let a=d=>d.map(_=>`<div class="icon map-${_}"></div>`),f=u.map(d=>a(d).join(""));n(0,r=`<div class="row">${f.join('</div><div class="row">')}</div>`)}function s(){return mt.location().terrain==Ge.FOREST?Math.ceil(Nn/2):Nn}function o(u){mt.move(u)&&(ut(Kt,i++,i),l(mt.miniMap()),mt.location().terrain==Ge.CITY?nl():X(s())==1&&el())}gt(()=>{i||(wl(),Rl()),l(mt.miniMap())});let r="";return[r,o,u=>o(u.detail)]}let Pl=class extends J{constructor(t){super(),Z(this,t,Ol,Al,G,{})}};function Ll(e){let t,n,i,l=e[0].name+"",s,o,r,c,u,a,f=e[0].lvl+"",d,_,m,g,k,w,M=e[0].xp+"",y,b,$,E,A,L,N,nt,Y,un,Mt,Vt=e[0].hp+"",Re,fn,zt=e[0].maxhp+"",Ae,an,St,Qt,dn,Zt,Jt=e[0].str+"",Oe,pn,Tt,te,_n,ee,ne=e[0].dex+"",Pe,mn,bt,ie,hn,le,se=e[0].gp+"",Le,vn,jt,re,gn,oe,ce=me(e[1])+"",Ue,bn,xt,ue,kn,fe,yn,Nt,ae,$n,de,wn,It,Dt,En,pe,_t,tt,De,Cn;return{c(){t=h("div"),n=h("div"),i=h("h1"),s=W(l),o=C(),r=h("div"),c=h("div"),c.textContent="Level",u=C(),a=h("div"),d=W(f),_=C(),m=h("div"),g=h("div"),g.textContent="Experience",k=C(),w=h("div"),y=W(M),b=C(),$=h("div"),E=h("div"),E.textContent="Next level at",A=C(),L=h("div"),L.textContent=`${ri()}`,N=C(),nt=h("div"),Y=h("div"),Y.textContent="Health",un=C(),Mt=h("div"),Re=W(Vt),fn=W(" / "),Ae=W(zt),an=C(),St=h("div"),Qt=h("div"),Qt.textContent="Strength",dn=C(),Zt=h("div"),Oe=W(Jt),pn=C(),Tt=h("div"),te=h("div"),te.textContent="Dexterity",_n=C(),ee=h("div"),Pe=W(ne),mn=C(),bt=h("div"),ie=h("div"),ie.textContent="Gold",hn=C(),le=h("div"),Le=W(se),vn=C(),jt=h("div"),re=h("div"),re.textContent="Steps",gn=C(),oe=h("div"),Ue=W(ce),bn=C(),xt=h("div"),ue=h("div"),ue.textContent="Explored",kn=C(),fe=h("div"),fe.textContent=`${me(mt.getExplored())}`,yn=C(),Nt=h("div"),ae=h("div"),ae.textContent="Distance traveled",$n=C(),de=h("div"),de.textContent=`${me(mt.location().distance)}`,wn=C(),It=h("div"),Dt=h("button"),Dt.textContent="Reset",En=C(),pe=h("button"),pe.textContent="Back",ft(i,"display","none"),v(c,"class","col label svelte-hfjk0k"),v(a,"class","col value svelte-hfjk0k"),v(r,"class","row svelte-hfjk0k"),v(g,"class","col label svelte-hfjk0k"),v(w,"class","col value svelte-hfjk0k"),v(m,"class","row svelte-hfjk0k"),v(E,"class","col label svelte-hfjk0k"),v(L,"class","col value svelte-hfjk0k"),v($,"class","row svelte-hfjk0k"),v(Y,"class","col label svelte-hfjk0k"),v(Mt,"class","col value svelte-hfjk0k"),v(nt,"class","row svelte-hfjk0k"),ft(nt,"margin-top","20px"),v(Qt,"class","col label svelte-hfjk0k"),v(Zt,"class","col value svelte-hfjk0k"),v(St,"class","row svelte-hfjk0k"),v(te,"class","col label svelte-hfjk0k"),v(ee,"class","col value svelte-hfjk0k"),v(Tt,"class","row svelte-hfjk0k"),v(ie,"class","col label svelte-hfjk0k"),v(le,"class","col value svelte-hfjk0k"),v(bt,"class","row svelte-hfjk0k"),ft(bt,"margin","10px 0"),v(re,"class","col label svelte-hfjk0k"),v(oe,"class","col value svelte-hfjk0k"),v(jt,"class","row svelte-hfjk0k"),v(ue,"class","col label svelte-hfjk0k"),v(fe,"class","col value svelte-hfjk0k"),v(xt,"class","row svelte-hfjk0k"),v(ae,"class","col label svelte-hfjk0k"),v(de,"class","col value svelte-hfjk0k"),v(Nt,"class","row svelte-hfjk0k"),v(n,"class","view col svelte-hfjk0k"),v(Dt,"class","danger svelte-hfjk0k"),v(It,"class","ctrls")},m(q,rt){x(q,t,rt),p(t,n),p(n,i),p(i,s),p(n,o),p(n,r),p(r,c),p(r,u),p(r,a),p(a,d),p(n,_),p(n,m),p(m,g),p(m,k),p(m,w),p(w,y),p(n,b),p(n,$),p($,E),p($,A),p($,L),p(n,N),p(n,nt),p(nt,Y),p(nt,un),p(nt,Mt),p(Mt,Re),p(Mt,fn),p(Mt,Ae),p(n,an),p(n,St),p(St,Qt),p(St,dn),p(St,Zt),p(Zt,Oe),p(n,pn),p(n,Tt),p(Tt,te),p(Tt,_n),p(Tt,ee),p(ee,Pe),p(n,mn),p(n,bt),p(bt,ie),p(bt,hn),p(bt,le),p(le,Le),p(n,vn),p(n,jt),p(jt,re),p(jt,gn),p(jt,oe),p(oe,Ue),p(n,bn),p(n,xt),p(xt,ue),p(xt,kn),p(xt,fe),p(n,yn),p(n,Nt),p(Nt,ae),p(Nt,$n),p(Nt,de),p(t,wn),p(t,It),p(It,Dt),p(It,En),p(It,pe),tt=!0,De||(Cn=[R(window,"keydown",e[2]),R(Dt,"click",je),R(pe,"click",dt)],De=!0)},p(q,[rt]){(!tt||rt&1)&&l!==(l=q[0].name+"")&&ct(s,l),(!tt||rt&1)&&f!==(f=q[0].lvl+"")&&ct(d,f),(!tt||rt&1)&&M!==(M=q[0].xp+"")&&ct(y,M),(!tt||rt&1)&&Vt!==(Vt=q[0].hp+"")&&ct(Re,Vt),(!tt||rt&1)&&zt!==(zt=q[0].maxhp+"")&&ct(Ae,zt),(!tt||rt&1)&&Jt!==(Jt=q[0].str+"")&&ct(Oe,Jt),(!tt||rt&1)&&ne!==(ne=q[0].dex+"")&&ct(Pe,ne),(!tt||rt&1)&&se!==(se=q[0].gp+"")&&ct(Le,se),(!tt||rt&2)&&ce!==(ce=me(q[1])+"")&&ct(Ue,ce)},i(q){tt||(K(()=>{_t||(_t=lt(t,st,{},!0)),_t.run(1)}),tt=!0)},o(q){_t||(_t=lt(t,st,{},!1)),_t.run(0),tt=!1},d(q){q&&S(t),q&&_t&&_t.end(),De=!1,Q(Cn)}}}function Ul(e,t,n){let i,l;B(e,P,o=>n(0,i=o)),B(e,Kt,o=>n(1,l=o));function s(o){switch(o.key){case"q":dt();break;case"Escape":je();break}}return[i,l,s]}class Dl extends J{constructor(t){super(),Z(this,t,Ul,Ll,G,{})}}function Fl(e,{from:t,to:n},i={}){const l=getComputedStyle(e),s=l.transform==="none"?"":l.transform,[o,r]=l.transformOrigin.split(" ").map(parseFloat),c=t.left+t.width*o/n.width-(n.left+o),u=t.top+t.height*r/n.height-(n.top+r),{delay:a=0,duration:f=_=>Math.sqrt(_)*120,easing:d=Me}=i;return{delay:a,duration:Ut(f)?f(Math.sqrt(c*c+u*u)):f,easing:d,css:(_,m)=>{const g=m*c,k=m*u,w=_+m*t.width/n.width,M=_+m*t.height/n.height;return`transform: ${s} translate(${g}px, ${k}px) scale(${w}, ${M});`}}}const Hl={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},ql=()=>{const{subscribe:e,update:t}=Et([]);let n=0;const i={},l=u=>u instanceof Object;return{subscribe:e,push:(u,a={})=>{const f={target:"default",...l(u)?u:{...a,msg:u}},d=i[f.target]||{},_={...Hl,...d,...f,theme:{...d.theme,...f.theme},classes:[...d.classes||[],...f.classes||[]],id:++n};return t(m=>_.reversed?[...m,_]:[_,...m]),n},pop:u=>{t(a=>{if(!a.length||u===0)return[];if(l(u))return a.filter(d=>u(d));const f=u||Math.max(...a.map(d=>d.id));return a.filter(d=>d.id!==f)})},set:(u,a={})=>{const f=l(u)?{...u}:{...a,id:u};t(d=>{const _=d.findIndex(m=>m.id===f.id);return _>-1&&(d[_]={...d[_],...f}),d})},_init:(u="default",a={})=>(i[u]=a,i)}},Lt=ql();function An(e){return Object.prototype.toString.call(e)==="[object Date]"}function Xe(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((l,s)=>Xe(e[s],l));return l=>i.map(s=>s(l))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(An(e)&&An(t)){e=e.getTime(),t=t.getTime();const s=t-e;return o=>new Date(e+o*s)}const i=Object.keys(t),l={};return i.forEach(s=>{l[s]=Xe(e[s],t[s])}),s=>{const o={};return i.forEach(r=>{o[r]=l[r](s)}),o}}if(n==="number"){const i=t-e;return l=>e+l*i}throw new Error(`Cannot interpolate ${n} values`)}function Ve(e,t={}){const n=Et(e);let i,l=e;function s(o,r){if(e==null)return n.set(e=o),Promise.resolve();l=o;let c=i,u=!1,{delay:a=0,duration:f=400,easing:d=wt,interpolate:_=Xe}=He(He({},t),r);if(f===0)return c&&(c.abort(),c=null),n.set(e=l),Promise.resolve();const m=Gt()+a;let g;return i=Xt(k=>{if(k<m)return!0;u||(g=_(e,o),typeof f=="function"&&(f=f(e,o)),u=!0),c&&(c.abort(),c=null);const w=k-m;return w>f?(n.set(e=o),!1):(n.set(e=g(d(w/f))),!0)}),i.promise}return{set:s,update:(o,r)=>s(o(l,e),r),subscribe:n.subscribe}}function Wl(e){let t,n=e[0].msg+"",i;return{c(){t=new yi(!1),i=Vn(),t.a=i},m(l,s){t.m(n,l,s),x(l,i,s)},p(l,s){s&1&&n!==(n=l[0].msg+"")&&t.p(n)},i:j,o:j,d(l){l&&S(i),l&&t.d()}}}function Bl(e){let t,n,i;const l=[e[2]];var s=e[0].component.src;function o(r){let c={};for(let u=0;u<l.length;u+=1)c=He(c,l[u]);return{props:c}}return s&&(t=Sn(s,o())),{c(){t&&H(t.$$.fragment),n=Vn()},m(r,c){t&&U(t,r,c),x(r,n,c),i=!0},p(r,c){const u=c&4?Ri(l,[Ai(r[2])]):{};if(s!==(s=r[0].component.src)){if(t){ht();const a=t;I(a.$$.fragment,1,0,()=>{D(a,1)}),vt()}s?(t=Sn(s,o()),H(t.$$.fragment),T(t.$$.fragment,1),U(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(r){i||(t&&T(t.$$.fragment,r),i=!0)},o(r){t&&I(t.$$.fragment,r),i=!1},d(r){r&&S(n),t&&D(t,r)}}}function On(e){let t,n,i;return{c(){t=h("div"),v(t,"class","_toastBtn pe svelte-l65oht"),v(t,"role","button"),v(t,"tabindex","0")},m(l,s){x(l,t,s),n||(i=[R(t,"click",e[4]),R(t,"keydown",e[8])],n=!0)},p:j,d(l){l&&S(t),n=!1,Q(i)}}}function Yl(e){let t,n,i,l,s,o,r,c,u,a;const f=[Bl,Wl],d=[];function _(g,k){return g[0].component?0:1}i=_(e),l=d[i]=f[i](e);let m=e[0].dismissable&&On(e);return{c(){t=h("div"),n=h("div"),l.c(),s=C(),m&&m.c(),o=C(),r=h("progress"),v(n,"role","status"),v(n,"class","_toastMsg svelte-l65oht"),it(n,"pe",e[0].component),v(r,"class","_toastBar svelte-l65oht"),r.value=e[1],v(t,"class","_toastItem svelte-l65oht"),it(t,"pe",e[0].pausable)},m(g,k){x(g,t,k),p(t,n),d[i].m(n,null),p(t,s),m&&m.m(t,null),p(t,o),p(t,r),c=!0,u||(a=[R(t,"mouseenter",e[9]),R(t,"mouseleave",e[6])],u=!0)},p(g,[k]){let w=i;i=_(g),i===w?d[i].p(g,k):(ht(),I(d[w],1,1,()=>{d[w]=null}),vt(),l=d[i],l?l.p(g,k):(l=d[i]=f[i](g),l.c()),T(l,1),l.m(n,null)),(!c||k&1)&&it(n,"pe",g[0].component),g[0].dismissable?m?m.p(g,k):(m=On(g),m.c(),m.m(t,o)):m&&(m.d(1),m=null),(!c||k&2)&&(r.value=g[1]),(!c||k&1)&&it(t,"pe",g[0].pausable)},i(g){c||(T(l),c=!0)},o(g){I(l),c=!1},d(g){g&&S(t),d[i].d(),m&&m.d(),u=!1,Q(a)}}}function Kl(e,t,n){let i,{item:l}=t;const s=Ve(l.initial,{duration:l.duration,easing:wt});B(e,s,y=>n(1,i=y));const o=()=>Lt.pop(l.id),r=()=>{(i===1||i===0)&&o()};let c=l.initial,u=c,a=!1;const f=()=>{!a&&i!==c&&(s.set(i,{duration:0}),a=!0)},d=()=>{if(a){const y=l.duration,b=y-y*((i-u)/(c-u));s.set(c,{duration:b}).then(r),a=!1}};let _={};const m=(y,b="undefined")=>typeof y===b;let g;gt((y=document)=>{if(m(y.hidden))return;const b=()=>y.hidden?f():d(),$="visibilitychange";y.addEventListener($,b),g=()=>y.removeEventListener($,b),b()}),Zn(()=>{m(l.onpop,"function")&&l.onpop(l.id),g&&g()});const w=y=>{y instanceof KeyboardEvent&&["Enter"," "].includes(y.key)&&o()},M=()=>{l.pausable&&f()};return e.$$set=y=>{"item"in y&&n(0,l=y.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(m(l.progress)||n(0,l.next=l.progress,l)),e.$$.dirty&131&&c!==l.next&&(n(7,c=l.next),u=i,a=!1,s.set(c).then(r)),e.$$.dirty&1&&l.component){const{props:y={},sendIdTo:b}=l.component;n(2,_={...y,...b&&{[b]:l.id}})}},[l,i,_,s,o,f,d,c,w,M]}class Gl extends J{constructor(t){super(),Z(this,t,Kl,Yl,G,{item:0})}}function Pn(e,t,n){const i=e.slice();return i[5]=t[n],i}function Ln(e,t){let n,i,l,s,o,r,c,u,a=j,f;return i=new Gl({props:{item:t[5]}}),{key:e,first:null,c(){n=h("li"),H(i.$$.fragment),l=C(),v(n,"class",s=$e(t[5].classes.join(" "))+" svelte-yh90az"),v(n,"style",o=t[1](t[5].theme)),this.first=n},m(d,_){x(d,n,_),U(i,n,null),p(n,l),f=!0},p(d,_){t=d;const m={};_&1&&(m.item=t[5]),i.$set(m),(!f||_&1&&s!==(s=$e(t[5].classes.join(" "))+" svelte-yh90az"))&&v(n,"class",s),(!f||_&1&&o!==(o=t[1](t[5].theme)))&&v(n,"style",o)},r(){u=n.getBoundingClientRect()},f(){Mi(n),a(),Qn(n,u)},a(){a(),a=Ci(n,u,Fl,{duration:200})},i(d){f||(T(i.$$.fragment,d),K(()=>{c&&c.end(1),r=en(n,Te,t[5].intro),r.start()}),f=!0)},o(d){I(i.$$.fragment,d),r&&r.invalidate(),c=nn(n,ii,{}),f=!1},d(d){d&&S(n),D(i),d&&c&&c.end()}}}function Xl(e){let t,n=[],i=new Map,l,s=e[0];const o=r=>r[5].id;for(let r=0;r<s.length;r+=1){let c=Pn(e,s,r),u=o(c);i.set(u,n[r]=Ln(u,c))}return{c(){t=h("ul");for(let r=0;r<n.length;r+=1)n[r].c();v(t,"class","_toastContainer svelte-yh90az")},m(r,c){x(r,t,c);for(let u=0;u<n.length;u+=1)n[u].m(t,null);l=!0},p(r,[c]){if(c&3){s=r[0],ht();for(let u=0;u<n.length;u+=1)n[u].r();n=Ii(n,c,o,1,r,s,i,t,Ni,Ln,null,Pn);for(let u=0;u<n.length;u+=1)n[u].a();vt()}},i(r){if(!l){for(let c=0;c<s.length;c+=1)T(n[c]);l=!0}},o(r){for(let c=0;c<n.length;c+=1)I(n[c]);l=!1},d(r){r&&S(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function Vl(e,t,n){let i;B(e,Lt,c=>n(4,i=c));let{options:l={}}=t,{target:s="default"}=t,o;const r=c=>Object.keys(c).reduce((u,a)=>`${u}${a}:${c[a]};`,"");return e.$$set=c=>{"options"in c&&n(2,l=c.options),"target"in c&&n(3,s=c.target)},e.$$.update=()=>{e.$$.dirty&12&&Lt._init(s,l),e.$$.dirty&24&&n(0,o=i.filter(c=>c.target===s))},[o,r,l,s,i]}class zl extends J{constructor(t){super(),Z(this,t,Vl,Xl,G,{options:2,target:3})}}function Ql(e){let t,n,i,l;return n=new zl({props:{options:e[2],target:e[1]}}),{c(){t=h("div"),H(n.$$.fragment),v(t,"class",i=$e(`toast-wrapper-${e[0]}`)+" svelte-gbm9c2")},m(s,o){x(s,t,o),U(n,t,null),l=!0},p(s,[o]){const r={};o&4&&(r.options=s[2]),o&2&&(r.target=s[1]),n.$set(r),(!l||o&1&&i!==(i=$e(`toast-wrapper-${s[0]}`)+" svelte-gbm9c2"))&&v(t,"class",i)},i(s){l||(T(n.$$.fragment,s),l=!0)},o(s){I(n.$$.fragment,s),l=!1},d(s){s&&S(t),D(n)}}}function Zl(e,t,n){const i={duration:1e3,initial:1,next:0,pausable:!0,dismissable:!1,reversed:!1,intro:{x:0},theme:{},classes:[]},l={duration:500,initial:1,next:0,pausable:!1,dismissable:!1,reversed:!0,intro:{y:20,duration:100},theme:{},classes:[]};let s;gt(()=>{o==1?n(2,s=i):o==2&&n(2,s=l)});let{type:o=1}=t,{target:r=void 0}=t;return e.$$set=c=>{"type"in c&&n(0,o=c.type),"target"in c&&n(1,r=c.target)},[o,r,s]}class ze extends J{constructor(t){super(),Z(this,t,Zl,Ql,G,{type:0,target:1})}}function Jl(){let e="",t=1,n=ln(),i=n.hp+Fi,l=n.str+Hi,s=n.dex+qi,o=X(Wi),r=Math.ceil(Ce(i+l+s)/2);return new si(e,t,i,l,s,r,o)}function ts(){ot.set(Jl())}const ot=Et();function es(e){let t;return{c(){t=h("div")},m(n,i){x(n,t,i)},p:j,i:j,o:j,d(n){n&&S(t)}}}function ns(e){let t,n,i,l;return{c(){t=h("div"),v(t,"class","icon map-u svelte-btrsmh"),it(t,"rejoice",e[1].ko())},m(s,o){x(s,t,o),l=!0},p(s,o){e=s,(!l||o&2)&&it(t,"rejoice",e[1].ko())},i(s){l||(K(()=>{i&&i.end(1),n=en(t,Te,e[2]),n.start()}),l=!0)},o(s){n&&n.invalidate(),i=nn(t,e[4],{}),l=!1},d(s){s&&S(t),s&&i&&i.end()}}}function Un(e){let t,n,i,l,s;return{c(){t=h("div"),n=h("div"),v(n,"class","icon dragon svelte-btrsmh"),it(n,"rejoice",e[0].ko()),v(t,"class","col enc img svelte-btrsmh")},m(o,r){x(o,t,r),p(t,n),s=!0},p(o,r){e=o,(!s||r&1)&&it(n,"rejoice",e[0].ko())},i(o){s||(K(()=>{l&&l.end(1),i=en(n,Te,e[3]),i.start()}),s=!0)},o(o){i&&i.invalidate(),l=nn(n,e[5],{}),s=!1},d(o){o&&S(t),o&&l&&l.end()}}}function is(e){let t,n,i,l,s,o,r,c,u,a,f,d,_,m,g=!e[1].ko()&&!e[1].fleeing(),k;const w=[ns,es],M=[];function y($,E){return E&1&&(l=null),l==null&&(l=!$[0].ko()&&!$[0].fleeing()),l?0:1}s=y(e,-1),o=M[s]=w[s](e),u=new ze({props:{target:"user",type:2}}),_=new ze({props:{target:"enc",type:2}});let b=g&&Un(e);return{c(){t=h("div"),n=h("div"),i=h("div"),o.c(),r=C(),c=h("div"),H(u.$$.fragment),a=C(),f=h("div"),d=h("div"),H(_.$$.fragment),m=C(),b&&b.c(),v(i,"class","col user img svelte-btrsmh"),v(c,"class","col toast"),v(n,"class","row"),v(d,"class","col toast"),v(f,"class","row"),v(t,"class","row imgs svelte-btrsmh")},m($,E){x($,t,E),p(t,n),p(n,i),M[s].m(i,null),p(n,r),p(n,c),U(u,c,null),p(t,a),p(t,f),p(f,d),U(_,d,null),p(f,m),b&&b.m(f,null),k=!0},p($,[E]){let A=s;s=y($,E),s===A?M[s].p($,E):(ht(),I(M[A],1,1,()=>{M[A]=null}),vt(),o=M[s],o?o.p($,E):(o=M[s]=w[s]($),o.c()),T(o,1),o.m(i,null)),E&2&&(g=!$[1].ko()&&!$[1].fleeing()),g?b?(b.p($,E),E&2&&T(b,1)):(b=Un($),b.c(),T(b,1),b.m(f,null)):b&&(ht(),I(b,1,1,()=>{b=null}),vt())},i($){k||(T(o),T(u.$$.fragment,$),T(_.$$.fragment,$),T(b),k=!0)},o($){I(o),I(u.$$.fragment,$),I(_.$$.fragment,$),I(b),k=!1},d($){$&&S(t),M[s].d(),D(u),D(_),b&&b.d()}}}function ls(e,t,n){let i,l;B(e,P,f=>n(0,i=f)),B(e,ot,f=>n(1,l=f));const s={x:40,duration:200},o={x:-40,duration:200},r={amount:40,duration:Be};function c(f,d,_,m,g){if(!g){if(_)return tl(f,r);{let k=m;return d||(k.x*=-1),Te(f,k)}}}function u(f){return c(f,l.ko(),i.ko(),s)}function a(f){return c(f,i.ko(),l.ko(),o,i.ko()||i.fleeing())}return[i,l,s,o,u,a]}class ss extends J{constructor(t){super(),Z(this,t,ls,is,G,{})}}function rs(e){let t;return{c(){t=h("div")},m(n,i){x(n,t,i)},p:j,d(n){n&&S(t)}}}function os(e){let t;return{c(){t=h("progress"),t.value=e[2],v(t,"class","svelte-9px8le")},m(n,i){x(n,t,i)},p(n,i){i&4&&(t.value=n[2])},d(n){n&&S(t)}}}function cs(e){let t;return{c(){t=h("div")},m(n,i){x(n,t,i)},p:j,d(n){n&&S(t)}}}function us(e){let t;return{c(){t=h("progress"),t.value=e[3],v(t,"class","svelte-9px8le")},m(n,i){x(n,t,i)},p(n,i){i&8&&(t.value=n[3])},d(n){n&&S(t)}}}function fs(e){let t,n,i,l,s,o;function r(_,m){return m&2&&(i=null),i==null&&(i=!_[1].ko()&&!_[1].fleeing()),i?os:rs}let c=r(e,-1),u=c(e);function a(_,m){return m&1&&(o=null),o==null&&(o=!_[0].ko()&&!_[0].fleeing()),o?us:cs}let f=a(e,-1),d=f(e);return{c(){t=h("div"),n=h("div"),u.c(),l=C(),s=h("div"),d.c(),v(n,"class","col user"),v(s,"class","col enc"),v(t,"class","row info svelte-9px8le")},m(_,m){x(_,t,m),p(t,n),u.m(n,null),p(t,l),p(t,s),d.m(s,null)},p(_,[m]){c===(c=r(_,m))&&u?u.p(_,m):(u.d(1),u=c(_),u&&(u.c(),u.m(n,null))),f===(f=a(_,m))&&d?d.p(_,m):(d.d(1),d=f(_),d&&(d.c(),d.m(s,null)))},i:j,o:j,d(_){_&&S(t),u.d(),d.d()}}}function as(e,t,n){let i,l,s,o;B(e,ot,u=>n(0,i=u)),B(e,P,u=>n(1,l=u));const r=Ve(0,{duration:jn,easing:Me});B(e,r,u=>n(2,s=u));const c=Ve(0,{duration:jn,easing:Me});return B(e,c,u=>n(3,o=u)),e.$$.update=()=>{e.$$.dirty&2&&l.hp&&r.set(l.hp/l.maxhp),e.$$.dirty&1&&i.hp&&c.set(i.hp/i.maxhp)},[i,l,s,o,r,c]}class ds extends J{constructor(t){super(),Z(this,t,as,fs,G,{})}}function ps(e){let t,n,i,l,s,o;return{c(){t=h("div"),n=h("div"),i=h("div"),l=C(),s=h("div"),o=h("div"),v(i,"class","circle svelte-1uajhnl"),ft(i,"transform",`rotate(${Math.min(e[1],180)}deg)`),v(n,"class","wrapper wrapper1 svelte-1uajhnl"),v(o,"class","circle svelte-1uajhnl"),it(o,"hidden",e[0]<=50),ft(o,"transform",`rotate(${e[1]}deg)`),v(s,"class","wrapper wrapper2 svelte-1uajhnl"),v(t,"class","progress-bar svelte-1uajhnl"),it(t,"hidden",e[0]>=100)},m(r,c){x(r,t,c),p(t,n),p(n,i),p(t,l),p(t,s),p(s,o)},p(r,[c]){c&2&&ft(i,"transform",`rotate(${Math.min(r[1],180)}deg)`),c&1&&it(o,"hidden",r[0]<=50),c&2&&ft(o,"transform",`rotate(${r[1]}deg)`),c&1&&it(t,"hidden",r[0]>=100)},i:j,o:j,d(r){r&&S(t)}}}const Dn=100;function _s(e,t,n){let i;const l=Jn();function s(){n(5,u+=Dn),a>=100&&(clearInterval(f),l("ready"))}function o(d){f&&clearInterval(f),n(4,c=d),n(5,u=0),f=setInterval(s,Dn)}function r(){n(5,u=c)}let c=1e3,u,a,f;return e.$$.update=()=>{e.$$.dirty&48&&n(0,a=u/c*100),e.$$.dirty&1&&n(1,i=a*3.6)},[a,i,o,r,c,u]}class ms extends J{constructor(t){super(),Z(this,t,_s,ps,G,{start:2,cancel:3})}get start(){return this.$$.ctx[2]}get cancel(){return this.$$.ctx[3]}}function hs(e,t=void 0){let n=t?{target:t}:void 0;Lt.push(e,n)}function vs(e,t=void 0){let n={initial:0,next:0};t&&(n.target=t),Lt.push(e,n)}function gs(){Lt.pop(0)}const pt={show:hs,persist:vs,clear:gs};function di(e,t){let n;if(e.dex>t.dex?n=1-t.dex/e.dex:n=e.dex/t.dex,n=Math.ceil(n*100),X(100)*Yi<n){let i=Ce(e.str);return t.blocking()&&(i=Math.ceil(i/4)),i}}function bs(){let e=yt(P),t=yt(ot),n=di(e,t);n?(t.hp-=n,ot.set(t)):n===void 0&&P.set(e),pt.show(pi(n),"enc")}function ks(){let e=yt(P),t=yt(ot),n=yt(ye);if(n>3&&X(1)==1)t.flee(),ot.set(t);else{let i=di(t,e);i?(e.hp-=i,P.set(e),n&&ye.set(0)):i===void 0&&(ye.set(++n),ot.set(t)),pt.show(pi(i),"user")}}function ys(e,t){return Math.ceil(t/e*1e3*ei)}function Fn(){return Bi*ei}const ye=Et(0),pi=e=>e===void 0?"Miss":`${e}`;function Hn(e){let t,n,i,l;return t=new ss({}),i=new ds({}),{c(){H(t.$$.fragment),n=C(),H(i.$$.fragment)},m(s,o){U(t,s,o),x(s,n,o),U(i,s,o),l=!0},i(s){l||(T(t.$$.fragment,s),T(i.$$.fragment,s),l=!0)},o(s){I(t.$$.fragment,s),I(i.$$.fragment,s),l=!1},d(s){D(t,s),s&&S(n),D(i,s)}}}function qn(e){let t,n,i,l,s,o,r,c,u,a,f,d,_,m,g,k={};f=new ms({props:k}),e[13](f),f.$on("ready",e[9]);function w(b,$){if(b[7])return Es;if(b[0]&&b[5])return ws;if(b[1]&&b[5])return $s}let M=w(e),y=M&&M(e);return{c(){t=h("div"),n=h("div"),i=h("button"),l=W("Fight"),o=C(),r=h("button"),c=W("Block"),a=C(),H(f.$$.fragment),d=C(),y&&y.c(),i.disabled=s=!e[4],r.disabled=u=!e[4],v(t,"class","ctrls col")},m(b,$){x(b,t,$),p(t,n),p(n,i),p(i,l),p(n,o),p(n,r),p(r,c),p(n,a),U(f,n,null),p(t,d),y&&y.m(t,null),_=!0,m||(g=[R(i,"click",e[10]),R(r,"click",e[11])],m=!0)},p(b,$){(!_||$&16&&s!==(s=!b[4]))&&(i.disabled=s),(!_||$&16&&u!==(u=!b[4]))&&(r.disabled=u);const E={};f.$set(E),M===(M=w(b))&&y?y.p(b,$):(y&&y.d(1),y=M&&M(b),y&&(y.c(),y.m(t,null)))},i(b){_||(T(f.$$.fragment,b),_=!0)},o(b){I(f.$$.fragment,b),_=!1},d(b){b&&S(t),e[13](null),D(f),y&&y.d(),m=!1,Q(g)}}}function $s(e){let t,n,i;return{c(){t=h("button"),t.textContent="Reset"},m(l,s){x(l,t,s),n||(i=R(t,"click",je),n=!0)},p:j,d(l){l&&S(t),n=!1,i()}}}function ws(e){let t,n,i;return{c(){t=h("button"),t.textContent="Proceed"},m(l,s){x(l,t,s),n||(i=R(t,"click",dt),n=!0)},p:j,d(l){l&&S(t),n=!1,i()}}}function Es(e){let t,n,i;return{c(){t=h("button"),t.textContent="Flee"},m(l,s){x(l,t,s),n||(i=R(t,"click",e[12]),n=!0)},p:j,d(l){l&&S(t),n=!1,i()}}}function Cs(e){let t,n,i,l=!e[3].fleeing(),s,o,r,c,u=e[2]&&Hn(),a=l&&qn(e);return{c(){t=h("div"),n=h("div"),u&&u.c(),i=C(),a&&a.c(),v(n,"class","view field svelte-1tqkonl")},m(f,d){x(f,t,d),p(t,n),u&&u.m(n,null),p(t,i),a&&a.m(t,null),o=!0,r||(c=R(window,"keydown",e[8]),r=!0)},p(f,[d]){f[2]?u?d&4&&T(u,1):(u=Hn(),u.c(),T(u,1),u.m(n,null)):u&&(ht(),I(u,1,1,()=>{u=null}),vt()),d&8&&(l=!f[3].fleeing()),l?a?(a.p(f,d),d&8&&T(a,1)):(a=qn(f),a.c(),T(a,1),a.m(t,null)):a&&(ht(),I(a,1,1,()=>{a=null}),vt())},i(f){o||(T(u),T(a),K(()=>{s||(s=lt(t,st,{},!0)),s.run(1)}),o=!0)},o(f){I(u),I(a),s||(s=lt(t,st,{},!1)),s.run(0),o=!1},d(f){f&&S(t),u&&u.d(),a&&a.d(),f&&s&&s.end(),r=!1,c()}}}function Ms(e,t,n){let i,l,s;B(e,ot,N=>n(2,l=N)),B(e,P,N=>n(3,s=N));function o(N){switch(N.key){case"f":u();break;case"v":a();break;case"q":i?f():b&&y?dt():$&&y&&je();break}}function r(){i&&(w=Ce(Fn()),E.start(w))}function c(){i&&n(4,M=!0)}function u(){M&&(n(4,M=!1),ut(P,s.status.blocking=!1,s),bs(),setTimeout(r,1))}function a(){M&&(n(4,M=!1),s.block(),r())}function f(){E.cancel(),s.flee();var N=X(Math.min(s.gp/2,l.gp));ut(P,s.gp-=N,s),N&&pt.show(`Dropped ${N} gold`),kt(1e3,dt)}function d(){i&&(ks(),A=kt(Ce(k),d))}function _(){n(0,b=!0),E.cancel(),n(4,M=!1),kt(Be,()=>{n(5,y=!0),g()})}function m(){n(1,$=!0),E.cancel(),n(4,M=!1),kt(Be,()=>{n(5,y=!0),pt.persist("Game over")})}function g(){let N=l.xp,nt=ri();l.fleeing()&&(N*=1-l.hp/l.maxhp,N=Math.floor(Math.min(N,nt-s.xp-1))),N&&(ut(P,s.xp+=N,s),pt.persist(`Gained ${N} experience`,"enc")),s.xp>=nt&&(fl(),pt.persist("Level up!","enc")),l.gp&&!l.fleeing()&&(ut(P,s.gp+=l.gp,s),pt.persist(`Found ${l.gp} gold`,"enc"))}gt(()=>{ts(),k=ys(l.dex,s.dex),w=Fn();const N=P.subscribe(Y=>{Y!=null&&Y.ko()&&m()}),nt=ot.subscribe(Y=>{(Y!=null&&Y.ko()||Y!=null&&Y.fleeing())&&_()});return A=kt(X(k),d),E.start(w),()=>{E==null||E.cancel(),clearTimeout(A),ye.set(0),ut(P,s.status.fleeing=!1,s),ut(ot,l.status.fleeing=!1,l),nt(),N()}});let k,w,M,y,b,$,E,A;function L(N){qe[N?"unshift":"push"](()=>{E=N,n(6,E)})}return e.$$.update=()=>{e.$$.dirty&15&&n(7,i=!b&&!$&&!s.fleeing()&&!(l!=null&&l.fleeing()))},[b,$,l,s,M,y,E,i,o,c,u,a,f,L]}class Ss extends J{constructor(t){super(),Z(this,t,Ms,Cs,G,{})}}function Wn(e){let t,n,i,l=e[0].innCost+"",s,o;return{c(){t=h("p"),t.textContent="Inn",n=C(),i=h("p"),s=W(l),o=W(" gold per night")},m(r,c){x(r,t,c),x(r,n,c),x(r,i,c),p(i,s),p(i,o)},p(r,c){c&1&&l!==(l=r[0].innCost+"")&&ct(s,l)},d(r){r&&S(t),r&&S(n),r&&S(i)}}}function Ts(e){let t,n,i,l,s,o,r,c,u,a,f,d=e[0]&&Wn(e);return{c(){t=h("div"),n=h("div"),d&&d.c(),i=C(),l=h("div"),s=h("button"),s.textContent="Rest",o=C(),r=h("button"),r.textContent="Leave",v(n,"class","view col"),v(l,"class","ctrls")},m(_,m){x(_,t,m),p(t,n),d&&d.m(n,null),p(t,i),p(t,l),p(l,s),p(l,o),p(l,r),u=!0,a||(f=[R(window,"keydown",e[1]),R(s,"click",e[2]),R(r,"click",dt)],a=!0)},p(_,[m]){_[0]?d?d.p(_,m):(d=Wn(_),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},i(_){u||(K(()=>{c||(c=lt(t,st,{},!0)),c.run(1)}),u=!0)},o(_){c||(c=lt(t,st,{},!1)),c.run(0),u=!1},d(_){_&&S(t),d&&d.d(),_&&c&&c.end(),a=!1,Q(f)}}}function js(e,t,n){let i;B(e,P,r=>n(3,i=r));function l(r){switch(r.key){case"q":dt();break;case"r":s();break}}function s(){i.gp>=o.innCost?(ut(P,i.gp-=o.innCost,i),il()):pt.show("Not enough gold")}gt(()=>{let r=mt.location().abs;n(0,o=Il(r.x,r.y))});let o;return[o,l,s]}class xs extends J{constructor(t){super(),Z(this,t,js,Ts,G,{})}}function Ns(e){let t,n,i,l,s;return{c(){t=h("div"),n=h("div"),i=h("div"),v(i,"class","icon moon"),ft(i,"margin-top","80px"),v(n,"class","view")},m(o,r){x(o,t,r),p(t,n),p(n,i),s=!0},p:j,i(o){s||(K(()=>{l||(l=lt(t,st,{},!0)),l.run(1)}),s=!0)},o(o){l||(l=lt(t,st,{},!1)),l.run(0),s=!1},d(o){o&&S(t),o&&l&&l.end()}}}function Is(e,t,n){let i;return B(e,P,l=>n(0,i=l)),gt(()=>{ut(P,i.hp=i.maxhp,i),kt(2e3,dt)}),[]}class Rs extends J{constructor(t){super(),Z(this,t,Is,Ns,G,{})}}function As(e){let t,n;return t=new Rs({}),{c(){H(t.$$.fragment)},m(i,l){U(t,i,l),n=!0},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){I(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Os(e){let t,n;return t=new xs({}),{c(){H(t.$$.fragment)},m(i,l){U(t,i,l),n=!0},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){I(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Ps(e){let t,n;return t=new Ss({}),{c(){H(t.$$.fragment)},m(i,l){U(t,i,l),n=!0},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){I(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Ls(e){let t,n;return t=new Dl({}),{c(){H(t.$$.fragment)},m(i,l){U(t,i,l),n=!0},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){I(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Us(e){let t,n;return t=new Pl({}),{c(){H(t.$$.fragment)},m(i,l){U(t,i,l),n=!0},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){I(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Ds(e){let t,n;return t=new Ml({}),{c(){H(t.$$.fragment)},m(i,l){U(t,i,l),n=!0},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){I(t.$$.fragment,i),n=!1},d(i){D(t,i)}}}function Fs(e){let t,n,i,l,s,o;n=new ze({});const r=[Ds,Us,Ls,Ps,Os,As],c=[];function u(a,f){return a[0]==et.TITLE?0:a[0]==et.MAP?1:a[0]==et.MENU?2:a[0]==et.ENC?3:a[0]==et.CITY?4:a[0]==et.SLEEP?5:-1}return~(l=u(e))&&(s=c[l]=r[l](e)),{c(){t=h("main"),H(n.$$.fragment),i=C(),s&&s.c()},m(a,f){x(a,t,f),U(n,t,null),p(t,i),~l&&c[l].m(t,null),o=!0},p(a,[f]){let d=l;l=u(a),l!==d&&(s&&(ht(),I(c[d],1,1,()=>{c[d]=null}),vt()),~l?(s=c[l],s||(s=c[l]=r[l](a),s.c()),T(s,1),s.m(t,null)):s=null)},i(a){o||(T(n.$$.fragment,a),T(s),o=!0)},o(a){I(n.$$.fragment,a),I(s),o=!1},d(a){a&&S(t),D(n),~l&&c[l].d()}}}function Hs(e,t,n){let i;gt(()=>{i=Ct.subscribe(s=>{n(0,l=void 0),pt.clear(),kt(ni,()=>{n(0,l=s)})})}),Zn(i);let l;return[l]}class qs extends J{constructor(t){super(),Z(this,t,Hs,Fs,G,{})}}new qs({target:document.getElementById("app")});
