var mi=Object.defineProperty;var hi=(e,t,n)=>t in e?mi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ot=(e,t,n)=>(hi(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function T(){}const Ct=e=>e;function Be(e,t){for(const n in t)e[n]=t[n];return e}function Kn(e){return e()}function Tn(){return Object.create(null)}function Z(e){e.forEach(Kn)}function Ft(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function gi(e){return Object.keys(e).length===0}function Gn(e,...t){if(e==null)return T;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function wt(e){let t;return Gn(e,n=>t=n)(),t}function Y(e,t,n){e.$$.on_destroy.push(Gn(t,n))}function Ee(e){return e??""}function at(e,t,n){return e.set(n),t}const Xn=typeof window<"u";let Vt=Xn?()=>window.performance.now():()=>Date.now(),tn=Xn?e=>requestAnimationFrame(e):T;const Pt=new Set;function Vn(e){Pt.forEach(t=>{t.c(e)||(Pt.delete(t),t.f())}),Pt.size!==0&&tn(Vn)}function zt(e){let t;return Pt.size===0&&tn(Vn),{promise:new Promise(n=>{Pt.add(t={c:e,f:n})}),abort(){Pt.delete(t)}}}function d(e,t){e.appendChild(t)}function zn(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function vi(e){const t=m("style");return bi(zn(e),t),t.sheet}function bi(e,t){return d(e.head||e,t),t.sheet}function N(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}function m(e){return document.createElement(e)}function ki(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function W(e){return document.createTextNode(e)}function C(){return W(" ")}function Qn(){return W("")}function I(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function yi(e){return Array.from(e.childNodes)}function ft(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function dt(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function it(e,t,n){e.classList[n?"add":"remove"](t)}function Zn(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,i,t),l}class $i{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=ki(n.nodeName):this.e=m(n.nodeName),this.t=n,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)N(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(j)}}function jn(e,t){return new e(t)}const Ce=new Map;let Me=0;function wi(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ei(e,t){const n={stylesheet:vi(t),rules:{}};return Ce.set(e,n),n}function Yt(e,t,n,i,l,s,o,r=0){const u=16.666/i;let c=`{
`;for(let y=0;y<=1;y+=u){const E=t+(n-t)*s(y);c+=y*100+`%{${o(E,1-E)}}
`}const f=c+`100% {${o(n,1-n)}}
}`,a=`__svelte_${wi(f)}_${r}`,p=zn(e),{stylesheet:_,rules:h}=Ce.get(p)||Ei(p,e);h[a]||(h[a]=!0,_.insertRule(`@keyframes ${a} ${f}`,_.cssRules.length));const k=e.style.animation||"";return e.style.animation=`${k?`${k}, `:""}${a} ${i}ms linear ${l}ms 1 both`,Me+=1,a}function Kt(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),l=n.length-i.length;l&&(e.style.animation=i.join(", "),Me-=l,Me||Ci())}function Ci(){tn(()=>{Me||(Ce.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&j(t)}),Ce.clear())})}function Mi(e,t,n,i){if(!t)return T;const l=e.getBoundingClientRect();if(t.left===l.left&&t.right===l.right&&t.top===l.top&&t.bottom===l.bottom)return T;const{delay:s=0,duration:o=300,easing:r=Ct,start:u=Vt()+s,end:c=u+o,tick:f=T,css:a}=n(e,{from:t,to:l},i);let p=!0,_=!1,h;function k(){a&&(h=Yt(e,0,1,o,s,r,a)),s||(_=!0)}function y(){a&&Kt(e,h),p=!1}return zt(E=>{if(!_&&E>=u&&(_=!0),_&&E>=c&&(f(1,0),y()),!p)return!1;if(_){const $=E-u,v=0+1*r($/o);f(v,1-v)}return!0}),k(),f(0,1),y}function Si(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,l=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,Jn(e,l)}}function Jn(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),l=i.transform==="none"?"":i.transform;e.style.transform=`${l} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Gt;function Wt(e){Gt=e}function en(){if(!Gt)throw new Error("Function called outside component initialization");return Gt}function yt(e){en().$$.on_mount.push(e)}function ti(e){en().$$.on_destroy.push(e)}function ei(){const e=en();return(t,n,{cancelable:i=!1}={})=>{const l=e.$$.callbacks[t];if(l){const s=Zn(t,n,{cancelable:i});return l.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}const Bt=[],We=[],be=[],xn=[],Ti=Promise.resolve();let Ye=!1;function ji(){Ye||(Ye=!0,Ti.then(ni))}function G(e){be.push(e)}const qe=new Set;let he=0;function ni(){const e=Gt;do{for(;he<Bt.length;){const t=Bt[he];he++,Wt(t),xi(t.$$)}for(Wt(null),Bt.length=0,he=0;We.length;)We.pop()();for(let t=0;t<be.length;t+=1){const n=be[t];qe.has(n)||(qe.add(n),n())}be.length=0}while(Bt.length);for(;xn.length;)xn.pop()();Ye=!1,qe.clear(),Wt(e)}function xi(e){if(e.fragment!==null){e.update(),Z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(G)}}let qt;function nn(){return qt||(qt=Promise.resolve(),qt.then(()=>{qt=null})),qt}function Et(e,t,n){e.dispatchEvent(Zn(`${t?"intro":"outro"}${n}`))}const ke=new Set;let pt;function _t(){pt={r:0,c:[],p:pt}}function mt(){pt.r||Z(pt.c),pt=pt.p}function S(e,t){e&&e.i&&(ke.delete(e),e.i(t))}function x(e,t,n,i){if(e&&e.o){if(ke.has(e))return;ke.add(e),pt.c.push(()=>{ke.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const ln={duration:0};function sn(e,t,n){const i={direction:"in"};let l=t(e,n,i),s=!1,o,r,u=0;function c(){o&&Kt(e,o)}function f(){const{delay:p=0,duration:_=300,easing:h=Ct,tick:k=T,css:y}=l||ln;y&&(o=Yt(e,0,1,_,p,h,y,u++)),k(0,1);const E=Vt()+p,$=E+_;r&&r.abort(),s=!0,G(()=>Et(e,!0,"start")),r=zt(v=>{if(s){if(v>=$)return k(1,0),Et(e,!0,"end"),c(),s=!1;if(v>=E){const g=h((v-E)/_);k(g,1-g)}}return s})}let a=!1;return{start(){a||(a=!0,Kt(e),Ft(l)?(l=l(i),nn().then(f)):f())},invalidate(){a=!1},end(){s&&(c(),s=!1)}}}function Qt(e,t,n){const i={direction:"out"};let l=t(e,n,i),s=!0,o;const r=pt;r.r+=1;function u(){const{delay:c=0,duration:f=300,easing:a=Ct,tick:p=T,css:_}=l||ln;_&&(o=Yt(e,1,0,f,c,a,_));const h=Vt()+c,k=h+f;G(()=>Et(e,!1,"start")),zt(y=>{if(s){if(y>=k)return p(0,1),Et(e,!1,"end"),--r.r||Z(r.c),!1;if(y>=h){const E=a((y-h)/f);p(1-E,E)}}return s})}return Ft(l)?nn().then(()=>{l=l(i),u()}):u(),{end(c){c&&l.tick&&l.tick(1,0),s&&(o&&Kt(e,o),s=!1)}}}function lt(e,t,n,i){const l={direction:"both"};let s=t(e,n,l),o=i?0:1,r=null,u=null,c=null;function f(){c&&Kt(e,c)}function a(_,h){const k=_.b-o;return h*=Math.abs(k),{a:o,b:_.b,d:k,duration:h,start:_.start,end:_.start+h,group:_.group}}function p(_){const{delay:h=0,duration:k=300,easing:y=Ct,tick:E=T,css:$}=s||ln,v={start:Vt()+h,b:_};_||(v.group=pt,pt.r+=1),r||u?u=v:($&&(f(),c=Yt(e,o,_,k,h,y,$)),_&&E(0,1),r=a(v,k),G(()=>Et(e,_,"start")),zt(g=>{if(u&&g>u.start&&(r=a(u,k),u=null,Et(e,r.b,"start"),$&&(f(),c=Yt(e,o,r.b,r.duration,0,y,s.css))),r){if(g>=r.end)E(o=r.b,1-o),Et(e,r.b,"end"),u||(r.b?f():--r.group.r||Z(r.group.c)),r=null;else if(g>=r.start){const w=g-r.start;o=r.a+r.d*y(w/r.duration),E(o,1-o)}}return!!(r||u)}))}return{run(_){Ft(s)?nn().then(()=>{s=s(l),p(_)}):p(_)},end(){f(),r=u=null}}}function Ni(e,t){x(e,1,1,()=>{t.delete(e.key)})}function Ii(e,t){e.f(),Ni(e,t)}function Ri(e,t,n,i,l,s,o,r,u,c,f,a){let p=e.length,_=s.length,h=p;const k={};for(;h--;)k[e[h].key]=h;const y=[],E=new Map,$=new Map;for(h=_;h--;){const M=a(l,s,h),R=n(M);let A=o.get(R);A?i&&A.p(M,t):(A=c(R,M),A.c()),E.set(R,y[h]=A),R in k&&$.set(R,Math.abs(h-k[R]))}const v=new Set,g=new Set;function w(M){S(M,1),M.m(r,f),o.set(M.key,M),f=M.first,_--}for(;p&&_;){const M=y[_-1],R=e[p-1],A=M.key,U=R.key;M===R?(f=M.first,p--,_--):E.has(U)?!o.has(A)||v.has(A)?w(M):g.has(U)?p--:$.get(A)>$.get(U)?(g.add(A),w(M)):(v.add(U),p--):(u(R,o),p--)}for(;p--;){const M=e[p];E.has(M.key)||u(M,o)}for(;_;)w(y[_-1]);return y}function Ai(e,t){const n={},i={},l={$$scope:1};let s=e.length;for(;s--;){const o=e[s],r=t[s];if(r){for(const u in o)u in r||(i[u]=1);for(const u in r)l[u]||(n[u]=r[u],l[u]=1);e[s]=r}else for(const u in o)l[u]=1}for(const o in i)o in n||(n[o]=void 0);return n}function Oi(e){return typeof e=="object"&&e!==null?e:{}}function q(e){e&&e.c()}function D(e,t,n,i){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),i||G(()=>{const o=e.$$.on_mount.map(Kn).filter(Ft);e.$$.on_destroy?e.$$.on_destroy.push(...o):Z(o),e.$$.on_mount=[]}),s.forEach(G)}function F(e,t){const n=e.$$;n.fragment!==null&&(Z(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Li(e,t){e.$$.dirty[0]===-1&&(Bt.push(e),ji(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function J(e,t,n,i,l,s,o,r=[-1]){const u=Gt;Wt(e);const c=e.$$={fragment:null,ctx:[],props:s,update:T,not_equal:l,bound:Tn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Tn(),dirty:r,skip_bound:!1,root:t.target||u.$$.root};o&&o(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(a,p,..._)=>{const h=_.length?_[0]:p;return c.ctx&&l(c.ctx[a],c.ctx[a]=h)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](h),f&&Li(e,a)),p}):[],c.update(),f=!0,Z(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const a=yi(t.target);c.fragment&&c.fragment.l(a),a.forEach(j)}else c.fragment&&c.fragment.c();t.intro&&S(e.$$.fragment),D(e,t.target,t.anchor,t.customElement),ni()}Wt(u)}class tt{$destroy(){F(this,1),this.$destroy=T}$on(t,n){if(!Ft(n))return T;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(t){this.$$set&&!gi(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pi=10,Ui=60,Di=6,Fi=6,Hi=20,qi=2,Bi=2,Wi=50,Nn=200,Ke=500,Ge=200,ii=1,Yi=1e3,Ki=1,Gi=7,Xi=9,Vi=2,zi=2,In=200,Rn=10,li=200,Qi=.1,Zi=5,Ji=50;function V(e,t){return e??(e=0),t??(t=0),Math.floor(Math.random()*(e-t+1))+t}function bt(e,t){setTimeout(t,e)}function Se(e,t){t??(t=Qi);let n=Math.ceil(Math.abs(e*t));return V(e+n,e-n)}function ge(e){return new Intl.NumberFormat().format(e)}const Lt=[];function Mt(e,t=T){let n;const i=new Set;function l(r){if(X(e,r)&&(e=r,n)){const u=!Lt.length;for(const c of i)c[1](),Lt.push(c,e);if(u){for(let c=0;c<Lt.length;c+=2)Lt[c][0](Lt[c+1]);Lt.length=0}}}function s(r){l(r(e))}function o(r,u=T){const c=[r,u];return i.add(c),i.size===1&&(n=t(l)||T),r(e),()=>{i.delete(c),i.size===0&&(n(),n=null)}}return{set:l,update:s,subscribe:o}}function tl(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function Te(e){const t=e-1;return t*t*t+1}function el(e,{delay:t=0,duration:n=400,easing:i=tl,amount:l=5,opacity:s=0}={}){const o=getComputedStyle(e),r=+o.opacity,u=o.filter==="none"?"":o.filter,c=r*(1-s);return{delay:t,duration:n,easing:i,css:(f,a)=>`opacity: ${r-c*a}; filter: ${u} blur(${a*l}px);`}}function xe(e,{delay:t=0,duration:n=400,easing:i=Ct}={}){const l=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:s=>`opacity: ${s*l}`}}function Ne(e,{delay:t=0,duration:n=400,easing:i=Te,x:l=0,y:s=0,opacity:o=0}={}){const r=getComputedStyle(e),u=+r.opacity,c=r.transform==="none"?"":r.transform,f=u*(1-o);return{delay:t,duration:n,easing:i,css:(a,p)=>`
			transform: ${c} translate(${(1-a)*l}px, ${(1-a)*s}px);
			opacity: ${u-f*p}`}}const nt={TITLE:0,MAP:1,MENU:2,ENC:3,CITY:4,SLEEP:5},St=Mt(nt.TITLE);function gt(){St.set(nt.MAP)}function si(){St.set(nt.MENU)}function nl(){St.set(nt.ENC)}function rn(){St.set(nt.TITLE)}function il(){St.set(nt.CITY)}function ll(){St.set(nt.SLEEP)}function st(e){return xe(e,{duration:li})}class ri{constructor(t,n,i,l,s,o,r){Ot(this,"block",()=>this.status.blocking=!0);Ot(this,"flee",()=>this.status.fleeing=!0);Ot(this,"blocking",()=>this.status.blocking);Ot(this,"fleeing",()=>this.status.fleeing);Ot(this,"ko",()=>this.hp<=0);this.name=t,this.lvl=n,this.maxhp=i,this.hp=i,this.str=l,this.dex=s,this.xp=o,this.gp=r,this.status={blocking:!1,fleeing:!1}}}function on(){let e=Pi,t=V(e);e-=t;let n=V(e);return e-=n,{hp:t,str:n,dex:e}}let ve;const sl=new Uint8Array(16);function rl(){if(!ve&&(ve=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ve))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ve(sl)}const H=[];for(let e=0;e<256;++e)H.push((e+256).toString(16).slice(1));function ol(e,t=0){return(H[e[t+0]]+H[e[t+1]]+H[e[t+2]]+H[e[t+3]]+"-"+H[e[t+4]]+H[e[t+5]]+"-"+H[e[t+6]]+H[e[t+7]]+"-"+H[e[t+8]]+H[e[t+9]]+"-"+H[e[t+10]]+H[e[t+11]]+H[e[t+12]]+H[e[t+13]]+H[e[t+14]]+H[e[t+15]]).toLowerCase()}const cl=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),An={randomUUID:cl};function ul(e,t,n){if(An.randomUUID&&!t&&!e)return An.randomUUID();e=e||{};const i=e.random||(e.rng||rl)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let l=0;l<16;++l)t[n+l]=i[l];return t}return ol(i)}function fl(){let e="",t=1;var n=on();let i=n.hp+Ui,l=n.str+Di,s=n.dex+Fi,o=0,r=0;return new ri(e,t,i,l,s,r,o)}function oi(){let e=wt(P);return Math.pow(e.lvl,3)+e.lvl*200+-1}function al(){let e=wt(P);e.lvl++;let t=on();e.maxhp+=t.hp,e.hp=e.maxhp,e.str+=t.str,e.dex+=t.dex,P.set(e)}function dl(){P.set(fl())}const P=Mt();let L,z,Q,Ie,Re,Ut=!0,cn=Xi,On=Vi,Xe=0,un=0;const pl="u",fn="f",ye="p",an="t",ci="w",je="c";function ui(e,t,n){e=Math.max(e,1),L=Ut?[]:L??[];let i=t??Math.floor(e/2),l=n??Math.floor(e/2);z=i,Q=l,Ut&&(Ie=z,Re=Q,Xe=0,un=0),Ve(i,l,ze.CITY);for(let s=1;s<e;s++){let o=s%2==0?s:-s;i+=o,l+=o,Ve(i,l)}L=fi(!0,e,t,n)}function _l(e,t,n,i){if(!e)return e;i??(i=cn);let l=Math.floor(i/2);t??(t=l),n??(n=l);let s=[];for(let o=0;o<i;o++)for(let r=0;r<i;r++){let u=t-l+o,c=n-l+r,f=(e[u]&&e[u][c])??fn;s[o]??(s[o]=[]),s[o][r]=f}return s[l][l]=pl,s}function ml(){let e=ai();if(z<e&&(L.splice(0,0,[]),Ie++,z=e),Q<e){let t=di();for(let n=0;n<t;n++)L[n].splice(0,0,void 0);Re++,Q=e}}function hl(e){return[...e.map(t=>[...t])]}function fi(e,t,n,i){var a;if(!L)return L;t=t??cn,n=n??z,i=i??Q;let l=hl(L),s=di(),o=vl(),r=Math.min(t??s,s),u=Math.min(t??o,o),c=Math.max((n??0)-Math.floor(r/2),0),f=Math.max((i??0)-Math.floor(u/2),0);for(let p=0;p<r;p++)for(let _=0;_<u;_++){let h=c+p,k=f+_;l[h]??(l[h]=[]);let y=e?Ae(h,k):fn;(a=l[h])[k]??(a[k]=y)}return l}function Ve(e,t,n){var i;return e??(e=z),t??(t=Q),L??(L=[]),L[e]??(L[e]=[]),(i=L[e])[t]??(i[t]=n??Ae(e,t)),n}function Ae(e,t){if(e??(e=z),t??(t=Q),L&&L[e]&&L[e][t])return L[e][t];let n;if(V(In)==1&&V(In)<Xe++)n=je,Xe=0;else{let i=gl(e,t),l=V(i.length+1);if(l>=i.length){let s=[ye,an];l=V(s.length+zi),n=l>=s.length?ye:s[l]}else n=i[l]}return Ut&&(n==je||n==ci)&&(n=ye),Ut||un++,n}function gl(e,t){let n=[];for(let i=e-1;i<=e+1;i++)for(let l=t-1;l<=t+1;l++)L[i]&&L[i][l]&&L[i][l]!=je&&n.push(L[i][l]);return n}function ai(){return Ae()==an?Math.floor(On/2):On}function di(e){return e??(e=L??[]),e.length}function vl(e){e??(e=L??[]);let t=e.map(n=>n.length).sort((n,i)=>n-i);return t[t.length-1]}function bl(e){if(z+=e.x,Q+=e.y,ml(),Ve()==ci)return z-=e.x,Q-=e.y,!1;{let n=ai();n>0&&ui(n*2+1,z,Q)}return!0}function kl(){let e=fi(!1);return _l(e,z,Q,cn)}function yl(){let e=Math.abs(z-Ie),t=Math.abs(Q-Re);return Math.ceil(Math.hypot(e,t))}function $l(){return un}function wl(){return{x:z,y:Q,abs:{x:z-Ie,y:Q-Re},terrain:Ae(),distance:yl()}}function El(){Ut=!0,ui(Gi),Ut=!1}const ze={FOG:fn,PLAIN:ye,FOREST:an,CITY:je},Xt=Mt(0),kt={miniMap:kl,location:wl,move:bl,getExplored:$l};function Cl(e){let t,n,i,l,s,o,r,u,c,f,a,p;return{c(){t=m("div"),n=m("div"),i=m("h1"),i.textContent="Relic",l=C(),s=m("p"),s.textContent="by elyktc",o=C(),r=m("div"),u=m("button"),u.textContent="Start",b(i,"class","svelte-19wnq64"),dt(i,"margin-right","50px"),dt(s,"margin-left","100px"),b(n,"class","view col svelte-19wnq64"),b(r,"class","ctrls")},m(_,h){N(_,t,h),d(t,n),d(n,i),d(n,l),d(n,s),d(t,o),d(t,r),d(r,u),f=!0,a||(p=[I(window,"keydown",e[0]),I(u,"click",gt)],a=!0)},p:T,i(_){f||(G(()=>{c||(c=lt(t,st,{},!0)),c.run(1)}),f=!0)},o(_){c||(c=lt(t,st,{},!1)),c.run(0),f=!1},d(_){_&&j(t),_&&c&&c.end(),a=!1,Z(p)}}}function Ml(e,t,n){let i;Y(e,Xt,s=>n(1,i=s));function l(s){switch(s.key){case" ":gt();break}}return yt(()=>{dl(),at(Xt,i=0,i)}),[l]}class Sl extends tt{constructor(t){super(),J(this,t,Ml,Cl,X,{})}}function Tl(e){let t,n,i,l,s,o,r,u,c,f,a,p,_,h,k,y,E,$,v,g,w,M,R;return{c(){t=m("div"),n=m("div"),i=m("button"),i.textContent="NW",l=C(),s=m("button"),s.textContent="N",o=C(),r=m("button"),r.textContent="NE",u=C(),c=m("div"),f=m("button"),f.textContent="W",a=C(),p=m("button"),p.textContent="Menu",_=C(),h=m("button"),h.textContent="E",k=C(),y=m("div"),E=m("button"),E.textContent="SW",$=C(),v=m("button"),v.textContent="S",g=C(),w=m("button"),w.textContent="SE",b(t,"class","ctrls")},m(A,U){N(A,t,U),d(t,n),d(n,i),d(n,l),d(n,s),d(n,o),d(n,r),d(t,u),d(t,c),d(c,f),d(c,a),d(c,p),d(c,_),d(c,h),d(t,k),d(t,y),d(y,E),d(y,$),d(y,v),d(y,g),d(y,w),M||(R=[I(window,"keydown",e[8]),I(i,"click",e[0]),I(s,"click",e[1]),I(r,"click",e[2]),I(f,"click",e[3]),I(p,"click",si),I(h,"click",e[4]),I(E,"click",e[5]),I(v,"click",e[6]),I(w,"click",e[7])],M=!0)},p:T,i:T,o:T,d(A){A&&j(t),M=!1,Z(R)}}}function jl(e){const t=ei(),n=()=>t("move",{x:-1,y:-1}),i=()=>t("move",{x:-1,y:0}),l=()=>t("move",{x:-1,y:1}),s=()=>t("move",{x:0,y:-1}),o=()=>t("move",{x:0,y:1}),r=()=>t("move",{x:1,y:-1}),u=()=>t("move",{x:1,y:0}),c=()=>t("move",{x:1,y:1});function f(a){switch(a.key){case"x":si();break;case"q":n();break;case"w":i();break;case"e":l();break;case"a":s();break;case"d":o();break;case"z":r();break;case"s":u();break;case"c":c();break}}return[n,i,l,s,o,r,u,c,f]}class xl extends tt{constructor(t){super(),J(this,t,jl,Tl,X,{})}}let $e=new Map;function Nl(e,t){this.name=e,this.innCost=t}function Il(){let e=ul().substring(0,8),t=V(Zi,Ji);return new Nl(e,t)}function Rl(e,t){let n=`${e}.${t}`;return $e.has(n)||$e.set(n,Il()),$e.get(n)}function Al(){$e.clear()}function Ol(e){let t,n,i,l,s,o;return l=new xl({}),l.$on("move",e[2]),{c(){t=m("div"),n=m("div"),i=C(),q(l.$$.fragment),b(n,"class","view field svelte-z27jc")},m(r,u){N(r,t,u),d(t,n),n.innerHTML=e[0],d(t,i),D(l,t,null),o=!0},p(r,[u]){(!o||u&1)&&(n.innerHTML=r[0])},i(r){o||(S(l.$$.fragment,r),G(()=>{s||(s=lt(t,st,{},!0)),s.run(1)}),o=!0)},o(r){x(l.$$.fragment,r),s||(s=lt(t,st,{},!1)),s.run(0),o=!1},d(r){r&&j(t),F(l),r&&s&&s.end()}}}function Ll(e,t,n){let i;Y(e,Xt,c=>n(3,i=c));function l(c){let f=p=>p.map(_=>`<div class="icon map-${_}"></div>`),a=c.map(p=>f(p).join(""));n(0,r=`<div class="row">${a.join('</div><div class="row">')}</div>`)}function s(){return kt.location().terrain==ze.FOREST?Math.ceil(Rn/2):Rn}function o(c){kt.move(c)&&(at(Xt,i++,i),l(kt.miniMap()),kt.location().terrain==ze.CITY?il():V(s())==1&&nl())}yt(()=>{i||(El(),Al()),l(kt.miniMap())});let r="";return[r,o,c=>o(c.detail)]}let Pl=class extends tt{constructor(t){super(),J(this,t,Ll,Ol,X,{})}};function Ul(e){let t,n,i,l=e[0].name+"",s,o,r,u,c,f,a=e[0].lvl+"",p,_,h,k,y,E,$=e[0].xp+"",v,g,w,M,R,A,U,rt,Tt,O,ot,K=e[0].hp+"",Oe,dn,Zt=e[0].maxhp+"",Le,pn,jt,Jt,_n,te,ee=e[0].str+"",Pe,mn,xt,ne,hn,ie,le=e[0].dex+"",Ue,gn,$t,se,vn,re,oe=e[0].gp+"",De,bn,Nt,ce,kn,ue,fe=ge(e[1])+"",Fe,yn,It,ae,$n,de,wn,Rt,pe,En,_e,Cn,At,Ht,Mn,me,vt,et,He,Sn;return{c(){t=m("div"),n=m("div"),i=m("h1"),s=W(l),o=C(),r=m("div"),u=m("div"),u.textContent="Level",c=C(),f=m("div"),p=W(a),_=C(),h=m("div"),k=m("div"),k.textContent="Experience",y=C(),E=m("div"),v=W($),g=C(),w=m("div"),M=m("div"),M.textContent="Next level at",R=C(),A=m("div"),A.textContent=`${oi()}`,U=C(),rt=m("div"),Tt=m("div"),Tt.textContent="Health",O=C(),ot=m("div"),Oe=W(K),dn=W(" / "),Le=W(Zt),pn=C(),jt=m("div"),Jt=m("div"),Jt.textContent="Strength",_n=C(),te=m("div"),Pe=W(ee),mn=C(),xt=m("div"),ne=m("div"),ne.textContent="Dexterity",hn=C(),ie=m("div"),Ue=W(le),gn=C(),$t=m("div"),se=m("div"),se.textContent="Gold",vn=C(),re=m("div"),De=W(oe),bn=C(),Nt=m("div"),ce=m("div"),ce.textContent="Steps",kn=C(),ue=m("div"),Fe=W(fe),yn=C(),It=m("div"),ae=m("div"),ae.textContent="Explored",$n=C(),de=m("div"),de.textContent=`${ge(kt.getExplored())}`,wn=C(),Rt=m("div"),pe=m("div"),pe.textContent="Distance traveled",En=C(),_e=m("div"),_e.textContent=`${ge(kt.location().distance)}`,Cn=C(),At=m("div"),Ht=m("button"),Ht.textContent="Reset",Mn=C(),me=m("button"),me.textContent="Back",dt(i,"display","none"),b(u,"class","col label svelte-hfjk0k"),b(f,"class","col value svelte-hfjk0k"),b(r,"class","row svelte-hfjk0k"),b(k,"class","col label svelte-hfjk0k"),b(E,"class","col value svelte-hfjk0k"),b(h,"class","row svelte-hfjk0k"),b(M,"class","col label svelte-hfjk0k"),b(A,"class","col value svelte-hfjk0k"),b(w,"class","row svelte-hfjk0k"),b(Tt,"class","col label svelte-hfjk0k"),b(ot,"class","col value svelte-hfjk0k"),b(rt,"class","row svelte-hfjk0k"),dt(rt,"margin-top","20px"),b(Jt,"class","col label svelte-hfjk0k"),b(te,"class","col value svelte-hfjk0k"),b(jt,"class","row svelte-hfjk0k"),b(ne,"class","col label svelte-hfjk0k"),b(ie,"class","col value svelte-hfjk0k"),b(xt,"class","row svelte-hfjk0k"),b(se,"class","col label svelte-hfjk0k"),b(re,"class","col value svelte-hfjk0k"),b($t,"class","row svelte-hfjk0k"),dt($t,"margin","10px 0"),b(ce,"class","col label svelte-hfjk0k"),b(ue,"class","col value svelte-hfjk0k"),b(Nt,"class","row svelte-hfjk0k"),b(ae,"class","col label svelte-hfjk0k"),b(de,"class","col value svelte-hfjk0k"),b(It,"class","row svelte-hfjk0k"),b(pe,"class","col label svelte-hfjk0k"),b(_e,"class","col value svelte-hfjk0k"),b(Rt,"class","row svelte-hfjk0k"),b(n,"class","view col svelte-hfjk0k"),b(Ht,"class","danger svelte-hfjk0k"),b(At,"class","ctrls")},m(B,ct){N(B,t,ct),d(t,n),d(n,i),d(i,s),d(n,o),d(n,r),d(r,u),d(r,c),d(r,f),d(f,p),d(n,_),d(n,h),d(h,k),d(h,y),d(h,E),d(E,v),d(n,g),d(n,w),d(w,M),d(w,R),d(w,A),d(n,U),d(n,rt),d(rt,Tt),d(rt,O),d(rt,ot),d(ot,Oe),d(ot,dn),d(ot,Le),d(n,pn),d(n,jt),d(jt,Jt),d(jt,_n),d(jt,te),d(te,Pe),d(n,mn),d(n,xt),d(xt,ne),d(xt,hn),d(xt,ie),d(ie,Ue),d(n,gn),d(n,$t),d($t,se),d($t,vn),d($t,re),d(re,De),d(n,bn),d(n,Nt),d(Nt,ce),d(Nt,kn),d(Nt,ue),d(ue,Fe),d(n,yn),d(n,It),d(It,ae),d(It,$n),d(It,de),d(n,wn),d(n,Rt),d(Rt,pe),d(Rt,En),d(Rt,_e),d(t,Cn),d(t,At),d(At,Ht),d(At,Mn),d(At,me),et=!0,He||(Sn=[I(window,"keydown",e[2]),I(Ht,"click",rn),I(me,"click",gt)],He=!0)},p(B,[ct]){(!et||ct&1)&&l!==(l=B[0].name+"")&&ft(s,l),(!et||ct&1)&&a!==(a=B[0].lvl+"")&&ft(p,a),(!et||ct&1)&&$!==($=B[0].xp+"")&&ft(v,$),(!et||ct&1)&&K!==(K=B[0].hp+"")&&ft(Oe,K),(!et||ct&1)&&Zt!==(Zt=B[0].maxhp+"")&&ft(Le,Zt),(!et||ct&1)&&ee!==(ee=B[0].str+"")&&ft(Pe,ee),(!et||ct&1)&&le!==(le=B[0].dex+"")&&ft(Ue,le),(!et||ct&1)&&oe!==(oe=B[0].gp+"")&&ft(De,oe),(!et||ct&2)&&fe!==(fe=ge(B[1])+"")&&ft(Fe,fe)},i(B){et||(G(()=>{vt||(vt=lt(t,st,{},!0)),vt.run(1)}),et=!0)},o(B){vt||(vt=lt(t,st,{},!1)),vt.run(0),et=!1},d(B){B&&j(t),B&&vt&&vt.end(),He=!1,Z(Sn)}}}function Dl(e,t,n){let i,l;Y(e,P,o=>n(0,i=o)),Y(e,Xt,o=>n(1,l=o));function s(o){switch(o.key){case"q":gt();break;case"Escape":rn();break}}return[i,l,s]}class Fl extends tt{constructor(t){super(),J(this,t,Dl,Ul,X,{})}}function Hl(e,{from:t,to:n},i={}){const l=getComputedStyle(e),s=l.transform==="none"?"":l.transform,[o,r]=l.transformOrigin.split(" ").map(parseFloat),u=t.left+t.width*o/n.width-(n.left+o),c=t.top+t.height*r/n.height-(n.top+r),{delay:f=0,duration:a=_=>Math.sqrt(_)*120,easing:p=Te}=i;return{delay:f,duration:Ft(a)?a(Math.sqrt(u*u+c*c)):a,easing:p,css:(_,h)=>{const k=h*u,y=h*c,E=_+h*t.width/n.width,$=_+h*t.height/n.height;return`transform: ${s} translate(${k}px, ${y}px) scale(${E}, ${$});`}}}const ql={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},Bl=()=>{const{subscribe:e,update:t}=Mt([]);let n=0;const i={},l=c=>c instanceof Object;return{subscribe:e,push:(c,f={})=>{const a={target:"default",...l(c)?c:{...f,msg:c}},p=i[a.target]||{},_={...ql,...p,...a,theme:{...p.theme,...a.theme},classes:[...p.classes||[],...a.classes||[]],id:++n};return t(h=>_.reversed?[...h,_]:[_,...h]),n},pop:c=>{t(f=>{if(!f.length||c===0)return[];if(l(c))return f.filter(p=>c(p));const a=c||Math.max(...f.map(p=>p.id));return f.filter(p=>p.id!==a)})},set:(c,f={})=>{const a=l(c)?{...c}:{...f,id:c};t(p=>{const _=p.findIndex(h=>h.id===a.id);return _>-1&&(p[_]={...p[_],...a}),p})},_init:(c="default",f={})=>(i[c]=f,i)}},Dt=Bl();function Ln(e){return Object.prototype.toString.call(e)==="[object Date]"}function Qe(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((l,s)=>Qe(e[s],l));return l=>i.map(s=>s(l))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Ln(e)&&Ln(t)){e=e.getTime(),t=t.getTime();const s=t-e;return o=>new Date(e+o*s)}const i=Object.keys(t),l={};return i.forEach(s=>{l[s]=Qe(e[s],t[s])}),s=>{const o={};return i.forEach(r=>{o[r]=l[r](s)}),o}}if(n==="number"){const i=t-e;return l=>e+l*i}throw new Error(`Cannot interpolate ${n} values`)}function Ze(e,t={}){const n=Mt(e);let i,l=e;function s(o,r){if(e==null)return n.set(e=o),Promise.resolve();l=o;let u=i,c=!1,{delay:f=0,duration:a=400,easing:p=Ct,interpolate:_=Qe}=Be(Be({},t),r);if(a===0)return u&&(u.abort(),u=null),n.set(e=l),Promise.resolve();const h=Vt()+f;let k;return i=zt(y=>{if(y<h)return!0;c||(k=_(e,o),typeof a=="function"&&(a=a(e,o)),c=!0),u&&(u.abort(),u=null);const E=y-h;return E>a?(n.set(e=o),!1):(n.set(e=k(p(E/a))),!0)}),i.promise}return{set:s,update:(o,r)=>s(o(l,e),r),subscribe:n.subscribe}}function Wl(e){let t,n=e[0].msg+"",i;return{c(){t=new $i(!1),i=Qn(),t.a=i},m(l,s){t.m(n,l,s),N(l,i,s)},p(l,s){s&1&&n!==(n=l[0].msg+"")&&t.p(n)},i:T,o:T,d(l){l&&j(i),l&&t.d()}}}function Yl(e){let t,n,i;const l=[e[2]];var s=e[0].component.src;function o(r){let u={};for(let c=0;c<l.length;c+=1)u=Be(u,l[c]);return{props:u}}return s&&(t=jn(s,o())),{c(){t&&q(t.$$.fragment),n=Qn()},m(r,u){t&&D(t,r,u),N(r,n,u),i=!0},p(r,u){const c=u&4?Ai(l,[Oi(r[2])]):{};if(s!==(s=r[0].component.src)){if(t){_t();const f=t;x(f.$$.fragment,1,0,()=>{F(f,1)}),mt()}s?(t=jn(s,o()),q(t.$$.fragment),S(t.$$.fragment,1),D(t,n.parentNode,n)):t=null}else s&&t.$set(c)},i(r){i||(t&&S(t.$$.fragment,r),i=!0)},o(r){t&&x(t.$$.fragment,r),i=!1},d(r){r&&j(n),t&&F(t,r)}}}function Pn(e){let t,n,i;return{c(){t=m("div"),b(t,"class","_toastBtn pe svelte-l65oht"),b(t,"role","button"),b(t,"tabindex","0")},m(l,s){N(l,t,s),n||(i=[I(t,"click",e[4]),I(t,"keydown",e[8])],n=!0)},p:T,d(l){l&&j(t),n=!1,Z(i)}}}function Kl(e){let t,n,i,l,s,o,r,u,c,f;const a=[Yl,Wl],p=[];function _(k,y){return k[0].component?0:1}i=_(e),l=p[i]=a[i](e);let h=e[0].dismissable&&Pn(e);return{c(){t=m("div"),n=m("div"),l.c(),s=C(),h&&h.c(),o=C(),r=m("progress"),b(n,"role","status"),b(n,"class","_toastMsg svelte-l65oht"),it(n,"pe",e[0].component),b(r,"class","_toastBar svelte-l65oht"),r.value=e[1],b(t,"class","_toastItem svelte-l65oht"),it(t,"pe",e[0].pausable)},m(k,y){N(k,t,y),d(t,n),p[i].m(n,null),d(t,s),h&&h.m(t,null),d(t,o),d(t,r),u=!0,c||(f=[I(t,"mouseenter",e[9]),I(t,"mouseleave",e[6])],c=!0)},p(k,[y]){let E=i;i=_(k),i===E?p[i].p(k,y):(_t(),x(p[E],1,1,()=>{p[E]=null}),mt(),l=p[i],l?l.p(k,y):(l=p[i]=a[i](k),l.c()),S(l,1),l.m(n,null)),(!u||y&1)&&it(n,"pe",k[0].component),k[0].dismissable?h?h.p(k,y):(h=Pn(k),h.c(),h.m(t,o)):h&&(h.d(1),h=null),(!u||y&2)&&(r.value=k[1]),(!u||y&1)&&it(t,"pe",k[0].pausable)},i(k){u||(S(l),u=!0)},o(k){x(l),u=!1},d(k){k&&j(t),p[i].d(),h&&h.d(),c=!1,Z(f)}}}function Gl(e,t,n){let i,{item:l}=t;const s=Ze(l.initial,{duration:l.duration,easing:Ct});Y(e,s,v=>n(1,i=v));const o=()=>Dt.pop(l.id),r=()=>{(i===1||i===0)&&o()};let u=l.initial,c=u,f=!1;const a=()=>{!f&&i!==u&&(s.set(i,{duration:0}),f=!0)},p=()=>{if(f){const v=l.duration,g=v-v*((i-c)/(u-c));s.set(u,{duration:g}).then(r),f=!1}};let _={};const h=(v,g="undefined")=>typeof v===g;let k;yt((v=document)=>{if(h(v.hidden))return;const g=()=>v.hidden?a():p(),w="visibilitychange";v.addEventListener(w,g),k=()=>v.removeEventListener(w,g),g()}),ti(()=>{h(l.onpop,"function")&&l.onpop(l.id),k&&k()});const E=v=>{v instanceof KeyboardEvent&&["Enter"," "].includes(v.key)&&o()},$=()=>{l.pausable&&a()};return e.$$set=v=>{"item"in v&&n(0,l=v.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(h(l.progress)||n(0,l.next=l.progress,l)),e.$$.dirty&131&&u!==l.next&&(n(7,u=l.next),c=i,f=!1,s.set(u).then(r)),e.$$.dirty&1&&l.component){const{props:v={},sendIdTo:g}=l.component;n(2,_={...v,...g&&{[g]:l.id}})}},[l,i,_,s,o,a,p,u,E,$]}class Xl extends tt{constructor(t){super(),J(this,t,Gl,Kl,X,{item:0})}}function Un(e,t,n){const i=e.slice();return i[5]=t[n],i}function Dn(e,t){let n,i,l,s,o,r,u,c,f=T,a;return i=new Xl({props:{item:t[5]}}),{key:e,first:null,c(){n=m("li"),q(i.$$.fragment),l=C(),b(n,"class",s=Ee(t[5].classes.join(" "))+" svelte-yh90az"),b(n,"style",o=t[1](t[5].theme)),this.first=n},m(p,_){N(p,n,_),D(i,n,null),d(n,l),a=!0},p(p,_){t=p;const h={};_&1&&(h.item=t[5]),i.$set(h),(!a||_&1&&s!==(s=Ee(t[5].classes.join(" "))+" svelte-yh90az"))&&b(n,"class",s),(!a||_&1&&o!==(o=t[1](t[5].theme)))&&b(n,"style",o)},r(){c=n.getBoundingClientRect()},f(){Si(n),f(),Jn(n,c)},a(){f(),f=Mi(n,c,Hl,{duration:200})},i(p){a||(S(i.$$.fragment,p),G(()=>{u&&u.end(1),r=sn(n,Ne,t[5].intro),r.start()}),a=!0)},o(p){x(i.$$.fragment,p),r&&r.invalidate(),u=Qt(n,xe,{}),a=!1},d(p){p&&j(n),F(i),p&&u&&u.end()}}}function Vl(e){let t,n=[],i=new Map,l,s=e[0];const o=r=>r[5].id;for(let r=0;r<s.length;r+=1){let u=Un(e,s,r),c=o(u);i.set(c,n[r]=Dn(c,u))}return{c(){t=m("ul");for(let r=0;r<n.length;r+=1)n[r].c();b(t,"class","_toastContainer svelte-yh90az")},m(r,u){N(r,t,u);for(let c=0;c<n.length;c+=1)n[c].m(t,null);l=!0},p(r,[u]){if(u&3){s=r[0],_t();for(let c=0;c<n.length;c+=1)n[c].r();n=Ri(n,u,o,1,r,s,i,t,Ii,Dn,null,Un);for(let c=0;c<n.length;c+=1)n[c].a();mt()}},i(r){if(!l){for(let u=0;u<s.length;u+=1)S(n[u]);l=!0}},o(r){for(let u=0;u<n.length;u+=1)x(n[u]);l=!1},d(r){r&&j(t);for(let u=0;u<n.length;u+=1)n[u].d()}}}function zl(e,t,n){let i;Y(e,Dt,u=>n(4,i=u));let{options:l={}}=t,{target:s="default"}=t,o;const r=u=>Object.keys(u).reduce((c,f)=>`${c}${f}:${u[f]};`,"");return e.$$set=u=>{"options"in u&&n(2,l=u.options),"target"in u&&n(3,s=u.target)},e.$$.update=()=>{e.$$.dirty&12&&Dt._init(s,l),e.$$.dirty&24&&n(0,o=i.filter(u=>u.target===s))},[o,r,l,s,i]}class Ql extends tt{constructor(t){super(),J(this,t,zl,Vl,X,{options:2,target:3})}}function Zl(e){let t,n,i,l;return n=new Ql({props:{options:e[2],target:e[1]}}),{c(){t=m("div"),q(n.$$.fragment),b(t,"class",i=Ee(`toast-wrapper-${e[0]}`)+" svelte-gbm9c2")},m(s,o){N(s,t,o),D(n,t,null),l=!0},p(s,[o]){const r={};o&4&&(r.options=s[2]),o&2&&(r.target=s[1]),n.$set(r),(!l||o&1&&i!==(i=Ee(`toast-wrapper-${s[0]}`)+" svelte-gbm9c2"))&&b(t,"class",i)},i(s){l||(S(n.$$.fragment,s),l=!0)},o(s){x(n.$$.fragment,s),l=!1},d(s){s&&j(t),F(n)}}}function Jl(e,t,n){const i={duration:1e3,initial:1,next:0,pausable:!0,dismissable:!1,reversed:!1,intro:{x:0},theme:{},classes:[]},l={duration:500,initial:1,next:0,pausable:!1,dismissable:!1,reversed:!0,intro:{y:20,duration:100},theme:{},classes:[]};let s;yt(()=>{o==1?n(2,s=i):o==2&&n(2,s=l)});let{type:o=1}=t,{target:r=void 0}=t;return e.$$set=u=>{"type"in u&&n(0,o=u.type),"target"in u&&n(1,r=u.target)},[o,r,s]}class Je extends tt{constructor(t){super(),J(this,t,Jl,Zl,X,{type:0,target:1})}}function ts(){let e="",t=1,n=on(),i=n.hp+Hi,l=n.str+qi,s=n.dex+Bi,o=V(Wi),r=Math.ceil(Se(i+l+s)/2);return new ri(e,t,i,l,s,r,o)}function es(){let e=ts();console.log(JSON.stringify(e)),ut.set(e)}const ut=Mt();function ns(e){let t;return{c(){t=m("div")},m(n,i){N(n,t,i)},p:T,i:T,o:T,d(n){n&&j(t)}}}function is(e){let t,n,i,l;return{c(){t=m("div"),b(t,"class","icon map-u svelte-btrsmh"),it(t,"rejoice",e[1].ko())},m(s,o){N(s,t,o),l=!0},p(s,o){e=s,(!l||o&2)&&it(t,"rejoice",e[1].ko())},i(s){l||(G(()=>{i&&i.end(1),n=sn(t,Ne,e[2]),n.start()}),l=!0)},o(s){n&&n.invalidate(),i=Qt(t,e[4],{}),l=!1},d(s){s&&j(t),s&&i&&i.end()}}}function Fn(e){let t,n,i,l,s;return{c(){t=m("div"),n=m("div"),b(n,"class","icon dragon svelte-btrsmh"),it(n,"rejoice",e[0].ko()),b(t,"class","col enc img svelte-btrsmh")},m(o,r){N(o,t,r),d(t,n),s=!0},p(o,r){e=o,(!s||r&1)&&it(n,"rejoice",e[0].ko())},i(o){s||(G(()=>{l&&l.end(1),i=sn(n,Ne,e[3]),i.start()}),s=!0)},o(o){i&&i.invalidate(),l=Qt(n,e[5],{}),s=!1},d(o){o&&j(t),o&&l&&l.end()}}}function ls(e){let t,n,i,l,s,o,r,u,c,f,a,p,_,h,k=!e[1].ko()&&!e[1].fleeing(),y;const E=[is,ns],$=[];function v(w,M){return M&1&&(l=null),l==null&&(l=!w[0].ko()&&!w[0].fleeing()),l?0:1}s=v(e,-1),o=$[s]=E[s](e),c=new Je({props:{target:"user",type:2}}),_=new Je({props:{target:"enc",type:2}});let g=k&&Fn(e);return{c(){t=m("div"),n=m("div"),i=m("div"),o.c(),r=C(),u=m("div"),q(c.$$.fragment),f=C(),a=m("div"),p=m("div"),q(_.$$.fragment),h=C(),g&&g.c(),b(i,"class","col user img svelte-btrsmh"),b(u,"class","col toast"),b(n,"class","row"),b(p,"class","col toast"),b(a,"class","row"),b(t,"class","row imgs svelte-btrsmh")},m(w,M){N(w,t,M),d(t,n),d(n,i),$[s].m(i,null),d(n,r),d(n,u),D(c,u,null),d(t,f),d(t,a),d(a,p),D(_,p,null),d(a,h),g&&g.m(a,null),y=!0},p(w,[M]){let R=s;s=v(w,M),s===R?$[s].p(w,M):(_t(),x($[R],1,1,()=>{$[R]=null}),mt(),o=$[s],o?o.p(w,M):(o=$[s]=E[s](w),o.c()),S(o,1),o.m(i,null)),M&2&&(k=!w[1].ko()&&!w[1].fleeing()),k?g?(g.p(w,M),M&2&&S(g,1)):(g=Fn(w),g.c(),S(g,1),g.m(a,null)):g&&(_t(),x(g,1,1,()=>{g=null}),mt())},i(w){y||(S(o),S(c.$$.fragment,w),S(_.$$.fragment,w),S(g),y=!0)},o(w){x(o),x(c.$$.fragment,w),x(_.$$.fragment,w),x(g),y=!1},d(w){w&&j(t),$[s].d(),F(c),F(_),g&&g.d()}}}function ss(e,t,n){let i,l;Y(e,P,a=>n(0,i=a)),Y(e,ut,a=>n(1,l=a));const s={x:40,duration:Ge},o={x:-40,duration:Ge},r={amount:40,duration:Ke};function u(a,p,_,h,k){if(!k){if(_)return el(a,r);{let y=h;return p||(y.x*=-1),Ne(a,y)}}}function c(a){return u(a,l.ko(),i.ko(),s)}function f(a){return u(a,i.ko(),l.ko(),o,i.ko()||i.fleeing())}return[i,l,s,o,c,f]}class rs extends tt{constructor(t){super(),J(this,t,ss,ls,X,{})}}function os(e){let t;return{c(){t=m("div")},m(n,i){N(n,t,i)},p:T,i:T,o:T,d(n){n&&j(t)}}}function cs(e){let t,n,i;return{c(){t=m("progress"),t.value=e[2],b(t,"class","svelte-9px8le")},m(l,s){N(l,t,s),i=!0},p(l,s){(!i||s&4)&&(t.value=l[2])},i(l){i||(n&&n.end(1),i=!0)},o(l){n=Qt(t,xe,{duration:100}),i=!1},d(l){l&&j(t),l&&n&&n.end()}}}function us(e){let t;return{c(){t=m("div")},m(n,i){N(n,t,i)},p:T,i:T,o:T,d(n){n&&j(t)}}}function fs(e){let t,n,i;return{c(){t=m("progress"),t.value=e[3],b(t,"class","svelte-9px8le")},m(l,s){N(l,t,s),i=!0},p(l,s){(!i||s&8)&&(t.value=l[3])},i(l){i||(n&&n.end(1),i=!0)},o(l){n=Qt(t,xe,{duration:100}),i=!1},d(l){l&&j(t),l&&n&&n.end()}}}function as(e){let t,n,i,l,s,o,r,u,c,f,a;const p=[cs,os],_=[];function h($,v){return v&2&&(i=null),i==null&&(i=!$[1].ko()&&!$[1].fleeing()),i?0:1}l=h(e,-1),s=_[l]=p[l](e);const k=[fs,us],y=[];function E($,v){return v&1&&(u=null),u==null&&(u=!$[0].ko()&&!$[0].fleeing()),u?0:1}return c=E(e,-1),f=y[c]=k[c](e),{c(){t=m("div"),n=m("div"),s.c(),o=C(),r=m("div"),f.c(),b(n,"class","col user"),b(r,"class","col enc"),b(t,"class","row info svelte-9px8le")},m($,v){N($,t,v),d(t,n),_[l].m(n,null),d(t,o),d(t,r),y[c].m(r,null),a=!0},p($,[v]){let g=l;l=h($,v),l===g?_[l].p($,v):(_t(),x(_[g],1,1,()=>{_[g]=null}),mt(),s=_[l],s?s.p($,v):(s=_[l]=p[l]($),s.c()),S(s,1),s.m(n,null));let w=c;c=E($,v),c===w?y[c].p($,v):(_t(),x(y[w],1,1,()=>{y[w]=null}),mt(),f=y[c],f?f.p($,v):(f=y[c]=k[c]($),f.c()),S(f,1),f.m(r,null))},i($){a||(S(s),S(f),a=!0)},o($){x(s),x(f),a=!1},d($){$&&j(t),_[l].d(),y[c].d()}}}function ds(e,t,n){let i,l,s,o;Y(e,ut,c=>n(0,i=c)),Y(e,P,c=>n(1,l=c));const r=Ze(0,{duration:Nn,easing:Te});Y(e,r,c=>n(2,s=c));const u=Ze(0,{duration:Nn,easing:Te});return Y(e,u,c=>n(3,o=c)),e.$$.update=()=>{e.$$.dirty&2&&l.hp&&r.set(l.hp/l.maxhp),e.$$.dirty&1&&i.hp&&u.set(i.hp/i.maxhp)},[i,l,s,o,r,u]}class ps extends tt{constructor(t){super(),J(this,t,ds,as,X,{})}}function _s(e){let t,n,i,l,s,o;return{c(){t=m("div"),n=m("div"),i=m("div"),l=C(),s=m("div"),o=m("div"),b(i,"class","circle svelte-1uajhnl"),dt(i,"transform",`rotate(${Math.min(e[1],180)}deg)`),b(n,"class","wrapper wrapper1 svelte-1uajhnl"),b(o,"class","circle svelte-1uajhnl"),it(o,"hidden",e[0]<=50),dt(o,"transform",`rotate(${e[1]}deg)`),b(s,"class","wrapper wrapper2 svelte-1uajhnl"),b(t,"class","progress-bar svelte-1uajhnl"),it(t,"hidden",e[0]>=100)},m(r,u){N(r,t,u),d(t,n),d(n,i),d(t,l),d(t,s),d(s,o)},p(r,[u]){u&2&&dt(i,"transform",`rotate(${Math.min(r[1],180)}deg)`),u&1&&it(o,"hidden",r[0]<=50),u&2&&dt(o,"transform",`rotate(${r[1]}deg)`),u&1&&it(t,"hidden",r[0]>=100)},i:T,o:T,d(r){r&&j(t)}}}const Hn=100;function ms(e,t,n){let i;const l=ei();function s(){n(5,c+=Hn),f>=100&&(clearInterval(a),l("ready"))}function o(p){a&&clearInterval(a),n(4,u=p),n(5,c=0),a=setInterval(s,Hn)}function r(){n(5,c=u)}let u=1e3,c,f,a;return e.$$.update=()=>{e.$$.dirty&48&&n(0,f=c/u*100),e.$$.dirty&1&&n(1,i=f*3.6)},[f,i,o,r,u,c]}class hs extends tt{constructor(t){super(),J(this,t,ms,_s,X,{start:2,cancel:3})}get start(){return this.$$.ctx[2]}get cancel(){return this.$$.ctx[3]}}function gs(e,t=void 0){let n=t?{target:t}:void 0;Dt.push(e,n)}function vs(e,t=void 0){let n={initial:0,next:0};t&&(n.target=t),Dt.push(e,n)}function bs(){Dt.pop(0)}const ht={show:gs,persist:vs,clear:bs};function pi(e,t){let n;if(e.dex>t.dex?n=1-t.dex/e.dex:n=e.dex/t.dex,n=Math.ceil(n*100),V(100)*Ki<n){let i=Se(e.str);return t.blocking()&&(i=Math.ceil(i/4)),i}}function ks(){let e=wt(P),t=wt(ut),n=pi(e,t);n?(t.hp-=n,ut.set(t)):n===void 0&&P.set(e),ht.show(_i(n),"enc")}function ys(){let e=wt(P),t=wt(ut),n=wt(we);if(n>3&&V(1)==1)t.flee(),ut.set(t);else{let i=pi(t,e);i?(e.hp-=i,P.set(e),n&&we.set(0)):i===void 0&&(we.set(++n),ut.set(t)),ht.show(_i(i),"user")}}function $s(e,t){return Math.ceil(t/e*1e3*ii)}function qn(){return Yi*ii}const we=Mt(0),_i=e=>e===void 0?"Miss":`${e}`;function Bn(e){let t,n,i,l;return t=new rs({}),i=new ps({}),{c(){q(t.$$.fragment),n=C(),q(i.$$.fragment)},m(s,o){D(t,s,o),N(s,n,o),D(i,s,o),l=!0},i(s){l||(S(t.$$.fragment,s),S(i.$$.fragment,s),l=!0)},o(s){x(t.$$.fragment,s),x(i.$$.fragment,s),l=!1},d(s){F(t,s),s&&j(n),F(i,s)}}}function Wn(e){let t,n,i,l,s,o,r,u,c,f,a,p,_,h,k,y={};a=new hs({props:y}),e[16](a),a.$on("ready",e[10]);function E(g,w){if(g[8])return Cs;if(g[0]&&g[5])return Es;if(g[1]&&g[5])return ws}let $=E(e),v=$&&$(e);return{c(){t=m("div"),n=m("div"),i=m("button"),l=W("Fight"),o=C(),r=m("button"),u=W("Block"),f=C(),q(a.$$.fragment),p=C(),v&&v.c(),i.disabled=s=!e[4],r.disabled=c=!e[4],b(t,"class","ctrls col")},m(g,w){N(g,t,w),d(t,n),d(n,i),d(i,l),d(n,o),d(n,r),d(r,u),d(n,f),D(a,n,null),d(t,p),v&&v.m(t,null),_=!0,h||(k=[I(i,"click",e[11]),I(r,"click",e[12])],h=!0)},p(g,w){(!_||w&16&&s!==(s=!g[4]))&&(i.disabled=s),(!_||w&16&&c!==(c=!g[4]))&&(r.disabled=c);const M={};a.$set(M),$===($=E(g))&&v?v.p(g,w):(v&&v.d(1),v=$&&$(g),v&&(v.c(),v.m(t,null)))},i(g){_||(S(a.$$.fragment,g),_=!0)},o(g){x(a.$$.fragment,g),_=!1},d(g){g&&j(t),e[16](null),F(a),v&&v.d(),h=!1,Z(k)}}}function ws(e){let t,n,i;return{c(){t=m("button"),t.textContent="Reset"},m(l,s){N(l,t,s),n||(i=I(t,"click",e[15]),n=!0)},p:T,d(l){l&&j(t),n=!1,i()}}}function Es(e){let t,n,i;return{c(){t=m("button"),t.textContent="Proceed"},m(l,s){N(l,t,s),n||(i=I(t,"click",e[14]),n=!0)},p:T,d(l){l&&j(t),n=!1,i()}}}function Cs(e){let t,n,i;return{c(){t=m("button"),t.textContent="Flee"},m(l,s){N(l,t,s),n||(i=I(t,"click",e[13]),n=!0)},p:T,d(l){l&&j(t),n=!1,i()}}}function Ms(e){let t,n,i,l=!e[3].fleeing(),s,o,r,u,c=e[2]&&!e[6]&&Bn(),f=l&&Wn(e);return{c(){t=m("div"),n=m("div"),c&&c.c(),i=C(),f&&f.c(),b(n,"class","view field svelte-1tqkonl")},m(a,p){N(a,t,p),d(t,n),c&&c.m(n,null),d(t,i),f&&f.m(t,null),o=!0,r||(u=I(window,"keydown",e[9]),r=!0)},p(a,[p]){a[2]&&!a[6]?c?p&68&&S(c,1):(c=Bn(),c.c(),S(c,1),c.m(n,null)):c&&(_t(),x(c,1,1,()=>{c=null}),mt()),p&8&&(l=!a[3].fleeing()),l?f?(f.p(a,p),p&8&&S(f,1)):(f=Wn(a),f.c(),S(f,1),f.m(t,null)):f&&(_t(),x(f,1,1,()=>{f=null}),mt())},i(a){o||(S(c),S(f),G(()=>{s||(s=lt(t,st,{},!0)),s.run(1)}),o=!0)},o(a){x(c),x(f),s||(s=lt(t,st,{},!1)),s.run(0),o=!1},d(a){a&&j(t),c&&c.d(),f&&f.d(),a&&s&&s.end(),r=!1,u()}}}function Ss(e,t,n){let i,l,s;Y(e,ut,O=>n(2,l=O)),Y(e,P,O=>n(3,s=O));function o(O){switch(O.key){case"f":c();break;case"v":f();break;case"q":i?a():R&&w?y():A&&w&&E();break}}function r(){i&&(v=Se(qn()),U.start(v))}function u(){i&&n(4,g=!0)}function c(){g&&(n(4,g=!1),at(P,s.status.blocking=!1,s),ks(),setTimeout(r,1))}function f(){g&&(n(4,g=!1),s.block(),r())}function a(){U.cancel(),s.flee();var O=V(Math.min(s.gp/2,l.gp));at(P,s.gp-=O,s),O&&ht.show(`Dropped ${O} gold`),bt(1e3,gt)}function p(){i&&(ys(),rt=bt(Se($),p))}function _(){n(0,R=!0),U.cancel(),n(4,g=!1),bt(Ke,()=>{n(5,w=!0),k()})}function h(){n(1,A=!0),U.cancel(),n(4,g=!1),bt(Ke,()=>{n(5,w=!0),ht.persist("Game over")})}function k(){let O=l.xp,ot=oi();l.fleeing()&&(O*=1-l.hp/l.maxhp,O=Math.floor(Math.min(O,ot-s.xp-1))),O&&(at(P,s.xp+=O,s),ht.persist(`Gained ${O} experience`,"enc")),s.xp>=ot&&(al(),ht.persist("Level up!","enc")),l.gp&&!l.fleeing()&&(at(P,s.gp+=l.gp,s),ht.persist(`Found ${l.gp} gold`,"enc"))}function y(){n(6,M=!0),bt(Ge,gt)}function E(){rn()}yt(()=>{es(),$=$s(l.dex,s.dex),v=qn();const O=P.subscribe(K=>{K!=null&&K.ko()&&h()}),ot=ut.subscribe(K=>{(K!=null&&K.ko()||K!=null&&K.fleeing())&&_()});return rt=bt(V($),p),U.start(v),()=>{U==null||U.cancel(),clearTimeout(rt),ot(),O(),we.set(0),at(P,s.status.fleeing=!1,s),at(ut,l=null,l)}});let $,v,g,w,M,R,A,U,rt;function Tt(O){We[O?"unshift":"push"](()=>{U=O,n(7,U)})}return e.$$.update=()=>{e.$$.dirty&15&&n(8,i=!R&&!A&&!s.fleeing()&&!(l!=null&&l.fleeing()))},[R,A,l,s,g,w,M,U,i,o,u,c,f,a,y,E,Tt]}class Ts extends tt{constructor(t){super(),J(this,t,Ss,Ms,X,{})}}function Yn(e){let t,n,i,l=e[0].innCost+"",s,o;return{c(){t=m("p"),t.textContent="Inn",n=C(),i=m("p"),s=W(l),o=W(" gold per night")},m(r,u){N(r,t,u),N(r,n,u),N(r,i,u),d(i,s),d(i,o)},p(r,u){u&1&&l!==(l=r[0].innCost+"")&&ft(s,l)},d(r){r&&j(t),r&&j(n),r&&j(i)}}}function js(e){let t,n,i,l,s,o,r,u,c,f,a,p=e[0]&&Yn(e);return{c(){t=m("div"),n=m("div"),p&&p.c(),i=C(),l=m("div"),s=m("button"),s.textContent="Rest",o=C(),r=m("button"),r.textContent="Leave",b(n,"class","view col"),b(l,"class","ctrls")},m(_,h){N(_,t,h),d(t,n),p&&p.m(n,null),d(t,i),d(t,l),d(l,s),d(l,o),d(l,r),c=!0,f||(a=[I(window,"keydown",e[1]),I(s,"click",e[2]),I(r,"click",gt)],f=!0)},p(_,[h]){_[0]?p?p.p(_,h):(p=Yn(_),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},i(_){c||(G(()=>{u||(u=lt(t,st,{},!0)),u.run(1)}),c=!0)},o(_){u||(u=lt(t,st,{},!1)),u.run(0),c=!1},d(_){_&&j(t),p&&p.d(),_&&u&&u.end(),f=!1,Z(a)}}}function xs(e,t,n){let i;Y(e,P,r=>n(3,i=r));function l(r){switch(r.key){case"q":gt();break;case"r":s();break}}function s(){i.gp>=o.innCost?(at(P,i.gp-=o.innCost,i),ll()):ht.show("Not enough gold")}yt(()=>{let r=kt.location().abs;n(0,o=Rl(r.x,r.y))});let o;return[o,l,s]}class Ns extends tt{constructor(t){super(),J(this,t,xs,js,X,{})}}function Is(e){let t,n,i,l,s;return{c(){t=m("div"),n=m("div"),i=m("div"),b(i,"class","icon moon"),dt(i,"margin-top","80px"),b(n,"class","view")},m(o,r){N(o,t,r),d(t,n),d(n,i),s=!0},p:T,i(o){s||(G(()=>{l||(l=lt(t,st,{},!0)),l.run(1)}),s=!0)},o(o){l||(l=lt(t,st,{},!1)),l.run(0),s=!1},d(o){o&&j(t),o&&l&&l.end()}}}function Rs(e,t,n){let i;return Y(e,P,l=>n(0,i=l)),yt(()=>{at(P,i.hp=i.maxhp,i),bt(2e3,gt)}),[]}class As extends tt{constructor(t){super(),J(this,t,Rs,Is,X,{})}}function Os(e){let t,n;return t=new As({}),{c(){q(t.$$.fragment)},m(i,l){D(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){F(t,i)}}}function Ls(e){let t,n;return t=new Ns({}),{c(){q(t.$$.fragment)},m(i,l){D(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){F(t,i)}}}function Ps(e){let t,n;return t=new Ts({}),{c(){q(t.$$.fragment)},m(i,l){D(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){F(t,i)}}}function Us(e){let t,n;return t=new Fl({}),{c(){q(t.$$.fragment)},m(i,l){D(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){F(t,i)}}}function Ds(e){let t,n;return t=new Pl({}),{c(){q(t.$$.fragment)},m(i,l){D(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){F(t,i)}}}function Fs(e){let t,n;return t=new Sl({}),{c(){q(t.$$.fragment)},m(i,l){D(t,i,l),n=!0},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){F(t,i)}}}function Hs(e){let t,n,i,l,s,o;n=new Je({});const r=[Fs,Ds,Us,Ps,Ls,Os],u=[];function c(f,a){return f[0]==nt.TITLE?0:f[0]==nt.MAP?1:f[0]==nt.MENU?2:f[0]==nt.ENC?3:f[0]==nt.CITY?4:f[0]==nt.SLEEP?5:-1}return~(l=c(e))&&(s=u[l]=r[l](e)),{c(){t=m("main"),q(n.$$.fragment),i=C(),s&&s.c()},m(f,a){N(f,t,a),D(n,t,null),d(t,i),~l&&u[l].m(t,null),o=!0},p(f,[a]){let p=l;l=c(f),l!==p&&(s&&(_t(),x(u[p],1,1,()=>{u[p]=null}),mt()),~l?(s=u[l],s||(s=u[l]=r[l](f),s.c()),S(s,1),s.m(t,null)):s=null)},i(f){o||(S(n.$$.fragment,f),S(s),o=!0)},o(f){x(n.$$.fragment,f),x(s),o=!1},d(f){f&&j(t),F(n),~l&&u[l].d()}}}function qs(e,t,n){let i;yt(()=>{i=St.subscribe(s=>{n(0,l=void 0),ht.clear(),bt(li,()=>{n(0,l=s)})})}),ti(i);let l;return[l]}class Bs extends tt{constructor(t){super(),J(this,t,qs,Hs,X,{})}}new Bs({target:document.getElementById("app")});
