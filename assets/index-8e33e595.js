var ls=Object.defineProperty;var ss=(t,e,n)=>e in t?ls(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var et=(t,e,n)=>(ss(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function A(){}const Ae=t=>t;function Ht(t,e){for(const n in e)t[n]=e[n];return t}function El(t){return t()}function nl(){return Object.create(null)}function ie(t){t.forEach(El)}function Qe(t){return typeof t=="function"}function J(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function is(t){return Object.keys(t).length===0}function Cl(t,...e){if(t==null)return A;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function B(t){let e;return Cl(t,n=>e=n)(),e}function Q(t,e,n){t.$$.on_destroy.push(Cl(e,n))}function rs(t,e,n,l){if(t){const s=Sl(t,e,n,l);return t[0](s)}}function Sl(t,e,n,l){return t[1]&&l?Ht(n.ctx.slice(),t[1](l(e))):n.ctx}function os(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],r=Math.max(e.dirty.length,s.length);for(let o=0;o<r;o+=1)i[o]=e.dirty[o]|s[o];return i}return e.dirty|s}return e.dirty}function cs(t,e,n,l,s,i){if(s){const r=Sl(e,n,l,i);t.p(r,s)}}function us(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function Yt(t){return t??""}function Ce(t,e,n){return t.set(n),e}const Tl=typeof window<"u";let ft=Tl?()=>window.performance.now():()=>Date.now(),Mn=Tl?t=>requestAnimationFrame(t):A;const Ke=new Set;function Il(t){Ke.forEach(e=>{e.c(t)||(Ke.delete(e),e.f())}),Ke.size!==0&&Mn(Il)}function at(t){let e;return Ke.size===0&&Mn(Il),{promise:new Promise(n=>{Ke.add(e={c:t,f:n})}),abort(){Ke.delete(e)}}}function a(t,e){t.appendChild(e)}function Nl(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function fs(t){const e=m("style");return as(Nl(t),e),e.sheet}function as(t,e){return a(t.head||t,e),e.sheet}function I(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function Ll(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function ds(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function j(t){return document.createTextNode(t)}function M(){return j(" ")}function dt(){return j("")}function P(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function ps(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _s(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ge(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function oe(t,e,n){t.classList[n?"add":"remove"](e)}function Rl(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,l,e),s}class ms{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,l=null){this.e||(this.is_svg?this.e=ds(n.nodeName):this.e=m(n.nodeName),this.t=n,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)I(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(T)}}function ll(t,e){return new t(e)}const Bt=new Map;let Gt=0;function hs(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function vs(t,e){const n={stylesheet:fs(e),rules:{}};return Bt.set(t,n),n}function it(t,e,n,l,s,i,r,o=0){const c=16.666/l;let u=`{
`;for(let b=0;b<=1;b+=c){const k=e+(n-e)*i(b);u+=b*100+`%{${r(k,1-k)}}
`}const f=u+`100% {${r(n,1-n)}}
}`,p=`__svelte_${hs(f)}_${o}`,d=Nl(t),{stylesheet:_,rules:h}=Bt.get(d)||vs(d,t);h[p]||(h[p]=!0,_.insertRule(`@keyframes ${p} ${f}`,_.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${p} ${l}ms linear ${s}ms 1 both`,Gt+=1,p}function rt(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-l.length;s&&(t.style.animation=l.join(", "),Gt-=s,Gt||gs())}function gs(){Mn(()=>{Gt||(Bt.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&T(e)}),Bt.clear())})}function bs(t,e,n,l){if(!e)return A;const s=t.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return A;const{delay:i=0,duration:r=300,easing:o=Ae,start:c=ft()+i,end:u=c+r,tick:f=A,css:p}=n(t,{from:e,to:s},l);let d=!0,_=!1,h;function v(){p&&(h=it(t,0,1,r,i,o,p)),i||(_=!0)}function b(){p&&rt(t,h),d=!1}return at(k=>{if(!_&&k>=c&&(_=!0),_&&k>=u&&(f(1,0),b()),!d)return!1;if(_){const y=k-c,$=0+1*o(y/r);f($,1-$)}return!0}),v(),f(0,1),b}function ys(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:l}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=l,Al(t,s)}}function Al(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const l=getComputedStyle(t),s=l.transform==="none"?"":l.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let ot;function st(t){ot=t}function En(){if(!ot)throw new Error("Function called outside component initialization");return ot}function we(t){En().$$.on_mount.push(t)}function Cn(t){En().$$.on_destroy.push(t)}function Ol(){const t=En();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=Rl(e,n,{cancelable:l});return s.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}const lt=[],Re=[],xt=[],sl=[],$s=Promise.resolve();let mn=!1;function ws(){mn||(mn=!0,$s.then(Pl))}function se(t){xt.push(t)}const pn=new Set;let Pt=0;function Pl(){const t=ot;do{for(;Pt<lt.length;){const e=lt[Pt];Pt++,st(e),ks(e.$$)}for(st(null),lt.length=0,Pt=0;Re.length;)Re.pop()();for(let e=0;e<xt.length;e+=1){const n=xt[e];pn.has(n)||(pn.add(n),n())}xt.length=0}while(lt.length);for(;sl.length;)sl.pop()();mn=!1,pn.clear(),st(t)}function ks(t){if(t.fragment!==null){t.update(),ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(se)}}let tt;function Sn(){return tt||(tt=Promise.resolve(),tt.then(()=>{tt=null})),tt}function Ne(t,e,n){t.dispatchEvent(Rl(`${e?"intro":"outro"}${n}`))}const Ut=new Set;let be;function ye(){be={r:0,c:[],p:be}}function $e(){be.r||ie(be.c),be=be.p}function L(t,e){t&&t.i&&(Ut.delete(t),t.i(e))}function R(t,e,n,l){if(t&&t.o){if(Ut.has(t))return;Ut.add(t),be.c.push(()=>{Ut.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const Tn={duration:0};function In(t,e,n){const l={direction:"in"};let s=e(t,n,l),i=!1,r,o,c=0;function u(){r&&rt(t,r)}function f(){const{delay:d=0,duration:_=300,easing:h=Ae,tick:v=A,css:b}=s||Tn;b&&(r=it(t,0,1,_,d,h,b,c++)),v(0,1);const k=ft()+d,y=k+_;o&&o.abort(),i=!0,se(()=>Ne(t,!0,"start")),o=at($=>{if(i){if($>=y)return v(1,0),Ne(t,!0,"end"),u(),i=!1;if($>=k){const E=h(($-k)/_);v(E,1-E)}}return i})}let p=!1;return{start(){p||(p=!0,rt(t),Qe(s)?(s=s(l),Sn().then(f)):f())},invalidate(){p=!1},end(){i&&(u(),i=!1)}}}function pt(t,e,n){const l={direction:"out"};let s=e(t,n,l),i=!0,r;const o=be;o.r+=1;function c(){const{delay:u=0,duration:f=300,easing:p=Ae,tick:d=A,css:_}=s||Tn;_&&(r=it(t,1,0,f,u,p,_));const h=ft()+u,v=h+f;se(()=>Ne(t,!1,"start")),at(b=>{if(i){if(b>=v)return d(0,1),Ne(t,!1,"end"),--o.r||ie(o.c),!1;if(b>=h){const k=p((b-h)/f);d(1-k,k)}}return i})}return Qe(s)?Sn().then(()=>{s=s(l),c()}):c(),{end(u){u&&s.tick&&s.tick(1,0),i&&(r&&rt(t,r),i=!1)}}}function pe(t,e,n,l){const s={direction:"both"};let i=e(t,n,s),r=l?0:1,o=null,c=null,u=null;function f(){u&&rt(t,u)}function p(_,h){const v=_.b-r;return h*=Math.abs(v),{a:r,b:_.b,d:v,duration:h,start:_.start,end:_.start+h,group:_.group}}function d(_){const{delay:h=0,duration:v=300,easing:b=Ae,tick:k=A,css:y}=i||Tn,$={start:ft()+h,b:_};_||($.group=be,be.r+=1),o||c?c=$:(y&&(f(),u=it(t,r,_,v,h,b,y)),_&&k(0,1),o=p($,v),se(()=>Ne(t,_,"start")),at(E=>{if(c&&E>c.start&&(o=p(c,v),c=null,Ne(t,o.b,"start"),y&&(f(),u=it(t,r,o.b,o.duration,0,b,i.css))),o){if(E>=o.end)k(r=o.b,1-r),Ne(t,o.b,"end"),c||(o.b?f():--o.group.r||ie(o.group.c)),o=null;else if(E>=o.start){const S=E-o.start;r=o.a+o.d*b(S/o.duration),k(r,1-r)}}return!!(o||c)}))}return{run(_){Qe(i)?Sn().then(()=>{i=i(s),d(_)}):d(_)},end(){f(),o=c=null}}}function Ms(t,e){R(t,1,1,()=>{e.delete(t.key)})}function Es(t,e){t.f(),Ms(t,e)}function Cs(t,e,n,l,s,i,r,o,c,u,f,p){let d=t.length,_=i.length,h=d;const v={};for(;h--;)v[t[h].key]=h;const b=[],k=new Map,y=new Map;for(h=_;h--;){const w=p(s,i,h),O=n(w);let C=r.get(O);C?l&&C.p(w,e):(C=u(O,w),C.c()),k.set(O,b[h]=C),O in v&&y.set(O,Math.abs(h-v[O]))}const $=new Set,E=new Set;function S(w){L(w,1),w.m(o,f),r.set(w.key,w),f=w.first,_--}for(;d&&_;){const w=b[_-1],O=t[d-1],C=w.key,N=O.key;w===O?(f=w.first,d--,_--):k.has(N)?!r.has(C)||$.has(C)?S(w):E.has(N)?d--:y.get(C)>y.get(N)?(E.add(C),S(w)):($.add(N),d--):(c(O,r),d--)}for(;d--;){const w=t[d];k.has(w.key)||c(w,r)}for(;_;)S(b[_-1]);return b}function Ss(t,e){const n={},l={},s={$$scope:1};let i=t.length;for(;i--;){const r=t[i],o=e[i];if(o){for(const c in r)c in o||(l[c]=1);for(const c in o)s[c]||(n[c]=o[c],s[c]=1);t[i]=o}else for(const c in r)s[c]=1}for(const r in l)r in n||(n[r]=void 0);return n}function Ts(t){return typeof t=="object"&&t!==null?t:{}}function Y(t){t&&t.c()}function F(t,e,n,l){const{fragment:s,after_update:i}=t.$$;s&&s.m(e,n),l||se(()=>{const r=t.$$.on_mount.map(El).filter(Qe);t.$$.on_destroy?t.$$.on_destroy.push(...r):ie(r),t.$$.on_mount=[]}),i.forEach(se)}function H(t,e){const n=t.$$;n.fragment!==null&&(ie(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Is(t,e){t.$$.dirty[0]===-1&&(lt.push(t),ws(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(t,e,n,l,s,i,r,o=[-1]){const c=ot;st(t);const u=t.$$={fragment:null,ctx:[],props:i,update:A,not_equal:s,bound:nl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:nl(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};r&&r(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(p,d,..._)=>{const h=_.length?_[0]:d;return u.ctx&&s(u.ctx[p],u.ctx[p]=h)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](h),f&&Is(t,p)),d}):[],u.update(),f=!0,ie(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const p=_s(e.target);u.fragment&&u.fragment.l(p),p.forEach(T)}else u.fragment&&u.fragment.c();e.intro&&L(t.$$.fragment),F(t,e.target,e.anchor,e.customElement),Pl()}st(c)}class ee{$destroy(){H(this,1),this.$destroy=A}$on(e,n){if(!Qe(n))return A;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!is(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zt=10,Ns=80,Ls=6,Rs=6,jl=20,xl=2,As=2,Ul=50,ql=1,Os=1e3,Ps=1,js=25,xs=7,Us=9,qs=3,Ds=2,_n=300,il=10,Dl=200,hn=200,vn=500,rl=200,Fs=.1,Le="enc",Jt="user",Be=[];function ce(t,e=A){let n;const l=new Set;function s(o){if(J(t,o)&&(t=o,n)){const c=!Be.length;for(const u of l)u[1](),Be.push(u,t);if(c){for(let u=0;u<Be.length;u+=2)Be[u][0](Be[u+1]);Be.length=0}}}function i(o){s(o(t))}function r(o,c=A){const u=[o,c];return l.add(u),l.size===1&&(n=e(s)||A),o(t),()=>{l.delete(u),l.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:r}}function G(t,e){return t=Math.round(t??0),e=Math.round(e??0),Math.floor(Math.random()*(t-e+1))+e}function Ee(t,e){setTimeout(e,t)}function ae(t,e){e??(e=Fs);let n=Math.ceil(Math.abs(t*e));return G(t+n,t-n)}function Ge(t){return new Intl.NumberFormat().format(t)}function Kt(t){_t(t,e=>e++)}function _t(t,e){let n=B(t);e(n),t.set(n)}function Hs(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Xt(t){const e=t-1;return e*e*e+1}function Ys(t,{delay:e=0,duration:n=400,easing:l=Hs,amount:s=5,opacity:i=0}={}){const r=getComputedStyle(t),o=+r.opacity,c=r.filter==="none"?"":r.filter,u=o*(1-i);return{delay:e,duration:n,easing:l,css:(f,p)=>`opacity: ${o-u*p}; filter: ${c} blur(${p*s}px);`}}function Zt(t,{delay:e=0,duration:n=400,easing:l=Ae}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:l,css:i=>`opacity: ${i*s}`}}function en(t,{delay:e=0,duration:n=400,easing:l=Xt,x:s=0,y:i=0,opacity:r=0}={}){const o=getComputedStyle(t),c=+o.opacity,u=o.transform==="none"?"":o.transform,f=c*(1-r);return{delay:e,duration:n,easing:l,css:(p,d)=>`
			transform: ${u} translate(${(1-p)*s}px, ${(1-p)*i}px);
			opacity: ${c-f*d}`}}const re={TITLE:0,MAP:1,MENU:2,ENC:3,CITY:4,SLEEP:5},Te=ce(re.TITLE);function Se(){Te.set(re.MAP)}function Fl(){Te.set(re.MENU)}function Bs(){Te.set(re.ENC)}function Nn(){Te.set(re.TITLE)}function Hl(){Te.set(re.CITY)}function Gs(){Te.set(re.SLEEP)}function _e(t){return Zt(t,{duration:Dl})}class tn{constructor(e,n,l,s,i,r,o){et(this,"evading",()=>this.status.evading);et(this,"fleeing",()=>this.status.fleeing);et(this,"ko",()=>this.hp<=0);this.name=e,this.lvl=n,this.hpbase=l,this.strbase=s,this.dexbase=i,this.hp=l,this.str=s,this.dex=i,this.xp=r,this.gp=o,this.status={evading:!1,fleeing:!1}}}function mt(t,e,n){t??(t=10),e=Math.max(e??1,1),n=Math.max(n??1,1);let l=Math.round(t*e/(e+n)),s=Math.round(t*n/(e+n)),i=Math.min(Math.max(l-s,0),l-1),r=Math.min(Math.max(s-l,0),s-1),o=G(l,i);t-=o;let c=G(s,r);return t-=c,{hp:Math.max(t,0),str:o,dex:c}}let jt;const Ks=new Uint8Array(16);function Xs(){if(!jt&&(jt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!jt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jt(Ks)}const V=[];for(let t=0;t<256;++t)V.push((t+256).toString(16).slice(1));function Vs(t,e=0){return(V[t[e+0]]+V[t[e+1]]+V[t[e+2]]+V[t[e+3]]+"-"+V[t[e+4]]+V[t[e+5]]+"-"+V[t[e+6]]+V[t[e+7]]+"-"+V[t[e+8]]+V[t[e+9]]+"-"+V[t[e+10]]+V[t[e+11]]+V[t[e+12]]+V[t[e+13]]+V[t[e+14]]+V[t[e+15]]).toLowerCase()}const Ws=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ol={randomUUID:Ws};function Qs(t,e,n){if(ol.randomUUID&&!e&&!t)return ol.randomUUID();t=t||{};const l=t.random||(t.rng||Xs)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=l[s];return e}return Vs(l)}function zs(){let t="user",e=1;var n=mt();let l=n.hp+Ns,s=n.str+Ls,i=n.dex+Rs,r=0,o=0;return new tn(t,e,l,s,i,o,r)}function Ln(t){return t??(t=B(x)),Math.pow(t.lvl,3)+t.lvl*200-1}function Js(){let t=B(x),e=B(Vt),n=B(Wt);for(;t.xp>Ln(t);){t.lvl++;let l=Math.round(zt/2),s=mt(l,e,n);t.hpbase+=s.hp+l,t.strbase=Math.max(t.strbase+s.str,1),t.dexbase=Math.max(t.dexbase+s.dex,1),e=void 0,n=void 0}t.hp=t.hpbase,t.str=t.strbase,t.dex=t.dexbase,x.set(t),Vt.set(0),Wt.set(0)}function Zs(){let t=zs();console.log(JSON.stringify(t)),x.set(t),Vt.set(0),Wt.set(0),Yl.set(0)}const Vt=ce(0),Wt=ce(0),Yl=ce(0),x=ce();let D,ne,le,nn,ln,Xe=!0,Rn=Us,cl=qs,gn=0,An=0;const ei="u",On="f",qt="p",Pn="t",Bl="w",Dt="c";function Gl(t,e,n){t=Math.max(t,1),D=Xe?[]:D??[];let l=e??Math.floor(t/2),s=n??Math.floor(t/2);ne=l,le=s,Xe&&(nn=ne,ln=le,gn=0,An=0),bn(l,s,he.CITY);for(let i=1;i<t;i++){let r=i%2==0?i:-i;l+=r,s+=r,bn(l,s)}D=Kl(!0,t,e,n)}function ti(t,e,n,l){if(!t)return t;l??(l=Rn);let s=Math.floor(l/2);e??(e=s),n??(n=s);let i=[];for(let r=0;r<l;r++)for(let o=0;o<l;o++){let c=e-s+r,u=n-s+o,f=(t[c]&&t[c][u])??On;i[r]??(i[r]=[]),i[r][o]=f}return i[s][s]=ei,i}function ni(){let t=Vl();if(ne<t&&(D.splice(0,0,[]),nn++,ne=t),le<t){let e=Wl();for(let n=0;n<e;n++)D[n].splice(0,0,void 0);ln++,le=t}}function li(t){return[...t.map(e=>[...e])]}function Kl(t,e,n,l){var p;if(!D)return D;e=e??Rn,n=n??ne,l=l??le;let s=li(D),i=Wl(),r=si(),o=Math.min(e??i,i),c=Math.min(e??r,r),u=Math.max((n??0)-Math.floor(o/2),0),f=Math.max((l??0)-Math.floor(c/2),0);for(let d=0;d<o;d++)for(let _=0;_<c;_++){let h=u+d,v=f+_;s[h]??(s[h]=[]);let b=t?sn(h,v):On;(p=s[h])[v]??(p[v]=b)}return s}function bn(t,e,n){var l;return t??(t=ne),e??(e=le),D??(D=[]),D[t]??(D[t]=[]),(l=D[t])[e]??(l[e]=n??sn(t,e)),n}function sn(t,e){if(t??(t=ne),e??(e=le),D&&D[t]&&D[t][e])return D[t][e];let n,l=G(_n*2,_n);if(l<gn++&&l%_n==0)n=Dt,gn=0;else{let s=Xl(t,e);s=s.filter(r=>r!==Dt);let i=G(s.length+1);if(i>=s.length){let r=[qt,Pn];i=G(r.length+Ds),n=i>=r.length?qt:r[i]}else n=s[i]}return Xe&&(n==Dt||n==Bl)&&(n=qt),Xe||An++,n}function Xl(t,e){t??(t=ne),e??(e=le);let n=[];for(let l=t-1;l<=t+1;l++)for(let s=e-1;s<=e+1;s++)D[l]&&D[l][s]&&D[l][s]&&n.push(D[l][s]);return n}function Vl(){return sn()==Pn?Math.floor(cl/2):cl}function Wl(t){return t??(t=D??[]),t.length}function si(t){t??(t=D??[]);let e=t.map(n=>n.length).sort((n,l)=>n-l);return e[e.length-1]}function ii(t){if(ne+=t.x,le+=t.y,ni(),bn()==Bl)return ne-=t.x,le-=t.y,!1;{let n=Vl();n>0&&Gl(n*2+1,ne,le)}return!0}function ri(){let t=Kl(!1);return ti(t,ne,le,Rn)}function oi(){let t=Math.abs(ne-nn),e=Math.abs(le-ln);return Math.ceil(Math.hypot(t,e))}function ci(){return An}function ui(){return{x:ne,y:le,abs:{x:ne-nn,y:le-ln},terrain:sn(),nearby:Xl(),distance:oi()}}function fi(){Xe=!0,Gl(xs),Xe=!1}const he={FOG:On,PLAIN:qt,FOREST:Pn,CITY:Dt},ct=ce(0),ve={miniMap:ri,location:ui,move:ii,getExplored:ci};function ai(t){let e,n,l,s,i,r,o,c,u,f,p,d;return{c(){e=m("div"),n=m("div"),l=m("h1"),l.textContent="Relic",s=M(),i=m("p"),i.textContent="by elyktc",r=M(),o=m("div"),c=m("button"),c.textContent="Start",g(l,"class","svelte-19wnq64"),ge(l,"margin-right","50px"),ge(i,"margin-left","100px"),g(n,"class","view col svelte-19wnq64"),g(o,"class","ctrls")},m(_,h){I(_,e,h),a(e,n),a(n,l),a(n,s),a(n,i),a(e,r),a(e,o),a(o,c),f=!0,p||(d=[P(window,"keydown",t[0]),P(c,"click",Se)],p=!0)},p:A,i(_){f||(se(()=>{u||(u=pe(e,_e,{},!0)),u.run(1)}),f=!0)},o(_){u||(u=pe(e,_e,{},!1)),u.run(0),f=!1},d(_){_&&T(e),_&&u&&u.end(),p=!1,ie(d)}}}function di(t,e,n){let l;Q(t,ct,i=>n(1,l=i));function s(i){switch(i.key){case" ":Se();break}}return we(()=>{Zs(),Ce(ct,l=0,l)}),[s]}class pi extends ee{constructor(e){super(),Z(this,e,di,ai,J,{})}}function _i(t){let e,n,l,s,i,r,o,c,u,f,p,d,_,h,v,b,k,y,$,E,S,w,O;return{c(){e=m("div"),n=m("div"),l=m("button"),l.textContent="NW",s=M(),i=m("button"),i.textContent="N",r=M(),o=m("button"),o.textContent="NE",c=M(),u=m("div"),f=m("button"),f.textContent="W",p=M(),d=m("button"),d.textContent="Menu",_=M(),h=m("button"),h.textContent="E",v=M(),b=m("div"),k=m("button"),k.textContent="SW",y=M(),$=m("button"),$.textContent="S",E=M(),S=m("button"),S.textContent="SE",g(n,"class","row"),g(u,"class","row"),g(b,"class","row"),g(e,"class","ctrls")},m(C,N){I(C,e,N),a(e,n),a(n,l),a(n,s),a(n,i),a(n,r),a(n,o),a(e,c),a(e,u),a(u,f),a(u,p),a(u,d),a(u,_),a(u,h),a(e,v),a(e,b),a(b,k),a(b,y),a(b,$),a(b,E),a(b,S),w||(O=[P(window,"keydown",t[8]),P(l,"click",t[0]),P(i,"click",t[1]),P(o,"click",t[2]),P(f,"click",t[3]),P(d,"click",Fl),P(h,"click",t[4]),P(k,"click",t[5]),P($,"click",t[6]),P(S,"click",t[7])],w=!0)},p:A,i:A,o:A,d(C){C&&T(e),w=!1,ie(O)}}}function mi(t){const e=Ol(),n=()=>e("move",{x:-1,y:-1}),l=()=>e("move",{x:-1,y:0}),s=()=>e("move",{x:-1,y:1}),i=()=>e("move",{x:0,y:-1}),r=()=>e("move",{x:0,y:1}),o=()=>e("move",{x:1,y:-1}),c=()=>e("move",{x:1,y:0}),u=()=>e("move",{x:1,y:1});function f(p){switch(p.key){case"x":Fl();break;case"q":n();break;case"w":l();break;case"e":s();break;case"a":i();break;case"d":r();break;case"z":o();break;case"s":c();break;case"c":u();break}}return[n,l,s,i,r,o,c,u,f]}class hi extends ee{constructor(e){super(),Z(this,e,mi,_i,J,{})}}function vi(t,{from:e,to:n},l={}){const s=getComputedStyle(t),i=s.transform==="none"?"":s.transform,[r,o]=s.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*r/n.width-(n.left+r),u=e.top+e.height*o/n.height-(n.top+o),{delay:f=0,duration:p=_=>Math.sqrt(_)*120,easing:d=Xt}=l;return{delay:f,duration:Qe(p)?p(Math.sqrt(c*c+u*u)):p,easing:d,css:(_,h)=>{const v=h*c,b=h*u,k=_+h*e.width/n.width,y=_+h*e.height/n.height;return`transform: ${i} translate(${v}px, ${b}px) scale(${k}, ${y});`}}}const gi={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},bi=()=>{const{subscribe:t,update:e}=ce([]);let n=0;const l={},s=u=>u instanceof Object;return{subscribe:t,push:(u,f={})=>{const p={target:"default",...s(u)?u:{...f,msg:u}},d=l[p.target]||{},_={...gi,...d,...p,theme:{...d.theme,...p.theme},classes:[...d.classes||[],...p.classes||[]],id:++n};return e(h=>_.reversed?[...h,_]:[_,...h]),n},pop:u=>{e(f=>{if(!f.length||u===0)return[];if(s(u))return f.filter(d=>u(d));const p=u||Math.max(...f.map(d=>d.id));return f.filter(d=>d.id!==p)})},set:(u,f={})=>{const p=s(u)?{...u}:{...f,id:u};e(d=>{const _=d.findIndex(h=>h.id===p.id);return _>-1&&(d[_]={...d[_],...p}),d})},_init:(u="default",f={})=>(l[u]=f,l)}},Ve=bi();function ul(t){return Object.prototype.toString.call(t)==="[object Date]"}function yn(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((s,i)=>yn(t[i],s));return s=>l.map(i=>i(s))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(ul(t)&&ul(e)){t=t.getTime(),e=e.getTime();const i=e-t;return r=>new Date(t+r*i)}const l=Object.keys(e),s={};return l.forEach(i=>{s[i]=yn(t[i],e[i])}),i=>{const r={};return l.forEach(o=>{r[o]=s[o](i)}),r}}if(n==="number"){const l=e-t;return s=>t+s*l}throw new Error(`Cannot interpolate ${n} values`)}function $n(t,e={}){const n=ce(t);let l,s=t;function i(r,o){if(t==null)return n.set(t=r),Promise.resolve();s=r;let c=l,u=!1,{delay:f=0,duration:p=400,easing:d=Ae,interpolate:_=yn}=Ht(Ht({},e),o);if(p===0)return c&&(c.abort(),c=null),n.set(t=s),Promise.resolve();const h=ft()+f;let v;return l=at(b=>{if(b<h)return!0;u||(v=_(t,r),typeof p=="function"&&(p=p(t,r)),u=!0),c&&(c.abort(),c=null);const k=b-h;return k>p?(n.set(t=r),!1):(n.set(t=v(d(k/p))),!0)}),l.promise}return{set:i,update:(r,o)=>i(r(s,t),o),subscribe:n.subscribe}}function yi(t){let e,n=t[0].msg+"",l;return{c(){e=new ms(!1),l=dt(),e.a=l},m(s,i){e.m(n,s,i),I(s,l,i)},p(s,i){i&1&&n!==(n=s[0].msg+"")&&e.p(n)},i:A,o:A,d(s){s&&T(l),s&&e.d()}}}function $i(t){let e,n,l;const s=[t[2]];var i=t[0].component.src;function r(o){let c={};for(let u=0;u<s.length;u+=1)c=Ht(c,s[u]);return{props:c}}return i&&(e=ll(i,r())),{c(){e&&Y(e.$$.fragment),n=dt()},m(o,c){e&&F(e,o,c),I(o,n,c),l=!0},p(o,c){const u=c&4?Ss(s,[Ts(o[2])]):{};if(i!==(i=o[0].component.src)){if(e){ye();const f=e;R(f.$$.fragment,1,0,()=>{H(f,1)}),$e()}i?(e=ll(i,r()),Y(e.$$.fragment),L(e.$$.fragment,1),F(e,n.parentNode,n)):e=null}else i&&e.$set(u)},i(o){l||(e&&L(e.$$.fragment,o),l=!0)},o(o){e&&R(e.$$.fragment,o),l=!1},d(o){o&&T(n),e&&H(e,o)}}}function fl(t){let e,n,l;return{c(){e=m("div"),g(e,"class","_toastBtn pe svelte-l65oht"),g(e,"role","button"),g(e,"tabindex","0")},m(s,i){I(s,e,i),n||(l=[P(e,"click",t[4]),P(e,"keydown",t[8])],n=!0)},p:A,d(s){s&&T(e),n=!1,ie(l)}}}function wi(t){let e,n,l,s,i,r,o,c,u,f;const p=[$i,yi],d=[];function _(v,b){return v[0].component?0:1}l=_(t),s=d[l]=p[l](t);let h=t[0].dismissable&&fl(t);return{c(){e=m("div"),n=m("div"),s.c(),i=M(),h&&h.c(),r=M(),o=m("progress"),g(n,"role","status"),g(n,"class","_toastMsg svelte-l65oht"),oe(n,"pe",t[0].component),g(o,"class","_toastBar svelte-l65oht"),o.value=t[1],g(e,"class","_toastItem svelte-l65oht"),oe(e,"pe",t[0].pausable)},m(v,b){I(v,e,b),a(e,n),d[l].m(n,null),a(e,i),h&&h.m(e,null),a(e,r),a(e,o),c=!0,u||(f=[P(e,"mouseenter",t[9]),P(e,"mouseleave",t[6])],u=!0)},p(v,[b]){let k=l;l=_(v),l===k?d[l].p(v,b):(ye(),R(d[k],1,1,()=>{d[k]=null}),$e(),s=d[l],s?s.p(v,b):(s=d[l]=p[l](v),s.c()),L(s,1),s.m(n,null)),(!c||b&1)&&oe(n,"pe",v[0].component),v[0].dismissable?h?h.p(v,b):(h=fl(v),h.c(),h.m(e,r)):h&&(h.d(1),h=null),(!c||b&2)&&(o.value=v[1]),(!c||b&1)&&oe(e,"pe",v[0].pausable)},i(v){c||(L(s),c=!0)},o(v){R(s),c=!1},d(v){v&&T(e),d[l].d(),h&&h.d(),u=!1,ie(f)}}}function ki(t,e,n){let l,{item:s}=e;const i=$n(s.initial,{duration:s.duration,easing:Ae});Q(t,i,$=>n(1,l=$));const r=()=>Ve.pop(s.id),o=()=>{(l===1||l===0)&&r()};let c=s.initial,u=c,f=!1;const p=()=>{!f&&l!==c&&(i.set(l,{duration:0}),f=!0)},d=()=>{if(f){const $=s.duration,E=$-$*((l-u)/(c-u));i.set(c,{duration:E}).then(o),f=!1}};let _={};const h=($,E="undefined")=>typeof $===E;let v;we(($=document)=>{if(h($.hidden))return;const E=()=>$.hidden?p():d(),S="visibilitychange";$.addEventListener(S,E),v=()=>$.removeEventListener(S,E),E()}),Cn(()=>{h(s.onpop,"function")&&s.onpop(s.id),v&&v()});const k=$=>{$ instanceof KeyboardEvent&&["Enter"," "].includes($.key)&&r()},y=()=>{s.pausable&&p()};return t.$$set=$=>{"item"in $&&n(0,s=$.item)},t.$$.update=()=>{if(t.$$.dirty&1&&(h(s.progress)||n(0,s.next=s.progress,s)),t.$$.dirty&131&&c!==s.next&&(n(7,c=s.next),u=l,f=!1,i.set(c).then(o)),t.$$.dirty&1&&s.component){const{props:$={},sendIdTo:E}=s.component;n(2,_={...$,...E&&{[E]:s.id}})}},[s,l,_,i,r,p,d,c,k,y]}class Mi extends ee{constructor(e){super(),Z(this,e,ki,wi,J,{item:0})}}function al(t,e,n){const l=t.slice();return l[5]=e[n],l}function dl(t,e){let n,l,s,i,r,o,c,u,f=A,p;return l=new Mi({props:{item:e[5]}}),{key:t,first:null,c(){n=m("li"),Y(l.$$.fragment),s=M(),g(n,"class",i=Yt(e[5].classes.join(" "))+" svelte-yh90az"),g(n,"style",r=e[1](e[5].theme)),this.first=n},m(d,_){I(d,n,_),F(l,n,null),a(n,s),p=!0},p(d,_){e=d;const h={};_&1&&(h.item=e[5]),l.$set(h),(!p||_&1&&i!==(i=Yt(e[5].classes.join(" "))+" svelte-yh90az"))&&g(n,"class",i),(!p||_&1&&r!==(r=e[1](e[5].theme)))&&g(n,"style",r)},r(){u=n.getBoundingClientRect()},f(){ys(n),f(),Al(n,u)},a(){f(),f=bs(n,u,vi,{duration:200})},i(d){p||(L(l.$$.fragment,d),se(()=>{c&&c.end(1),o=In(n,en,e[5].intro),o.start()}),p=!0)},o(d){R(l.$$.fragment,d),o&&o.invalidate(),c=pt(n,Zt,{}),p=!1},d(d){d&&T(n),H(l),d&&c&&c.end()}}}function Ei(t){let e,n=[],l=new Map,s,i=t[0];const r=o=>o[5].id;for(let o=0;o<i.length;o+=1){let c=al(t,i,o),u=r(c);l.set(u,n[o]=dl(u,c))}return{c(){e=m("ul");for(let o=0;o<n.length;o+=1)n[o].c();g(e,"class","_toastContainer svelte-yh90az")},m(o,c){I(o,e,c);for(let u=0;u<n.length;u+=1)n[u].m(e,null);s=!0},p(o,[c]){if(c&3){i=o[0],ye();for(let u=0;u<n.length;u+=1)n[u].r();n=Cs(n,c,r,1,o,i,l,e,Es,dl,null,al);for(let u=0;u<n.length;u+=1)n[u].a();$e()}},i(o){if(!s){for(let c=0;c<i.length;c+=1)L(n[c]);s=!0}},o(o){for(let c=0;c<n.length;c+=1)R(n[c]);s=!1},d(o){o&&T(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function Ci(t,e,n){let l;Q(t,Ve,c=>n(4,l=c));let{options:s={}}=e,{target:i="default"}=e,r;const o=c=>Object.keys(c).reduce((u,f)=>`${u}${f}:${c[f]};`,"");return t.$$set=c=>{"options"in c&&n(2,s=c.options),"target"in c&&n(3,i=c.target)},t.$$.update=()=>{t.$$.dirty&12&&Ve._init(i,s),t.$$.dirty&24&&n(0,r=l.filter(c=>c.target===i))},[r,o,s,i,l]}class Si extends ee{constructor(e){super(),Z(this,e,Ci,Ei,J,{options:2,target:3})}}function Ti(t,e=void 0,n=!1){let l=e?{target:e}:void 0;n&&(l??(l=l),l.theme={"--toastColor":"green"}),Ve.push(t,l)}function Ii(t,e=void 0){let n={initial:0,next:0};e&&(n.target=e),Ve.push(t,n)}function Ni(){Ve.pop(0)}const me={show:Ti,persist:Ii,clear:Ni};function Li(t,e){let n=t.dex/Math.max(t.dex+e.dex,1);if(e.evading()&&(n=n/2),n=Math.ceil(n*100),G(100)*Ps<n)return ae(t.str)}function Ql(t,e,n,l){let s=B(t),i=B(e),r=Li(s,i);if(r)i.hp-=r,i.evading()&&(i.status.evading=!1),e.set(i);else if(r===void 0&&i.evading()){let o=ae(Math.max(Math.floor(i.str/2),1));s.hp-=o,t.set(s),me.show(_l(o),n)}return me.show(_l(r),l),r}function jn(){let t=Ql(z,x,Le,Jt);return t?Qt.set(0):t===void 0&&(Kt(Qt),B(x).evading()&&Kt(Wt)),t}function Ri(){let t=B(x);t.evading()&&(t.status.evading=!1,x.set(t)),Ql(x,z,Jt,Le)&&(Kt(Vt),B(z).ko()&&Kt(Yl))}function Ai(){_t(x,t=>t.status.evading=!0)}function Oi(){let t=B(x);t.status.fleeing=!0;var e=G(Math.floor(t.gp/2));t.gp-=e,e&&me.show(`Dropped ${e} gold`),x.set(t)}function Pi(t,e){return Math.ceil(e/Math.max(t,1)*1e3*ql)}function pl(){return Os*ql}function ji(){let t=B(x),e=B(z),n=e.xp,l=Ln();e.fleeing()&&(n*=1-e.hp/e.hpbase,n=Math.floor(Math.min(n,l-t.xp-1))),n=Math.ceil(n*e.lvl/t.lvl),n&&(t.xp+=n,me.persist(`Gained ${n} experience`,Le)),e.gp&&!e.fleeing()&&(t.gp+=e.gp,me.persist(`Found ${e.gp} gold`,Le)),x.set(t),t.xp>=l&&(Js(),me.persist("Level up!",Le))}const _l=t=>t===void 0?"Miss":`${t}`;function xi(t){let e="enc",n=mt(zt*t),l=n.hp+jl*3,s=n.str+xl*2,i=Math.ceil(n.dex/2),r=G(Ul*5),o=Math.ceil(ae(l+s+i)/2);z.set(new tn(e,t,l,s,i,o,r)),We.set(Ui),rn.set("dragon")}function Ui(){jn()}function qi(){if(G(1)==1)return;let t=B(z);G(1)==1?(t.status.fleeing=!0,z.set(t)):jn()}function zl(t){let e="enc",n=mt(zt/2*t),l=n.hp+1,s=n.str+1,i=n.dex+1,r=0,o=Math.ceil(ae(l+s+i)/2);z.set(new tn(e,t,l,s,i,o,r)),We.set(void 0),rn.set("rat")}function Di(){let t=G(100),e=ve.location(),n=ae(e.distance,.1)/ae(50,.25);n=Math.ceil(Math.max(n,1));let l=Bi.filter(s=>t<s.freq&&n>=s.minLvl&&n<=s.maxLvl&&s.at(e.terrain,e.nearby));l.length?l[G(l.length-1)].init(n):zl(n),console.log(JSON.stringify(B(z))),B(We)||We.set(Jl),Qt.set(0)}const rn=ce(),We=ce(),Qt=ce(0),z=ce();function xn(t,e,n){let l="enc",s=mt(zt*t),i=s.hp+jl,r=s.str+xl,o=s.dex+As,c=G(Ul),u=Math.ceil(ae(i+r+o)/2);z.set(new tn(l,t,i,r,o,u,c)),We.set(n??Jl),rn.set(e[G(e.length-1)])}function Jl(){B(Qt)>3&&G(1)==1?_t(z,t=>t.status.fleeing=!0):jn()}let nt=class{constructor(e,n,l,s,i,r){et(this,"at",(e,n)=>this.terrains.includes(e)||this.near.filter(l=>n.includes(l)).length);this.init=e,this.freq=n,this.minLvl=l,this.maxLvl=s,this.terrains=i,this.near=r??[]}},Fi=t=>xn(t,["wolf","boar"]),Hi=t=>xn(t,["fencer"]),Yi=t=>xn(t,["ghost"],qi);const Bi=[new nt(zl,100,1,1,[he.PLAIN]),new nt(Fi,100,1,100,[he.PLAIN,he.FOREST]),new nt(Hi,100,1,100,[],[he.CITY]),new nt(Yi,50,2,100,[he.FOREST]),new nt(xi,20,3,100,[he.PLAIN,he.FOREST])];class wn{constructor(e,n,l,s){this.name=e,this.effect=n,this.value=l,this.freq=s}}const Gi=[new wn("Potion",Ki,50,100),new wn("Grenade",Xi,100,50)];function Ki(){let t=ae(50);_t(x,e=>e.hp=Math.min(e.hp+t,e.hpbase)),Zl&&me.show(t,Jt,!0)}function Xi(){let t=ae(50);Zl&&(_t(z,e=>e.hp-=t),me.show(t,Le))}let Zl=()=>B(Te)===re.ENC,Ft=new Map,Vi=class{constructor(e,n,l){this.name=e,this.innCost=n,this.items=l}};function Wi(){let t=Qs().substring(0,8),e=Math.random()+.5,n=ve.location().distance,l=ae(js*e*Math.max(Math.ceil(n/100),1)),s=G(100),i=Gi.filter(r=>s<r.freq).map(r=>new wn(r.name,r.effect,ae(r.value*e)));return new Vi(t,l,i)}function Qi(t,e){let n=`${t}.${e}`;return Ft.has(n)||Ft.set(n,Wi()),Ft.get(n)}function zi(){Ft.clear()}function Ji(t){let e,n,l,s,i,r;return s=new hi({}),s.$on("move",t[2]),{c(){e=m("div"),n=m("div"),l=M(),Y(s.$$.fragment),g(n,"class","view field svelte-z27jc")},m(o,c){I(o,e,c),a(e,n),n.innerHTML=t[0],a(e,l),F(s,e,null),r=!0},p(o,[c]){(!r||c&1)&&(n.innerHTML=o[0])},i(o){r||(L(s.$$.fragment,o),se(()=>{i||(i=pe(e,_e,{},!0)),i.run(1)}),r=!0)},o(o){R(s.$$.fragment,o),i||(i=pe(e,_e,{},!1)),i.run(0),r=!1},d(o){o&&T(e),H(s),o&&i&&i.end()}}}function Zi(t,e,n){let l;Q(t,ct,f=>n(4,l=f));function s(f){let p=_=>_.map(h=>`<div class="icon map-${h}"></div>`),d=f.map(_=>p(_).join(""));n(0,o=`<div class="row">${d.join('</div><div class="row">')}</div>`)}function i(){return ve.location().terrain==he.FOREST?Math.ceil(il/2):il}function r(f){c&&ve.move(f)&&(Ce(ct,l++,l),s(ve.miniMap()),ve.location().terrain==he.CITY?(c=!1,Hl()):G(i())==1&&(c=!1,Bs()))}we(()=>{l||(fi(),zi()),c=!0,s(ve.miniMap())});let o="",c;return[o,r,f=>r(f.detail)]}let er=class extends ee{constructor(e){super(),Z(this,e,Zi,Ji,J,{})}};function tr(t){let e,n,l,s,i,r;const o=t[5].default,c=rs(o,t,t[4],null);return{c(){e=m("div"),n=m("div"),l=m("div"),c&&c.c(),g(l,"id","modal-content"),g(l,"class","svelte-1qbiubg"),g(n,"id","modal"),g(n,"class","svelte-1qbiubg"),g(e,"id","topModal"),g(e,"class","svelte-1qbiubg"),oe(e,"visible",t[2])},m(u,f){I(u,e,f),a(e,n),a(n,l),c&&c.m(l,null),t[6](e),s=!0,i||(r=[P(n,"click",ps(nr)),P(e,"click",t[7])],i=!0)},p(u,[f]){c&&c.p&&(!s||f&16)&&cs(c,o,u,u[4],s?os(o,u[4],f,null):us(u[4]),null),(!s||f&4)&&oe(e,"visible",u[2])},i(u){s||(L(c,u),s=!0)},o(u){R(c,u),s=!1},d(u){u&&T(e),c&&c.d(u),t[6](null),i=!1,ie(r)}}}const nr=()=>{};function lr(t,e,n){let{$$slots:l={},$$scope:s}=e,i,r=!1;function o(d){d.key=="Escape"&&u()}function c(){r||(window.addEventListener("keydown",o),document.body.style.overflow="hidden",n(2,r=!0),document.body.appendChild(i))}function u(){r&&(window.removeEventListener("keydown",o),document.body.style.overflow="",n(2,r=!1))}Cn(()=>{window.removeEventListener("keydown",o)});function f(d){Re[d?"unshift":"push"](()=>{i=d,n(1,i)})}const p=()=>u();return t.$$set=d=>{"$$scope"in d&&n(4,s=d.$$scope)},[u,i,r,c,s,l,f,p]}class Un extends ee{constructor(e){super(),Z(this,e,lr,tr,J,{open:3,close:0})}get open(){return this.$$.ctx[3]}get close(){return this.$$.ctx[0]}}let ut=ce([]),qn=ce();function sr(t){let e=B(ut),n=e.find(l=>l.name===t.name);n?n.qty++:e.push(new rr(t.name,t.effect,1)),ut.set(e)}function ir(t){let e=B(ut),n=e.findIndex(l=>l.name===t.name);n>-1&&(e[n].qty>1?e[n].qty--:e.splice(n,1),ut.set(e))}function es(t){t.effect&&(t.effect(),ir(t))}class rr{constructor(e,n,l){this.name=e,this.effect=n,this.qty=l}}function ml(t,e,n){const l=t.slice();return l[2]=e[n],l}function or(t){let e;return{c(){e=m("p"),e.textContent="You have nothing"},m(n,l){I(n,e,l)},p:A,d(n){n&&T(e)}}}function cr(t){let e,n,l,s=t[0],i=[];for(let r=0;r<s.length;r+=1)i[r]=hl(ml(t,s,r));return{c(){e=m("div"),e.innerHTML='<span class="svelte-1shtgsd">Name</span><span class="svelte-1shtgsd">Quantity</span>',n=M();for(let r=0;r<i.length;r+=1)i[r].c();l=dt(),g(e,"class","header row spaced svelte-1shtgsd")},m(r,o){I(r,e,o),I(r,n,o);for(let c=0;c<i.length;c+=1)i[c].m(r,o);I(r,l,o)},p(r,o){if(o&1){s=r[0];let c;for(c=0;c<s.length;c+=1){const u=ml(r,s,c);i[c]?i[c].p(u,o):(i[c]=hl(u),i[c].c(),i[c].m(l.parentNode,l))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(r){r&&T(e),r&&T(n),Ll(i,r),r&&T(l)}}}function hl(t){let e,n,l=t[2].name+"",s,i,r=t[2].qty+"",o,c,u,f;function p(){return t[1](t[2])}return{c(){e=m("button"),n=m("span"),s=j(l),i=m("span"),o=j(r),c=M(),g(e,"class","row spaced svelte-1shtgsd")},m(d,_){I(d,e,_),a(e,n),a(n,s),a(e,i),a(i,o),a(e,c),u||(f=P(e,"click",p),u=!0)},p(d,_){t=d,_&1&&l!==(l=t[2].name+"")&&W(s,l),_&1&&r!==(r=t[2].qty+"")&&W(o,r)},d(d){d&&T(e),u=!1,f()}}}function ur(t){let e;function n(i,r){var o;return(o=i[0])!=null&&o.length?cr:or}let l=n(t),s=l(t);return{c(){e=m("div"),s.c(),g(e,"class","col")},m(i,r){I(i,e,r),s.m(e,null)},p(i,[r]){l===(l=n(i))&&s?s.p(i,r):(s.d(1),s=l(i),s&&(s.c(),s.m(e,null)))},i:A,o:A,d(i){i&&T(e),s.d()}}}function fr(t,e,n){let l;return we(()=>{const i=ut.subscribe(r=>n(0,l=r));return()=>{i()}}),[l,i=>qn.set(i)]}class ts extends ee{constructor(e){super(),Z(this,e,fr,ur,J,{})}}function ar(t){let e,n;return e=new ts({}),{c(){Y(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function dr(t){let e,n,l,s=t[1].name+"",i,r,o,c,u,f,p=t[1].lvl+"",d,_,h,v,b,k,y=t[1].xp+"",$,E,S,w,O,C,N,U,X,Oe,de,Pe=t[1].hp+"",ze,K,je=t[1].hpbase+"",Je,ue,xe,ht,Dn,vt,gt=t[1].str+"",on,Fn,Ue,bt,Hn,yt,$t=t[1].dex+"",cn,Yn,Ie,wt,Bn,kt,Mt=Ge(t[1].gp)+"",un,Gn,qe,Et,Kn,Ct,St=Ge(t[2])+"",fn,Xn,De,Tt,Vn,It,Wn,Fe,Nt,Qn,Lt,zn,He,Rt,At,Jn,Ye,Ze,Zn,Ot,ke,an,Me,fe,dn,el,ns={$$slots:{default:[ar]},$$scope:{ctx:t}};return Me=new Un({props:ns}),t[5](Me),{c(){e=m("div"),n=m("div"),l=m("h1"),i=j(s),r=M(),o=m("div"),c=m("div"),c.textContent="Level",u=M(),f=m("div"),d=j(p),_=M(),h=m("div"),v=m("div"),v.textContent="Experience",b=M(),k=m("div"),$=j(y),E=M(),S=m("div"),w=m("div"),w.textContent="Next level at",O=M(),C=m("div"),C.textContent=`${Ln()}`,N=M(),U=m("div"),X=m("div"),X.textContent="Health",Oe=M(),de=m("div"),ze=j(Pe),K=j(" / "),Je=j(je),ue=M(),xe=m("div"),ht=m("div"),ht.textContent="Strength",Dn=M(),vt=m("div"),on=j(gt),Fn=M(),Ue=m("div"),bt=m("div"),bt.textContent="Dexterity",Hn=M(),yt=m("div"),cn=j($t),Yn=M(),Ie=m("div"),wt=m("div"),wt.textContent="Gold",Bn=M(),kt=m("div"),un=j(Mt),Gn=M(),qe=m("div"),Et=m("div"),Et.textContent="Steps",Kn=M(),Ct=m("div"),fn=j(St),Xn=M(),De=m("div"),Tt=m("div"),Tt.textContent="Explored",Vn=M(),It=m("div"),It.textContent=`${Ge(ve.getExplored())}`,Wn=M(),Fe=m("div"),Nt=m("div"),Nt.textContent="Distance traveled",Qn=M(),Lt=m("div"),Lt.textContent=`${Ge(ve.location().distance)}`,zn=M(),He=m("div"),Rt=m("div"),At=m("button"),At.textContent="Items",Jn=M(),Ye=m("div"),Ze=m("button"),Ze.textContent="Reset",Zn=M(),Ot=m("button"),Ot.textContent="Back",an=M(),Y(Me.$$.fragment),ge(l,"display","none"),g(c,"class","col label svelte-12s7r42"),g(f,"class","col value svelte-12s7r42"),g(o,"class","row svelte-12s7r42"),g(v,"class","col label svelte-12s7r42"),g(k,"class","col value svelte-12s7r42"),g(h,"class","row svelte-12s7r42"),g(w,"class","col label svelte-12s7r42"),g(C,"class","col value svelte-12s7r42"),g(S,"class","row svelte-12s7r42"),g(X,"class","col label svelte-12s7r42"),g(de,"class","col value svelte-12s7r42"),g(U,"class","row svelte-12s7r42"),ge(U,"margin-top","20px"),g(ht,"class","col label svelte-12s7r42"),g(vt,"class","col value svelte-12s7r42"),g(xe,"class","row svelte-12s7r42"),g(bt,"class","col label svelte-12s7r42"),g(yt,"class","col value svelte-12s7r42"),g(Ue,"class","row svelte-12s7r42"),g(wt,"class","col label svelte-12s7r42"),g(kt,"class","col value svelte-12s7r42"),g(Ie,"class","row svelte-12s7r42"),ge(Ie,"margin","10px 0"),g(Et,"class","col label svelte-12s7r42"),g(Ct,"class","col value svelte-12s7r42"),g(qe,"class","row svelte-12s7r42"),g(Tt,"class","col label svelte-12s7r42"),g(It,"class","col value svelte-12s7r42"),g(De,"class","row svelte-12s7r42"),g(Nt,"class","col label svelte-12s7r42"),g(Lt,"class","col value svelte-12s7r42"),g(Fe,"class","row svelte-12s7r42"),g(n,"class","view col svelte-12s7r42"),g(Rt,"class","row svelte-12s7r42"),g(Ze,"class","danger svelte-12s7r42"),g(Ye,"class","row svelte-12s7r42"),g(He,"class","ctrls svelte-12s7r42")},m(q,te){I(q,e,te),a(e,n),a(n,l),a(l,i),a(n,r),a(n,o),a(o,c),a(o,u),a(o,f),a(f,d),a(n,_),a(n,h),a(h,v),a(h,b),a(h,k),a(k,$),a(n,E),a(n,S),a(S,w),a(S,O),a(S,C),a(n,N),a(n,U),a(U,X),a(U,Oe),a(U,de),a(de,ze),a(de,K),a(de,Je),a(n,ue),a(n,xe),a(xe,ht),a(xe,Dn),a(xe,vt),a(vt,on),a(n,Fn),a(n,Ue),a(Ue,bt),a(Ue,Hn),a(Ue,yt),a(yt,cn),a(n,Yn),a(n,Ie),a(Ie,wt),a(Ie,Bn),a(Ie,kt),a(kt,un),a(n,Gn),a(n,qe),a(qe,Et),a(qe,Kn),a(qe,Ct),a(Ct,fn),a(n,Xn),a(n,De),a(De,Tt),a(De,Vn),a(De,It),a(n,Wn),a(n,Fe),a(Fe,Nt),a(Fe,Qn),a(Fe,Lt),a(e,zn),a(e,He),a(He,Rt),a(Rt,At),a(He,Jn),a(He,Ye),a(Ye,Ze),a(Ye,Zn),a(Ye,Ot),I(q,an,te),F(Me,q,te),fe=!0,dn||(el=[P(window,"keydown",t[3]),P(At,"click",t[4]),P(Ze,"click",Nn),P(Ot,"click",Se)],dn=!0)},p(q,[te]){(!fe||te&2)&&s!==(s=q[1].name+"")&&W(i,s),(!fe||te&2)&&p!==(p=q[1].lvl+"")&&W(d,p),(!fe||te&2)&&y!==(y=q[1].xp+"")&&W($,y),(!fe||te&2)&&Pe!==(Pe=q[1].hp+"")&&W(ze,Pe),(!fe||te&2)&&je!==(je=q[1].hpbase+"")&&W(Je,je),(!fe||te&2)&&gt!==(gt=q[1].str+"")&&W(on,gt),(!fe||te&2)&&$t!==($t=q[1].dex+"")&&W(cn,$t),(!fe||te&2)&&Mt!==(Mt=Ge(q[1].gp)+"")&&W(un,Mt),(!fe||te&4)&&St!==(St=Ge(q[2])+"")&&W(fn,St);const tl={};te&128&&(tl.$$scope={dirty:te,ctx:q}),Me.$set(tl)},i(q){fe||(se(()=>{ke||(ke=pe(e,_e,{},!0)),ke.run(1)}),L(Me.$$.fragment,q),fe=!0)},o(q){ke||(ke=pe(e,_e,{},!1)),ke.run(0),R(Me.$$.fragment,q),fe=!1},d(q){q&&T(e),q&&ke&&ke.end(),q&&T(an),t[5](null),H(Me,q),dn=!1,ie(el)}}}function pr(t,e,n){let l,s;Q(t,x,f=>n(1,l=f)),Q(t,ct,f=>n(2,s=f));function i(f){switch(f.key){case"e":r();break;case"q":Se();break;case"p":Nn();break}}function r(){c.open()}function o(f){f&&(c.close(),es(f))}we(()=>{const f=qn.subscribe(o);return()=>{f()}});let c;function u(f){Re[f?"unshift":"push"](()=>{c=f,n(0,c)})}return[c,l,s,i,r,u]}class _r extends ee{constructor(e){super(),Z(this,e,pr,dr,J,{})}}function mr(t){let e,n,l,s;return n=new Si({props:{options:t[2],target:t[1]}}),{c(){e=m("div"),Y(n.$$.fragment),g(e,"class",l=Yt(`toast-wrapper-${t[0]}`)+" svelte-2fyaw6")},m(i,r){I(i,e,r),F(n,e,null),s=!0},p(i,[r]){const o={};r&4&&(o.options=i[2]),r&2&&(o.target=i[1]),n.$set(o),(!s||r&1&&l!==(l=Yt(`toast-wrapper-${i[0]}`)+" svelte-2fyaw6"))&&g(e,"class",l)},i(i){s||(L(n.$$.fragment,i),s=!0)},o(i){R(n.$$.fragment,i),s=!1},d(i){i&&T(e),H(n)}}}function hr(t,e,n){const l={duration:1e3,initial:1,next:0,pausable:!0,dismissable:!1,reversed:!1,intro:{x:0},theme:{},classes:[]},s={duration:500,initial:1,next:0,pausable:!1,dismissable:!1,reversed:!0,intro:{y:20,duration:100},theme:{},classes:[]};let i;we(()=>{r==1?n(2,i=l):r==2&&n(2,i=s)});let{type:r=1}=e,{target:o=void 0}=e;return t.$$set=c=>{"type"in c&&n(0,r=c.type),"target"in c&&n(1,o=c.target)},[r,o,i]}class kn extends ee{constructor(e){super(),Z(this,e,hr,mr,J,{type:0,target:1})}}function vr(t){let e;return{c(){e=m("div")},m(n,l){I(n,e,l)},p:A,i:A,o:A,d(n){n&&T(e)}}}function gr(t){let e,n,l,s;return{c(){e=m("div"),g(e,"class","icon map-u svelte-grf5u9"),oe(e,"rejoice",t[1].ko())},m(i,r){I(i,e,r),s=!0},p(i,r){t=i,(!s||r&2)&&oe(e,"rejoice",t[1].ko())},i(i){s||(se(()=>{l&&l.end(1),n=In(e,en,t[3]),n.start()}),s=!0)},o(i){n&&n.invalidate(),l=pt(e,t[5],{}),s=!1},d(i){i&&T(e),i&&l&&l.end()}}}function vl(t){let e,n,l,s,i,r;return{c(){e=m("div"),n=m("div"),g(n,"class",l="icon "+t[2]+" svelte-grf5u9"),oe(n,"rejoice",t[0].ko()),g(e,"class","col enc img svelte-grf5u9")},m(o,c){I(o,e,c),a(e,n),r=!0},p(o,c){t=o,(!r||c&4&&l!==(l="icon "+t[2]+" svelte-grf5u9"))&&g(n,"class",l),(!r||c&5)&&oe(n,"rejoice",t[0].ko())},i(o){r||(se(()=>{i&&i.end(1),s=In(n,en,t[4]),s.start()}),r=!0)},o(o){s&&s.invalidate(),i=pt(n,t[6],{}),r=!1},d(o){o&&T(e),o&&i&&i.end()}}}function br(t){let e,n,l,s,i,r,o,c,u,f,p,d,_,h,v=!t[1].ko()&&!t[1].fleeing(),b;const k=[gr,vr],y=[];function $(S,w){return w&1&&(s=null),s==null&&(s=!S[0].ko()&&!S[0].fleeing()),s?0:1}i=$(t,-1),r=y[i]=k[i](t),u=new kn({props:{target:Jt,type:2}}),_=new kn({props:{target:Le,type:2}});let E=v&&vl(t);return{c(){e=m("div"),n=m("div"),l=m("div"),r.c(),o=M(),c=m("div"),Y(u.$$.fragment),f=M(),p=m("div"),d=m("div"),Y(_.$$.fragment),h=M(),E&&E.c(),g(l,"class","col user img svelte-grf5u9"),g(c,"class","col toast"),g(n,"class","row"),g(d,"class","col toast"),g(p,"class","row"),g(e,"class","row imgs spaced svelte-grf5u9")},m(S,w){I(S,e,w),a(e,n),a(n,l),y[i].m(l,null),a(n,o),a(n,c),F(u,c,null),a(e,f),a(e,p),a(p,d),F(_,d,null),a(p,h),E&&E.m(p,null),b=!0},p(S,[w]){let O=i;i=$(S,w),i===O?y[i].p(S,w):(ye(),R(y[O],1,1,()=>{y[O]=null}),$e(),r=y[i],r?r.p(S,w):(r=y[i]=k[i](S),r.c()),L(r,1),r.m(l,null)),w&2&&(v=!S[1].ko()&&!S[1].fleeing()),v?E?(E.p(S,w),w&2&&L(E,1)):(E=vl(S),E.c(),L(E,1),E.m(p,null)):E&&(ye(),R(E,1,1,()=>{E=null}),$e())},i(S){b||(L(r),L(u.$$.fragment,S),L(_.$$.fragment,S),L(E),b=!0)},o(S){R(r),R(u.$$.fragment,S),R(_.$$.fragment,S),R(E),b=!1},d(S){S&&T(e),y[i].d(),H(u),H(_),E&&E.d()}}}function yr(t,e,n){let l,s,i;Q(t,x,d=>n(0,l=d)),Q(t,z,d=>n(1,s=d)),Q(t,rn,d=>n(2,i=d));const r={x:40,duration:hn},o={x:-40,duration:hn},c={amount:40,duration:vn};function u(d,_,h,v,b){if(!b){if(h)return Ys(d,c);{let k=v;return _||(k.x*=-1),en(d,k)}}}function f(d){return u(d,s.ko(),l.ko(),r)}function p(d){return u(d,l.ko(),s.ko(),o,l.ko()||l.fleeing())}return[l,s,i,r,o,f,p]}class $r extends ee{constructor(e){super(),Z(this,e,yr,br,J,{})}}function wr(t){let e;return{c(){e=m("div")},m(n,l){I(n,e,l)},p:A,i:A,o:A,d(n){n&&T(e)}}}function kr(t){let e,n,l,s,i,r=t[1].lvl+"",o,c;return{c(){e=m("progress"),l=M(),s=m("span"),i=j("Level "),o=j(r),e.value=t[2],g(e,"class","svelte-1gjc9nt"),g(s,"class","lvl svelte-1gjc9nt")},m(u,f){I(u,e,f),I(u,l,f),I(u,s,f),a(s,i),a(s,o),c=!0},p(u,f){(!c||f&4)&&(e.value=u[2]),(!c||f&2)&&r!==(r=u[1].lvl+"")&&W(o,r)},i(u){c||(n&&n.end(1),c=!0)},o(u){n=pt(e,Zt,{duration:100}),c=!1},d(u){u&&T(e),u&&n&&n.end(),u&&T(l),u&&T(s)}}}function Mr(t){let e;return{c(){e=m("div")},m(n,l){I(n,e,l)},p:A,i:A,o:A,d(n){n&&T(e)}}}function Er(t){let e,n,l,s,i,r=t[0].lvl+"",o,c;return{c(){e=m("progress"),l=M(),s=m("span"),i=j("Level "),o=j(r),e.value=t[3],g(e,"class","svelte-1gjc9nt"),g(s,"class","lvl svelte-1gjc9nt")},m(u,f){I(u,e,f),I(u,l,f),I(u,s,f),a(s,i),a(s,o),c=!0},p(u,f){(!c||f&8)&&(e.value=u[3]),(!c||f&1)&&r!==(r=u[0].lvl+"")&&W(o,r)},i(u){c||(n&&n.end(1),c=!0)},o(u){n=pt(e,Zt,{duration:100}),c=!1},d(u){u&&T(e),u&&n&&n.end(),u&&T(l),u&&T(s)}}}function Cr(t){let e,n,l,s,i,r,o,c,u,f,p;const d=[kr,wr],_=[];function h(y,$){return $&2&&(l=null),l==null&&(l=!y[1].ko()&&!y[1].fleeing()),l?0:1}s=h(t,-1),i=_[s]=d[s](t);const v=[Er,Mr],b=[];function k(y,$){return $&1&&(c=null),c==null&&(c=!y[0].ko()&&!y[0].fleeing()),c?0:1}return u=k(t,-1),f=b[u]=v[u](t),{c(){e=m("div"),n=m("div"),i.c(),r=M(),o=m("div"),f.c(),g(n,"class","col user"),g(o,"class","col enc"),g(e,"class","row info spaced svelte-1gjc9nt")},m(y,$){I(y,e,$),a(e,n),_[s].m(n,null),a(e,r),a(e,o),b[u].m(o,null),p=!0},p(y,[$]){let E=s;s=h(y,$),s===E?_[s].p(y,$):(ye(),R(_[E],1,1,()=>{_[E]=null}),$e(),i=_[s],i?i.p(y,$):(i=_[s]=d[s](y),i.c()),L(i,1),i.m(n,null));let S=u;u=k(y,$),u===S?b[u].p(y,$):(ye(),R(b[S],1,1,()=>{b[S]=null}),$e(),f=b[u],f?f.p(y,$):(f=b[u]=v[u](y),f.c()),L(f,1),f.m(o,null))},i(y){p||(L(i),L(f),p=!0)},o(y){R(i),R(f),p=!1},d(y){y&&T(e),_[s].d(),b[u].d()}}}function Sr(t,e,n){let l,s,i,r;Q(t,z,u=>n(0,l=u)),Q(t,x,u=>n(1,s=u));const o=$n(0,{duration:rl,easing:Xt});Q(t,o,u=>n(2,i=u));const c=$n(0,{duration:rl,easing:Xt});return Q(t,c,u=>n(3,r=u)),t.$$.update=()=>{t.$$.dirty&2&&s.hp&&o.set(s.hp/s.hpbase),t.$$.dirty&1&&l.hp&&c.set(l.hp/l.hpbase)},[l,s,i,r,o,c]}class Tr extends ee{constructor(e){super(),Z(this,e,Sr,Cr,J,{})}}function Ir(t){let e,n,l,s,i,r;return{c(){e=m("div"),n=m("div"),l=m("div"),s=M(),i=m("div"),r=m("div"),g(l,"class","circle svelte-1uajhnl"),ge(l,"transform",`rotate(${Math.min(t[1],180)}deg)`),g(n,"class","wrapper wrapper1 svelte-1uajhnl"),g(r,"class","circle svelte-1uajhnl"),oe(r,"hidden",t[0]<=50),ge(r,"transform",`rotate(${t[1]}deg)`),g(i,"class","wrapper wrapper2 svelte-1uajhnl"),g(e,"class","progress-bar svelte-1uajhnl"),oe(e,"hidden",t[0]>=100)},m(o,c){I(o,e,c),a(e,n),a(n,l),a(e,s),a(e,i),a(i,r)},p(o,[c]){c&2&&ge(l,"transform",`rotate(${Math.min(o[1],180)}deg)`),c&1&&oe(r,"hidden",o[0]<=50),c&2&&ge(r,"transform",`rotate(${o[1]}deg)`),c&1&&oe(e,"hidden",o[0]>=100)},i:A,o:A,d(o){o&&T(e)}}}const gl=100;function Nr(t,e,n){let l;const s=Ol();function i(){n(5,u+=gl),f>=100&&(clearInterval(p),s("ready"))}function r(d){p&&clearInterval(p),n(4,c=d),n(5,u=0),p=setInterval(i,gl)}function o(){n(5,u=c)}let c=1e3,u,f,p;return t.$$.update=()=>{t.$$.dirty&48&&n(0,f=u/c*100),t.$$.dirty&1&&n(1,l=f*3.6)},[f,l,r,o,c,u]}class Lr extends ee{constructor(e){super(),Z(this,e,Nr,Ir,J,{start:2,cancel:3})}get start(){return this.$$.ctx[2]}get cancel(){return this.$$.ctx[3]}}function bl(t){let e,n,l,s;return e=new $r({}),l=new Tr({}),{c(){Y(e.$$.fragment),n=M(),Y(l.$$.fragment)},m(i,r){F(e,i,r),I(i,n,r),F(l,i,r),s=!0},i(i){s||(L(e.$$.fragment,i),L(l.$$.fragment,i),s=!0)},o(i){R(e.$$.fragment,i),R(l.$$.fragment,i),s=!1},d(i){H(e,i),i&&T(n),H(l,i)}}}function yl(t){let e,n,l,s,i,r,o,c,u,f,p,d,_,h,v,b,k,y,$,E,S={};v=new Lr({props:S}),t[19](v),v.$on("ready",t[12]);function w(N,U){if(N[10])return Or;if(N[1]&&N[5])return Ar;if(N[2]&&N[5])return Rr}let O=w(t),C=O&&O(t);return{c(){e=m("div"),n=m("div"),l=m("button"),s=j("Strike"),r=M(),o=m("button"),c=j("Counter"),f=M(),p=m("button"),d=j("Items"),h=M(),Y(v.$$.fragment),b=M(),k=m("div"),C&&C.c(),l.disabled=i=!t[0],o.disabled=u=!t[9],p.disabled=_=!t[0],g(n,"class","row"),g(k,"class","row"),g(e,"class","ctrls")},m(N,U){I(N,e,U),a(e,n),a(n,l),a(l,s),a(n,r),a(n,o),a(o,c),a(n,f),a(n,p),a(p,d),a(n,h),F(v,n,null),a(e,b),a(e,k),C&&C.m(k,null),y=!0,$||(E=[P(l,"click",t[13]),P(o,"click",t[14]),P(p,"click",t[15])],$=!0)},p(N,U){(!y||U&1&&i!==(i=!N[0]))&&(l.disabled=i),(!y||U&512&&u!==(u=!N[9]))&&(o.disabled=u),(!y||U&1&&_!==(_=!N[0]))&&(p.disabled=_);const X={};v.$set(X),O===(O=w(N))&&C?C.p(N,U):(C&&C.d(1),C=O&&O(N),C&&(C.c(),C.m(k,null)))},i(N){y||(L(v.$$.fragment,N),y=!0)},o(N){R(v.$$.fragment,N),y=!1},d(N){N&&T(e),t[19](null),H(v),C&&C.d(),$=!1,ie(E)}}}function Rr(t){let e,n,l;return{c(){e=m("button"),e.textContent="Reset"},m(s,i){I(s,e,i),n||(l=P(e,"click",t[18]),n=!0)},p:A,d(s){s&&T(e),n=!1,l()}}}function Ar(t){let e,n,l;return{c(){e=m("button"),e.textContent="Proceed"},m(s,i){I(s,e,i),n||(l=P(e,"click",t[17]),n=!0)},p:A,d(s){s&&T(e),n=!1,l()}}}function Or(t){let e,n,l;return{c(){e=m("button"),e.textContent="Flee"},m(s,i){I(s,e,i),n||(l=P(e,"click",t[16]),n=!0)},p:A,d(s){s&&T(e),n=!1,l()}}}function Pr(t){let e,n;return e=new ts({}),{c(){Y(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function jr(t){let e,n,l,s=!t[3].fleeing(),i,r,o,c,u,f,p=t[4]&&!t[6]&&bl(),d=s&&yl(t),_={$$slots:{default:[Pr]},$$scope:{ctx:t}};return o=new Un({props:_}),t[20](o),{c(){e=m("div"),n=m("div"),p&&p.c(),l=M(),d&&d.c(),r=M(),Y(o.$$.fragment),g(n,"class","view field svelte-1tqkonl")},m(h,v){I(h,e,v),a(e,n),p&&p.m(n,null),a(e,l),d&&d.m(e,null),I(h,r,v),F(o,h,v),c=!0,u||(f=P(window,"keydown",t[11]),u=!0)},p(h,[v]){h[4]&&!h[6]?p?v&80&&L(p,1):(p=bl(),p.c(),L(p,1),p.m(n,null)):p&&(ye(),R(p,1,1,()=>{p=null}),$e()),v&8&&(s=!h[3].fleeing()),s?d?(d.p(h,v),v&8&&L(d,1)):(d=yl(h),d.c(),L(d,1),d.m(e,null)):d&&(ye(),R(d,1,1,()=>{d=null}),$e());const b={};v&536870912&&(b.$$scope={dirty:v,ctx:h}),o.$set(b)},i(h){c||(L(p),L(d),se(()=>{i||(i=pe(e,_e,{},!0)),i.run(1)}),L(o.$$.fragment,h),c=!0)},o(h){R(p),R(d),i||(i=pe(e,_e,{},!1)),i.run(0),R(o.$$.fragment,h),c=!1},d(h){h&&T(e),p&&p.d(),d&&d.d(),h&&i&&i.end(),h&&T(r),t[20](null),H(o,h),u=!1,f()}}}function xr(t,e,n){let l,s,i,r;Q(t,x,K=>n(3,i=K)),Q(t,z,K=>n(4,r=K));function o(K){switch(K.key){case"f":f();break;case"v":p();break;case"e":d();break;case"q":l?h():N&&O?y():U&&O&&$();break}}function c(){l&&(S=ae(pl()),X.start(S))}function u(){l&&n(0,w=!0)}function f(){w&&(n(0,w=!1),Ri(),setTimeout(c,1))}function p(){w&&(n(0,w=!1),Ai(),setTimeout(c,1))}function d(){w&&(de.open(),i.evading()&&Ce(x,i.status.evading=!1,i))}function _(K){K&&w&&(n(0,w=!1),setTimeout(()=>es(K),1),setTimeout(c,1)),de.close()}function h(){X.cancel(),Oi(),Ee(1e3,Se)}function v(){l&&(B(We)(),Oe=Ee(ae(E),v))}function b(){n(1,N=!0),X.cancel(),n(0,w=!1),Ee(vn,()=>{ji(),n(5,O=!0)})}function k(){n(2,U=!0),X.cancel(),n(0,w=!1),Ee(vn,()=>{me.persist("Game over"),n(5,O=!0)})}function y(){n(6,C=!0),Ee(hn,Se)}function $(){Nn()}we(()=>{Di(),E=Pi(r.dex,i.dex),S=pl();const K=x.subscribe(ue=>{ue!=null&&ue.ko()&&k()}),je=z.subscribe(ue=>{(ue!=null&&ue.ko()||ue!=null&&ue.fleeing())&&b()}),Je=qn.subscribe(_);return Oe=Ee(G(E),v),X.start(S),()=>{X==null||X.cancel(),clearTimeout(Oe),je(),K(),Je(),Ce(x,i.status.fleeing=!1,i),Ce(x,i.status.evading=!1,i),Ce(z,r=null,r)}});let E,S,w,O,C,N,U,X,Oe,de;function Pe(K){Re[K?"unshift":"push"](()=>{X=K,n(7,X)})}function ze(K){Re[K?"unshift":"push"](()=>{de=K,n(8,de)})}return t.$$.update=()=>{t.$$.dirty&30&&n(10,l=!N&&!U&&!i.fleeing()&&!(r!=null&&r.fleeing())),t.$$.dirty&9&&n(9,s=w&&!i.evading())},[w,N,U,i,r,O,C,X,de,s,l,o,u,f,p,d,h,y,$,Pe,ze]}class Ur extends ee{constructor(e){super(),Z(this,e,xr,jr,J,{})}}function $l(t,e,n){const l=t.slice();return l[12]=e[n],l}function wl(t){let e,n,l;function s(o,c){return o[2]?Dr:qr}let i=s(t),r=i(t);return{c(){e=m("p"),e.textContent="Inn",n=M(),r.c(),l=dt()},m(o,c){I(o,e,c),I(o,n,c),r.m(o,c),I(o,l,c)},p(o,c){i===(i=s(o))&&r?r.p(o,c):(r.d(1),r=i(o),r&&(r.c(),r.m(l.parentNode,l)))},d(o){o&&T(e),o&&T(n),r.d(o),o&&T(l)}}}function qr(t){let e;return{c(){e=m("p"),e.textContent="No vacancies"},m(n,l){I(n,e,l)},p:A,d(n){n&&T(e)}}}function Dr(t){let e,n=t[0].innCost+"",l,s;return{c(){e=m("p"),l=j(n),s=j(" gold per night")},m(i,r){I(i,e,r),a(e,l),a(e,s)},p(i,r){r&1&&n!==(n=i[0].innCost+"")&&W(l,n)},d(i){i&&T(e)}}}function kl(t){let e,n=t[0].items,l=[];for(let s=0;s<n.length;s+=1)l[s]=Ml($l(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=dt()},m(s,i){for(let r=0;r<l.length;r+=1)l[r].m(s,i);I(s,e,i)},p(s,i){if(i&129){n=s[0].items;let r;for(r=0;r<n.length;r+=1){const o=$l(s,n,r);l[r]?l[r].p(o,i):(l[r]=Ml(o),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(s){Ll(l,s),s&&T(e)}}}function Ml(t){let e,n,l=t[12].name+"",s,i,r=t[12].value+"",o,c,u,f,p;function d(){return t[9](t[12])}return{c(){e=m("button"),n=m("span"),s=j(l),i=m("span"),o=j(r),c=j(" gold"),u=M(),g(n,"class","svelte-x43rc3"),g(i,"class","svelte-x43rc3"),g(e,"class","row spaced svelte-x43rc3")},m(_,h){I(_,e,h),a(e,n),a(n,s),a(e,i),a(i,o),a(i,c),a(e,u),f||(p=P(e,"click",d),f=!0)},p(_,h){t=_,h&1&&l!==(l=t[12].name+"")&&W(s,l),h&1&&r!==(r=t[12].value+"")&&W(o,r)},d(_){_&&T(e),f=!1,p()}}}function Fr(t){let e,n,l,s,i,r,o,c=t[4].gp+"",u,f,p=t[3]&&kl(t);return{c(){e=m("div"),n=m("div"),n.innerHTML='<span class="svelte-x43rc3">Name</span><span class="svelte-x43rc3">Price</span>',l=M(),s=m("div"),p&&p.c(),i=M(),r=m("div"),o=j("You have "),u=j(c),f=j(" gold"),g(n,"class","header row spaced svelte-x43rc3"),g(s,"class","col items svelte-x43rc3"),g(r,"class","gold row svelte-x43rc3"),g(e,"class","col modal svelte-x43rc3")},m(d,_){I(d,e,_),a(e,n),a(e,l),a(e,s),p&&p.m(s,null),a(e,i),a(e,r),a(r,o),a(r,u),a(r,f)},p(d,_){d[3]?p?p.p(d,_):(p=kl(d),p.c(),p.m(s,null)):p&&(p.d(1),p=null),_&16&&c!==(c=d[4].gp+"")&&W(u,c)},d(d){d&&T(e),p&&p.d()}}}function Hr(t){let e,n,l,s,i,r,o,c,u,f,p,d,_,h,v,b,k,y,$,E,S,w=t[0]&&wl(t),O={$$slots:{default:[Fr]},$$scope:{ctx:t}};return y=new Un({props:O}),t[10](y),{c(){e=m("div"),n=m("div"),w&&w.c(),l=M(),s=m("div"),i=m("div"),r=m("button"),o=j("Rest"),u=M(),f=m("button"),p=j("Shop"),_=M(),h=m("div"),v=m("button"),v.textContent="Leave",k=M(),Y(y.$$.fragment),g(n,"class","view col"),r.disabled=c=!t[2],f.disabled=d=!t[3],g(i,"class","row"),g(h,"class","row"),g(s,"class","ctrls")},m(C,N){I(C,e,N),a(e,n),w&&w.m(n,null),a(e,l),a(e,s),a(s,i),a(i,r),a(r,o),a(i,u),a(i,f),a(f,p),a(s,_),a(s,h),a(h,v),I(C,k,N),F(y,C,N),$=!0,E||(S=[P(window,"keydown",t[5]),P(r,"click",t[8]),P(f,"click",t[6]),P(v,"click",Se)],E=!0)},p(C,[N]){C[0]?w?w.p(C,N):(w=wl(C),w.c(),w.m(n,null)):w&&(w.d(1),w=null),(!$||N&4&&c!==(c=!C[2]))&&(r.disabled=c),(!$||N&8&&d!==(d=!C[3]))&&(f.disabled=d);const U={};N&32793&&(U.$$scope={dirty:N,ctx:C}),y.$set(U)},i(C){$||(se(()=>{b||(b=pe(e,_e,{},!0)),b.run(1)}),L(y.$$.fragment,C),$=!0)},o(C){b||(b=pe(e,_e,{},!1)),b.run(0),R(y.$$.fragment,C),$=!1},d(C){C&&T(e),w&&w.d(),C&&b&&b.end(),C&&T(k),t[10](null),H(y,C),E=!1,ie(S)}}}function Yr(t,e,n){let l;Q(t,x,v=>n(4,l=v));function s(v){switch(v.key){case"e":i();break;case"r":o();break;case"q":Se();break}}function i(){f.open()}function r(v){c(v.value)&&sr(v)}function o(){c(u.innCost)&&Gs()}function c(v){return l.gp>=v?(Ce(x,l.gp-=v,l),!0):(me.show("Not enough gold"),!1)}we(()=>{var b;let v=ve.location().abs;n(0,u=Qi(v.x,v.y)),n(2,p=G(12)>0),n(3,d=(b=u.items)==null?void 0:b.length)});let u,f,p,d;const _=v=>r(v);function h(v){Re[v?"unshift":"push"](()=>{f=v,n(1,f)})}return[u,f,p,d,l,s,i,r,o,_,h]}class Br extends ee{constructor(e){super(),Z(this,e,Yr,Hr,J,{})}}function Gr(t){let e,n,l,s,i;return{c(){e=m("div"),n=m("div"),l=m("div"),g(l,"class","icon moon"),ge(l,"margin-top","80px"),g(n,"class","view")},m(r,o){I(r,e,o),a(e,n),a(n,l),i=!0},p:A,i(r){i||(se(()=>{s||(s=pe(e,_e,{},!0)),s.run(1)}),i=!0)},o(r){s||(s=pe(e,_e,{},!1)),s.run(0),i=!1},d(r){r&&T(e),r&&s&&s.end()}}}function Kr(t,e,n){let l;return Q(t,x,s=>n(0,l=s)),we(()=>{Ce(x,l.hp=l.hpbase,l),Ee(2e3,Hl)}),[]}class Xr extends ee{constructor(e){super(),Z(this,e,Kr,Gr,J,{})}}function Vr(t){let e,n;return e=new Xr({}),{c(){Y(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function Wr(t){let e,n;return e=new Br({}),{c(){Y(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function Qr(t){let e,n;return e=new Ur({}),{c(){Y(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function zr(t){let e,n;return e=new _r({}),{c(){Y(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function Jr(t){let e,n;return e=new er({}),{c(){Y(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function Zr(t){let e,n;return e=new pi({}),{c(){Y(e.$$.fragment)},m(l,s){F(e,l,s),n=!0},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function eo(t){let e,n,l,s,i,r;n=new kn({});const o=[Zr,Jr,zr,Qr,Wr,Vr],c=[];function u(f,p){return f[0]==re.TITLE?0:f[0]==re.MAP?1:f[0]==re.MENU?2:f[0]==re.ENC?3:f[0]==re.CITY?4:f[0]==re.SLEEP?5:-1}return~(s=u(t))&&(i=c[s]=o[s](t)),{c(){e=m("main"),Y(n.$$.fragment),l=M(),i&&i.c()},m(f,p){I(f,e,p),F(n,e,null),a(e,l),~s&&c[s].m(e,null),r=!0},p(f,[p]){let d=s;s=u(f),s!==d&&(i&&(ye(),R(c[d],1,1,()=>{c[d]=null}),$e()),~s?(i=c[s],i||(i=c[s]=o[s](f),i.c()),L(i,1),i.m(e,null)):i=null)},i(f){r||(L(n.$$.fragment,f),L(i),r=!0)},o(f){R(n.$$.fragment,f),R(i),r=!1},d(f){f&&T(e),H(n),~s&&c[s].d()}}}function to(t,e,n){let l;we(()=>{l=Te.subscribe(i=>{n(0,s=void 0),me.clear(),Ee(Dl,()=>{n(0,s=i)})})}),Cn(l);let s;return[s]}class no extends ee{constructor(e){super(),Z(this,e,to,eo,J,{})}}new no({target:document.getElementById("app")});
